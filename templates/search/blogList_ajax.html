{% load static %}

{% if object_list|length > 0  %}
<div class="grid">
  <div class="grid-sizer col-6 col-md-4 col-lg-3"></div>

  {% for blog in object_list %}
  <div class="grid-item col-6 col-md-4 col-lg-3 my-2 px-2 px-sm-3">
    <div class="otapick_card_back">
      <div class="otapick_card {{ group }}">
        <div class="card border border-top-0">
          <div class="l-thumbnail">

          {% if isMobile %}
            <a href="{% url 'download:download' group_id blog.blog_ct %}" class="download-trigger">
              <figure class="thumbnail-wrapper-mobile">
                {% if blog.thumbnail %}
                <img class="card-img-top" src="{{ blog.thumbnail.picture.url }}" style="border-radius: 0;">
                {% else %}
                <img class="card-img-top" src="{% static 'img/imageNotFound.jpg' %}" style="border-radius: 0;">
                {% endif %}
              </figure>
            </a>
          {% else %}
            <a href="{% url 'download:download' group_id blog.blog_ct %}" class="download-trigger">
              <figure class="thumbnail-wrapper">
                {% if blog.thumbnail %}
                <img class="card-img-top" src="{{ blog.thumbnail.picture.url }}" style="border-radius: 0;">
                {% else %}
                <img class="card-img-top" src="{% static 'img/imageNotFound.jpg' %}" style="border-radius: 0;">
                {% endif %}
              </figure>
            </a>
            <span class="more-button">
              <div class="row justify-content-around">
                <div class="col-4 p-0 mr-2">
                  {% if group_id == 1 %}
                  <a href="https://www.keyakizaka46.com/s/k46o/diary/detail/{{ blog.blog_ct }}?ima=0000&cd=member"
                    style="color: white;" target="_blank" data-toggle="tooltip" title="公式ブログで確認">
                    <i class="fas fa-external-link-alt"></i>
                  </a>
                  {% elif group_id == 2 %}
                  <a href="https://www.hinatazaka46.com/s/official/diary/detail/{{ blog.blog_ct }}?ima=0000&cd=member"
                    style="color: white;" target="_blank" data-toggle="tooltip" title="公式ブログで確認">
                    <i class="fas fa-external-link-alt"></i>
                  </a>
                  {% endif %}
                </div>
                <div class="col-4 p-0 ml-2">
                  <a href="{% url 'download:download' group_id blog.blog_ct %}" style="color: white;"
                    data-toggle="tooltip" title="ダウンロードページへ" class="download-trigger">
                    <i class="fas fa-download"></i>
                  </a>
                </div>
              </div>
            </span>
          {% endif %}

          </div>
          <div class="card-body pb-0 px-3 px-sm-4 pt-3">
            <a href="{% url 'download:download' group_id blog.blog_ct %}" class="download-trigger" style="color: dimgray;">
              <h6 class="card-title blog-title">{{ blog.title }}</h6>
            </a>
            <div class="row">
              <a href="{% url 'search:searchByMembers' group_id blog.writer.ct %}"
                class="card-text ml-3 small mb-2 pb-0 card-info {{ group }} writer-name">{{ blog.writer.full_kanji }}</a>
              <p class="card-text ml-3 small mb-2 pb-0 card-info">{{ blog.post_date|date:"y/n/j" }}</p>
            </div>

            <div class="container mb-2">
              <div class="row">

                <div class="col-4 card-parameter d-flex justify-content-center align-items-center">
                  <div class="row justify-content-around">
                    <div class="d-flex align-items-center">
                      <i class="fas fa-eye" style="color: grey"></i>
                    </div>
                    &nbsp;
                    <div class="card-parameter-num">
                      {% if blog.num_of_views %}
                        {{ blog.num_of_views }}
                      {% else %}
                        0
                      {% endif %}
                    </div>
                  </div>
                </div>

                <div class="dropdown col-4 text-center" style="overflow-y:visible;">
                  <div class="card-detail-button-super">
                    <button type="button" class="btn btn-light rounded-circle p-0 card-detail-button"
                      id="thumbnailDetail" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-bars" style="color:gray;"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="thumbnailDetail">
                      <a href="{% url 'download:download' group_id blog.blog_ct %}" class="dropdown-item download-trigger">ダウンロードページへ</a>
                      {% if group_id == 1 %}
                      <a class="dropdown-item" target="_blank"
                        href="https://www.keyakizaka46.com/s/k46o/diary/detail/{{ blog.blog_ct }}?ima=0000&cd=member">公式ブログで確認</a>
                      {% elif group_id == 2 %}
                      <a class="dropdown-item" target="_blank"
                        href="https://www.hinatazaka46.com/s/official/diary/detail/{{ blog.blog_ct }}?ima=0000&cd=member">公式ブログで確認</a>
                      {% endif %}
                    </div>
                  </div>
                </div>

                <div class="col-4 card-parameter d-flex justify-content-center align-items-center">
                  <div class="row justify-content-around">
                    <div class="d-flex align-items-center">
                      <i class="fas fa-download" style="color: grey"></i>
                    </div>
                    &nbsp;
                    <div class="card-parameter-num">
                      {% if blog.num_of_downloads %}
                        {{ blog.num_of_downloads }}
                      {% else %}
                        0
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endif %}
