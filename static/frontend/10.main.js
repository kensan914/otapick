(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{136:function(e,t,o){"use strict";o.r(t),o.d(t,"getImageUrlComposition",(function(){return h}));var r=o(0),s=o.n(r),n=o(142),a=o(133),i=o(137),l=o.n(i),c=o(3),u=o(148),p=o(11);class d extends s.a.Component{constructor(e){var t,o;super(e);const r=null===(t=e.match)||void 0===t||null===(o=t.params)||void 0===o?void 0:o.groupID,s=e.match.params.ct;this.isRender=Object(c.d)(e.history,r,s);const n=l.a.parse(e.location.search);this.state={group:Object(c.m)(r),groupID:r,orderFormat:void 0===n.sort?"recommend":n.sort,ct:s}}pushHistory(e){const t=l.a.parse(this.props.location.search);e.sort||(delete t.keyword,delete t.post);const o=Object.assign(t,e);let r="";Object.keys(o).forEach((e,t)=>{r+=0==t?`?${e}=${o[e]}`:`&${e}=${o[e]}`}),this.props.history.push(Object(c.a)(this.props.match.url,r))}componentDidUpdate(e){if(Object(c.e)(this.props)){const{groupID:t,ct:o,orderFormat:r}=h(this.props),s=h(e),n=s.groupID,a=s.ct,i=l.a.parse(this.props.location.search);if(void 0===o){if(n!==t||a!==o)return void this.setState({groupID:t,ct:o,group:Object(c.m)(t),orderFormat:r})}else if(n!==t||a!==o)return void this.setState({groupID:t,ct:o,group:Object(c.m)(t)});if(i.sort&&this.state.orderFormat!==i.sort)return void this.setState({orderFormat:i.sort});if(!i.sort&&"recommend"!==this.state.orderFormat)return void this.setState({orderFormat:"recommend"})}}render(){return s.a.createElement(s.a.Fragment,null,this.isRender&&s.a.createElement("div",{className:"container mt-3 text-muted"},s.a.createElement(a.a,{title:"画像一覧",type:"images",mode:this.state.group?this.state.group:"recommend",groupID:this.state.groupID,ct:this.state.ct}),s.a.createElement(u.a,{groupID:this.state.groupID,ct:this.state.ct,group:this.state.group,orderFormat:this.state.orderFormat,pushHistory:e=>this.pushHistory(e),hide:void 0===this.state.groupID&&void 0===this.state.ct}),void 0===this.state.groupID&&void 0===this.state.ct&&!c.s&&s.a.createElement("div",{className:"py-2"}),s.a.createElement(n.b,null)))}}t.default=Object(p.o)(d);const h=e=>{var t,o;const r=(null===(t=e.match)||void 0===t?void 0:t.params)?e.match.params.groupID:null,s=(null===(o=e.match)||void 0===o?void 0:o.params)?e.match.params.ct:null,n=l.a.parse(e.location.search);return{groupID:r,ct:s,orderFormat:void 0===n.sort?"recommend":n.sort}}},137:function(e,t,o){"use strict";var r=o(138),s=o(54);function n(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var o=function(e){var t;switch(e.arrayFormat){case"index":return function(e,o,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=o):r[e]=o};case"bracket":return function(e,o,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],o):r[e]=[o]:r[e]=o};default:return function(e,t,o){void 0!==o[e]?o[e]=[].concat(o[e],t):o[e]=t}}}(t=s({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),s=t.shift(),n=t.length>0?t.join("="):void 0;n=void 0===n?null:decodeURIComponent(n),o(decodeURIComponent(s),n,r)})),Object.keys(r).sort().reduce((function(e,t){var o=r[t];return Boolean(o)&&"object"==typeof o&&!Array.isArray(o)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(o):e[t]=o,e}),Object.create(null))):r},t.stringify=function(e,t){var o=function(e){switch(e.arrayFormat){case"index":return function(t,o,r){return null===o?[n(t,e),"[",r,"]"].join(""):[n(t,e),"[",n(r,e),"]=",n(o,e)].join("")};case"bracket":return function(t,o){return null===o?n(t,e):[n(t,e),"[]=",n(o,e)].join("")};default:return function(t,o){return null===o?n(t,e):[n(t,e),"=",n(o,e)].join("")}}}(t=s({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var s=e[r];if(void 0===s)return"";if(null===s)return n(r,t);if(Array.isArray(s)){var a=[];return s.slice().forEach((function(e){void 0!==e&&a.push(o(r,e,a.length))})),a.join("&")}return n(r,t)+"="+n(s,t)})).filter((function(e){return e.length>0})).join("&"):""}},138:function(e,t,o){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},142:function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var r=o(0),s=o.n(r),n=o(11),a=o(3),i=o(4),l=o(153),c=o(141),u=o(53),p=o(143),d=o(136),h=o(24),m=o(41);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}t.b=e=>{const{topComponent:t}=e;return s.a.createElement(g,f({},e,{render:(e,o,r,n,u,d,h,m,f,g,b)=>s.a.createElement(p.a,{hasMore:e,status:o,page:r,urlExcludePage:n,isLoading:u,request:d,topComponent:m&&"success"===o&&t,NotFoundComponent:b},h.map(({groupID:e,blogCt:t,blogTitle:o,src:r,url:n,blogUrl:u,officialUrl:p,writer:d,order:h,isFavorite:m,width:b,height:v},y)=>{const O="grid-item "+(f?"col-6 col-md-4 col-lg-3 col-xl-2 px-1 px-sm-2 "+(a.s?"my-1 ":"my-3 "):"col-6 col-md-4 col-lg-3 px-1 px-sm-2 "+(a.s?"my-1 ":"my-3 "));return s.a.createElement("div",{key:y},s.a.createElement("div",{className:O},s.a.createElement(l.a,{id:y,groupID:e,group:Object(a.m)(e),blogCt:t,blogTitle:o,src:r,url:n,blogUrl:u,officialUrl:p,writer:d,order:h,isFavorite:m,width:b,height:v})),!g&&y%i.b===i.a&&s.a.createElement("div",{className:O+(a.s?"mb-4":"")},s.a.createElement(c.b,null)))}))}))};const g=Object(n.o)(e=>{var t;const{type:o,render:n}=e,l=null===(t=e.match)||void 0===t?void 0:t.params,[c]=Object(r.useState)(l&&l.groupID),[f]=Object(r.useState)(l&&l.blogCt),[g]=Object(r.useState)(l&&l.order),[b]=Object(r.useState)(l&&l.ct),[v]=Object(r.useState)(Object(d.getImageUrlComposition)(e).orderFormat);let y,O,E=!1,j=!1;switch(o){case"RELATED_IMAGES":y=Object(a.a)(i.d,"relatedImages/",c,f,g),E=!0,j=!0;break;case"FAVORITE_IMAGES":y=Object(a.a)(i.d,"favorites/"),E=!0,j=!0,O=s.a.createElement("div",{className:a.t?"mx-1":"mx-3"},s.a.createElement(m.c,{type:"favoriteImage",margin:!0}));break;case"HOME":y=Object(a.a)(i.d,"home/");break;default:y=Object(a.a)(i.d,"images/",c,b)}const[w,L,C,S,k,I,T]=Object(p.b)(),_=Object(a.a)(y,v&&"?sort="+v,T&&"?random_seed="+T),[D,P]=Object(r.useState)(!1),x=Object(h.d)(),{isLoading:F,request:N}=Object(u.a)(Object(a.a)(_,"?page="+I.current),"get",{thenCallback:e=>{if(e.data.length>0){const t=e.data.map(e=>({groupID:e.blog.group_id,blogCt:e.blog.blog_ct,blogTitle:e.blog.title,src:e.image.src,url:e.image.url,blogUrl:e.blog.url,officialUrl:e.blog.official_url,writer:e.blog.writer,order:e.image.order,isFavorite:e.image.is_favorite,width:e.image.width,height:e.image.height}));L(t),S("success"),e.data.length<20&&(k.current=!1)}else 1==I.current?(k.current=!1,S("image_not_found")):k.current=!1;P&&P(!0)},catchCallback:e=>{404===e.response.status&&(k.current=!1,S("image_not_found"))},finallyCallback:()=>{I.current++},didRequestCallback:e=>console.info(e),shouldRequestDidMount:!0,token:x.token});return n(k.current,C,I.current,_,F,N,w,D,E,j,O)})},143:function(e,t,o){"use strict";o.d(t,"b",(function(){return f}));var r=o(0),s=o.n(r),n=o(28),a=o(155),i=o.n(a),l=o(144),c=o.n(l),u=o(3),p=o(11),d=o(41),h=o(27);const m=Object(p.o)(e=>{const{hasMore:t,status:o,page:a,urlExcludePage:l,isLoading:p,request:m,topComponent:f,NotFoundComponent:g,children:b}=e,v=Object(h.d)();Object(r.useEffect)(()=>{t||v({type:"APPLY_SHOW_FOOTER",location:e.location})},[t]),Object(r.useEffect)(()=>{for(const t of document.getElementsByClassName("adsbygoogle"))t.classList.contains(e.location.key)||t.remove()},[e.location]);return s.a.createElement(s.a.Fragment,null,f,s.a.createElement(c.a,{hasMore:t,loadMore:()=>{t&&!p&&m({url:Object(u.a)(l,"?page="+a)})},initialLoad:!1,loader:s.a.createElement(n.b,{key:0}),className:"mb-5",threshold:500},"success"===o&&s.a.createElement(i.a,{options:{itemSelector:".grid-item",transitionDuration:0,stagger:0},disableImagesLoaded:!1},b),"blog_not_found"===o&&s.a.createElement("div",null,s.a.createElement(d.c,{type:"blogFailed",margin:!0})),"image_not_found"===o&&(void 0===g?s.a.createElement("div",null,s.a.createElement(d.c,{type:"imageFailed",margin:!0})):g)))});t.a=m;const f=()=>{const[e,t]=Object(r.useState)([]),[o,s]=Object(r.useState)(""),n=Object(r.useRef)(!0),a=Object(r.useRef)(1),[i]=Object(r.useState)(Object(u.j)());return[e,o=>{t([...e,...o])},o,s,n,a,i]}},144:function(e,t,o){e.exports=o(145)},145:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=o(0),n=i(s),a=i(o(1));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.scrollListener=o.scrollListener.bind(o),o.eventListenerOptions=o.eventListenerOptions.bind(o),o.mousewheelListener=o.mousewheelListener.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()&&(e={useCapture:this.props.useCapture,passive:!0}),e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,o=this.getParentElement(e),r=void 0;if(this.props.useWindow){var s=document.documentElement||document.body.parentNode||document.body,n=void 0!==t.pageYOffset?t.pageYOffset:s.scrollTop;r=this.props.isReverse?n:this.calculateOffset(e,n)}else r=this.props.isReverse?o.scrollTop:e.scrollHeight-o.scrollTop-o.clientHeight;r<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=o.scrollHeight,this.beforeScrollTop=o.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),o=t.children,r=t.element,s=t.hasMore,a=(t.initialLoad,t.isReverse),i=t.loader,l=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var o={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r]);return o}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,l&&l(t)};var u=[o];return s&&(i?a?u.unshift(i):u.push(i):this.defaultLoader&&(a?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),n.default.createElement(r,c,u)}}]),t}(s.Component);l.propTypes={children:a.default.node.isRequired,element:a.default.node,hasMore:a.default.bool,initialLoad:a.default.bool,isReverse:a.default.bool,loader:a.default.node,loadMore:a.default.func.isRequired,pageStart:a.default.number,ref:a.default.func,getScrollParent:a.default.func,threshold:a.default.number,useCapture:a.default.bool,useWindow:a.default.bool},l.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=l,e.exports=t.default},146:function(e,t,o){"use strict";var r=o(8),s=o(7),n=o(0),a=o.n(n),i=o(158),l=o(132),c=o(129),u=o(130);class p extends a.a.Component{render(){return a.a.createElement(i.a,{className:"p-0 "+this.props.className,style:this.props.style},a.a.createElement(l.a,{caret:!0,color:"light",className:"blogList-detail-btn sort-button"},a.a.createElement(s.a,{icon:r.C}),this.props.title),a.a.createElement(c.a,{className:"bold"},"images"==this.props.type&&a.a.createElement(u.a,{onClick:()=>this.props.pushHistory({sort:"recommend"})},"おすすめ順"),a.a.createElement(u.a,{onClick:()=>this.props.pushHistory({sort:"newer_post"})},"新着順"),a.a.createElement(u.a,{onClick:()=>this.props.pushHistory({sort:"older_post"})},"古い順"),a.a.createElement(u.a,{onClick:()=>this.props.pushHistory({sort:"popularity"})},"人気順"),a.a.createElement(u.a,{onClick:()=>this.props.pushHistory({sort:"dl"})},"DL順"),"blogs"==this.props.type&&a.a.createElement(u.a,{onClick:()=>this.props.pushHistory({sort:"sum_dl"})},"総DL順"),a.a.createElement(u.a,{onClick:()=>this.props.pushHistory({sort:"view"})},"閲覧数順")))}}t.a=p},148:function(e,t,o){"use strict";var r=o(0),s=o.n(r),n=o(146),a=o(26),i=o.n(a),l=o(3),c=o(11),u=o(4),p=o(51),d=o(136);class h extends s.a.Component{constructor(e){super(e),this.state={title:"",numOfHit:0,sortButtonTitle:this.convertSortButtonTitle(this.props.orderFormat),metaTitle:""},this.getImageListInfo(this.props.groupID,this.props.ct)}getImageListInfo(e,t){const o=this.props.location.search,r=Object(l.a)(u.d,"images/info/",e,t,o);setTimeout(()=>{i.a.get(r).then(e=>{e.data.status?(this.setState({title:"画像が見つかりませんでした。",numOfHit:0,status:"not_found",metaTitle:this.props.home?u.o:"Not Found Image"}),this.props.home?Object(l.D)({title:u.o,description:""}):Object(l.D)({title:"Not Found Image",description:u.p})):(this.setState({title:e.data.title,numOfHit:e.data.num_of_hit,status:"success",metaTitle:this.props.home?u.o:e.data.meta_title}),this.props.home?Object(l.D)({title:u.o,description:""}):Object(l.D)({title:e.data.meta_title+"の画像・写真一覧",description:u.p}))}).catch(e=>{console.log(e)}).finally(()=>{Object(l.q)(this.props.location.pathname)})},u.k)}convertSortButtonTitle(e){switch(e){case"recommend":return"おすすめ順";case"newer_post":return"新着順";case"older_post":return"古い順";case"popularity":return"人気順";case"dl":return"DL順";case"view":return"閲覧数順";default:return""}}componentDidUpdate(e){if(Object(l.e)(this.props)&&this.props.location!==e.location){const{groupID:e,ct:t,orderFormat:o}=Object(d.getImageUrlComposition)(this.props);this.setState({sortButtonTitle:this.convertSortButtonTitle(o)}),this.getImageListInfo(e,t),this.props.home?Object(l.D)({title:this.state.metaTitle,description:""}):Object(l.D)({title:this.state.metaTitle+"の画像・写真一覧",description:u.p})}}render(){return s.a.createElement(s.a.Fragment,null,!this.props.hide&&s.a.createElement("div",null,s.a.createElement("div",{className:"card otapick-card2 "+(l.t?"smp mb-3 ":l.s?"mb-3 mt-1 ":"my-4 ")+this.props.group},s.a.createElement("div",{className:"card-body px-4 px-sm-5 py-4"},s.a.createElement("h2",{className:"my-auto mx-2 d-flex align-items-center"},this.state.title?this.state.title:" "),s.a.createElement("hr",{className:"info-hr"}),s.a.createElement("div",{className:"row justify-content-between"},s.a.createElement("div",{className:"col-12 col-md-6 col-lg-7 col-xl-8"},s.a.createElement("div",{className:"info-description my-1 my-sm-0"},"検索結果（",s.a.createElement("b",null,this.state.numOfHit),"件）")),"success"===this.state.status&&s.a.createElement("div",{className:"col-12 col-md-6 col-lg-5 col-xl-4 mt-2 mt-md-0"},l.s?s.a.createElement(p.a,{id:"sortImage",type:"sortImage",sortButtonTitle:this.state.sortButtonTitle,pushHistory:this.props.pushHistory,className:l.t?"mx-auto":"ml-auto",style:l.t?{width:"90%"}:{width:"9rem"}}):s.a.createElement(n.a,{className:l.t?"mx-auto":"ml-auto",type:"images",title:this.state.sortButtonTitle,pushHistory:this.props.pushHistory,style:l.t?{width:"90%"}:{width:"9rem"}})))))))}}t.a=Object(c.o)(h)},158:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var r=o(52),s=o(2),n=o(15),a=o(10),i=o(0),l=o.n(i),c=o(1),u=o.n(c),p=o(55),d=o(5),h=["defaultOpen"],m=function(e){function t(t){var o;return(o=e.call(this,t)||this).state={isOpen:t.defaultOpen||!1},o.toggle=o.toggle.bind(Object(n.a)(o)),o}Object(a.a)(t,e);var o=t.prototype;return o.toggle=function(e){this.setState({isOpen:!this.state.isOpen}),this.props.onToggle&&this.props.onToggle(e,!this.state.isOpen)},o.render=function(){return l.a.createElement(p.a,Object(s.a)({isOpen:this.state.isOpen,toggle:this.toggle},Object(d.p)(this.props,h)))},t}(i.Component);m.propTypes=Object(r.a)({defaultOpen:u.a.bool,onToggle:u.a.func},p.a.propTypes)}}]);