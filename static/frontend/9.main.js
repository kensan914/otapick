(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[9],{

/***/ "./src/components/atoms/OtapickButton.jsx":
/*!************************************************!*\
  !*** ./src/components/atoms/OtapickButton.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _modules_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/env */ \"./src/components/modules/env.js\");\n\n\n\nclass OtapickButton extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  render() {\n    let className = \"\";\n    Object.values(_modules_env__WEBPACK_IMPORTED_MODULE_1__[\"GROUPS\"]).forEach(groupObj => {\n      if (groupObj.key === this.props.group) className = `gradient-btn ${groupObj.key}`;\n    });\n    let otapickButton;\n\n    if (this.props.onClick) {\n      otapickButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: className,\n        onClick: this.props.onClick,\n        style: {\n          width: this.props.width + \"px\"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"b\", null, this.props.title));\n    } else {\n      otapickButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n        href: this.props.href,\n        className: className,\n        style: {\n          width: this.props.width + \"px\"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"b\", null, this.props.title));\n    }\n\n    return otapickButton;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (OtapickButton);\n\n//# sourceURL=webpack:///./src/components/atoms/OtapickButton.jsx?");

/***/ }),

/***/ "./src/components/molecules/DownloadModal.jsx":
/*!****************************************************!*\
  !*** ./src/components/molecules/DownloadModal.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var reactstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! reactstrap */ \"./node_modules/reactstrap/es/index.js\");\n/* harmony import */ var _atoms_OtapickButton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../atoms/OtapickButton */ \"./src/components/atoms/OtapickButton.jsx\");\n\n\n\n\nclass DownloadModal extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false\n    };\n    this.toggleModal = this.toggleModal.bind(this);\n  }\n\n  toggleModal() {\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_1__[\"Modal\"], {\n      isOpen: this.state.modal,\n      toggle: this.toggleModal,\n      className: this.props.className,\n      centered: true\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_1__[\"ModalHeader\"], {\n      toggle: this.toggleModal\n    }, \"\\u4FDD\\u5B58\\u5B8C\\u4E86\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_1__[\"ModalBody\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", null, \"\\u30C0\\u30A6\\u30F3\\u30ED\\u30FC\\u30C9\\u30C0\\u30A4\\u30A2\\u30ED\\u30B0\\u306B\\u3057\\u305F\\u304C\\u3063\\u3066\\u3001\\u753B\\u50CF\\u3092\\u4FDD\\u5B58\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_1__[\"ModalFooter\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"mx-auto\",\n      style: {\n        width: 180\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atoms_OtapickButton__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      group: this.props.group,\n      onClick: () => history.back(),\n      width: 180,\n      title: \"戻る\"\n    }))));\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (DownloadModal);\n\n//# sourceURL=webpack:///./src/components/molecules/DownloadModal.jsx?");

/***/ }),

/***/ "./src/components/molecules/info/BlogSearchListInfo.jsx":
/*!**************************************************************!*\
  !*** ./src/components/molecules/info/BlogSearchListInfo.jsx ***!
  \**************************************************************/
/*! exports provided: BlogSearchListInfo, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlogSearchListInfo\", function() { return BlogSearchListInfo; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _modules_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../modules/utils */ \"./src/components/modules/utils.js\");\n\n\nclass BlogSearchListInfo extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"card otapick-card2 \" + (_modules_utils__WEBPACK_IMPORTED_MODULE_1__[\"isSmp\"] ? \"smp mb-3 \" : _modules_utils__WEBPACK_IMPORTED_MODULE_1__[\"isMobile\"] ? \"mb-3 mt-1 \" : \"my-4 \") + this.props.group\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"card-body px-4 px-sm-5 py-4\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"row mx-2 justify-content-between\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h2\", {\n      className: \"my-auto d-flex align-items-center\"\n    }, !this.props.title ? \"\\u00A0\" : this.props.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"hr\", {\n      className: \"info-hr\"\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"row justify-content-between\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"col-12 col-md-6 col-lg-7 col-xl-8\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"info-description my-1 my-sm-0\"\n    }, \"\\u691C\\u7D22\\u7D50\\u679C\\uFF08\", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"b\", null, this.props.numOfHit), \"\\u4EF6\\uFF09\"))))));\n  }\n\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (BlogSearchListInfo);\n\n//# sourceURL=webpack:///./src/components/molecules/info/BlogSearchListInfo.jsx?");

/***/ }),

/***/ "./src/components/organisms/BlogView.jsx":
/*!***********************************************!*\
  !*** ./src/components/organisms/BlogView.jsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! file-saver */ \"./node_modules/file-saver/dist/FileSaver.min.js\");\n/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _molecules_DownloadModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../molecules/DownloadModal */ \"./src/components/molecules/DownloadModal.jsx\");\n/* harmony import */ var _modules_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/env */ \"./src/components/modules/env.js\");\n/* harmony import */ var react_masonry_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-masonry-component */ \"./node_modules/react-masonry-component/lib/index.js\");\n/* harmony import */ var react_masonry_component__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_masonry_component__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _molecules_ImageCard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../molecules/ImageCard */ \"./src/components/molecules/ImageCard.jsx\");\n/* harmony import */ var _modules_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../modules/utils */ \"./src/components/modules/utils.js\");\n/* harmony import */ var react_cookie__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-cookie */ \"./node_modules/react-cookie/es6/index.js\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/esm/react-router-dom.js\");\n\n\n\n\n\n\n\n\n\n\n\nclass BlogView extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  constructor(props) {\n    super(props);\n\n    this.geneImageID = order => `blog-image-${this.props.groupID}_${this.props.blogCt}_${order}_${this.props.location.key}`;\n\n    this.state = {\n      allCheck: false,\n      check: Array(this.props.images.length).fill(false),\n      showAlert: false\n    };\n    this.modalRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (this.state.check.includes(true)) {\n      let orderList = [];\n\n      for (const [index, val] of this.state.check.entries()) {\n        if (val) orderList.push(index);\n      }\n\n      axios__WEBPACK_IMPORTED_MODULE_1___default.a.post(this.props.blogViewURL, orderList, {\n        headers: {\n          \"X-CSRFToken\": this.props.cookies.get(\"csrftoken\")\n        },\n        responseType: \"blob\"\n      }).then(res => {\n        this.modalRef.current.toggleModal();\n        this.setState({\n          allCheck: false,\n          check: Array(this.props.images.length).fill(false),\n          showAlert: false\n        });\n        const blob = new Blob([res.data], {\n          type: res.data.type\n        });\n        const fileName = res.headers[\"content-disposition\"].match(/filename=\"(.*)\"/)[1];\n        Object(file_saver__WEBPACK_IMPORTED_MODULE_2__[\"saveAs\"])(blob, fileName);\n        this.props.incrementNumOfDownloads(-1, orderList.length);\n      });\n    } else {\n      if (!this.state.showAlert) this.setState({\n        showAlert: true\n      });\n    }\n  }\n\n  handleAllCheckChange(e) {\n    const target = e.target;\n    const value = target.checked;\n    this.setState(function (state) {\n      let check = state.check;\n      return {\n        allCheck: value,\n        check: check.fill(value)\n      };\n    });\n  }\n\n  handleCheckChange(e) {\n    const target = e.target;\n    const value = target.checked;\n    this.setState(function (state) {\n      let check = state.check;\n      check[target.name] = value;\n      return {\n        check: check\n      };\n    });\n  }\n\n  changeCheck(order) {\n    this.setState(function (state) {\n      let check = state.check;\n      check[order] = !check[order];\n      return {\n        check: check\n      };\n    });\n  }\n\n  loadOriginalImage() {\n    let imageObjects = [];\n\n    for (const [index, image] of this.props.images.entries()) {\n      if (this.props.mode === \"view\") {\n        imageObjects.push(new Image());\n        imageObjects[index].onload = setTimeout(() => {\n          const blogImageID = this.geneImageID(image.order);\n          const targetImage = document.getElementById(blogImageID);\n\n          if (targetImage !== null) {\n            if (_modules_utils__WEBPACK_IMPORTED_MODULE_7__[\"isSmp\"]) {\n              targetImage.setAttribute(\"src\", imageObjects[index].src);\n              targetImage.removeAttribute(\"srcset\");\n            } else {\n              targetImage.setAttribute(\"srcset\", `${imageObjects[index].src} 1x, ${imageObjects[index].src} 2x`);\n              targetImage.removeAttribute(\"src\");\n            }\n          }\n        }, _modules_env__WEBPACK_IMPORTED_MODULE_4__[\"DELAY_TIME\"]);\n        imageObjects[index].src = image.src[\"originals\"];\n      } else if (this.props.mode === \"download\") {\n        imageObjects.push(new Image());\n        imageObjects[index].onload = setTimeout(() => {\n          const blogImageID = this.geneImageID(image.order);\n          document.getElementById(blogImageID).style.backgroundImage = \"url(\" + imageObjects[index].src + \")\";\n        }, _modules_env__WEBPACK_IMPORTED_MODULE_4__[\"DELAY_TIME\"]);\n        imageObjects[index].src = image.src[\"originals\"];\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.loadOriginalImage();\n\n    for (const image of this.props.images) {\n      const blogImageID = this.geneImageID(image.order);\n      Object(_modules_utils__WEBPACK_IMPORTED_MODULE_7__[\"addLongPressEventListeners\"])(document.getElementById(blogImageID), () => this.props.putDownload(image.order));\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    // mode が変わったとき\n    if (prevProps.mode !== this.props.mode) {\n      this.loadOriginalImage();\n    }\n  } // cache導入でimageIDが複数存在しうるため（今のところBlogViewはcache対象外であるが）\n\n\n  render() {\n    if (this.props.mode === \"view\") {\n      const options = {\n        itemSelector: \".grid-item\",\n        transitionDuration: 0,\n        stagger: 0\n      };\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"container\"\n      }, _modules_utils__WEBPACK_IMPORTED_MODULE_7__[\"isMobile\"] && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"alert alert-success mb-1\",\n        role: \"alert\",\n        style: {\n          borderRadius: \"1rem\",\n          fontSize: 14\n        }\n      }, \"\\u753B\\u50CF\\u3092\\u9577\\u62BC\\u3057\\u3057\\u3066\\u4FDD\\u5B58\\u3092\\u304A\\u3053\\u306A\\u3063\\u3066\\u304F\\u3060\\u3055\\u3044\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_masonry_component__WEBPACK_IMPORTED_MODULE_5___default.a, {\n        options: options,\n        className: \"mt-3 image-list-in-blog-view\"\n      }, this.props.images.map(({\n        src,\n        url,\n        order,\n        isFavorite\n      }, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: i,\n        className: \"grid-item col-12 col-sm-6 my-2 my-sm-3 px-0 px-sm-2\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_molecules_ImageCard__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n        key: i,\n        groupID: this.props.groupID,\n        group: this.props.group,\n        blogCt: this.props.blogCt,\n        blogTitle: this.props.blogTitle,\n        src: src,\n        url: url,\n        blogUrl: this.props.blogUrl,\n        officialUrl: this.props.officialUrl,\n        writer: this.props.writer,\n        imgID: this.geneImageID(order),\n        order: order,\n        isFavorite: isFavorite\n      })))));\n    } else if (this.props.mode === \"download\") {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"form\", {\n        onSubmit: e => this.handleSubmit(e)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-3 col-lg-2 ml-auto\",\n        style: {\n          width: 200\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"custom-control custom-checkbox\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        name: \"allCheck\",\n        type: \"checkbox\",\n        className: \"custom-control-input\",\n        id: \"allCheck\",\n        checked: this.state.allCheck,\n        onChange: e => this.handleAllCheckChange(e)\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"custom-control-label\",\n        htmlFor: \"allCheck\"\n      }, \"\\u3059\\u3079\\u3066\\u9078\\u629E\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"container my-4\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row text-center\"\n      }, this.props.images.map((image, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: index,\n        className: \"col-6 col-md-4 col-xl-3 mb-5\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        style: {\n          cursor: \"pointer\"\n        },\n        onClick: () => this.changeCheck(image.order)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: this.props.group\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"thumbnail img-thumbnail mx-auto \" + (this.state.check[image.order] ? \"checked\" : \"\"),\n        id: `image_${image.order}`,\n        style: {\n          background: `-webkit-image-set( url(${image.src[\"250x\"]}) 1x, url(${image.src[\"500x\"]}) 2x )`,\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        className: \"save_img_checkbox\",\n        type: \"checkbox\",\n        onChange: e => this.handleCheckChange(e),\n        name: image.order,\n        checked: this.state.check[image.order]\n      })))))))), this.state.showAlert && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"alert alert-danger py-2 mb-5 mt-0\",\n        role: \"alert\",\n        style: {\n          borderRadius: \"1rem\"\n        }\n      }, \"\\u753B\\u50CF\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"mx-auto mb-5\",\n        style: {\n          width: 150\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        type: \"submit\",\n        className: \"gradient-btn \" + this.props.group,\n        style: {\n          width: 150\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"b\", null, \"\\u4FDD\\u5B58\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_molecules_DownloadModal__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n        ref: this.modalRef,\n        group: this.props.group\n      }));\n    }\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_9__[\"withRouter\"])(Object(react_cookie__WEBPACK_IMPORTED_MODULE_8__[\"withCookies\"])(BlogView)));\n\n//# sourceURL=webpack:///./src/components/organisms/BlogView.jsx?");

/***/ }),

/***/ "./src/components/templates/BlogViewTemplate.jsx":
/*!*******************************************************!*\
  !*** ./src/components/templates/BlogViewTemplate.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _molecules_Headline__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../molecules/Headline */ \"./src/components/molecules/Headline.jsx\");\n/* harmony import */ var _modules_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/utils */ \"./src/components/modules/utils.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _molecules_info_BlogViewInfo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../molecules/info/BlogViewInfo */ \"./src/components/molecules/info/BlogViewInfo.jsx\");\n/* harmony import */ var _organisms_BlogView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../organisms/BlogView */ \"./src/components/organisms/BlogView.jsx\");\n/* harmony import */ var _molecules_Loader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../molecules/Loader */ \"./src/components/molecules/Loader.jsx\");\n/* harmony import */ var _modules_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../modules/env */ \"./src/components/modules/env.js\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/esm/react-router-dom.js\");\n/* harmony import */ var _atoms_NotFound__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../atoms/NotFound */ \"./src/components/atoms/NotFound.jsx\");\n/* harmony import */ var _molecules_info_BlogSearchListInfo__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../molecules/info/BlogSearchListInfo */ \"./src/components/molecules/info/BlogSearchListInfo.jsx\");\n/* harmony import */ var _atoms_AdSense__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../atoms/AdSense */ \"./src/components/atoms/AdSense.jsx\");\n/* harmony import */ var _ViewTemplate__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ViewTemplate */ \"./src/components/templates/ViewTemplate.jsx\");\n/* harmony import */ var react_cookie__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-cookie */ \"./node_modules/react-cookie/es6/index.js\");\n/* harmony import */ var _contexts_DomContext__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../contexts/DomContext */ \"./src/components/contexts/DomContext.jsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../contexts/AuthContext */ \"./src/components/contexts/AuthContext.jsx\");\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass BlogViewTemplate extends _ViewTemplate__WEBPACK_IMPORTED_MODULE_12__[\"default\"] {\n  constructor(props) {\n    super(props);\n\n    this.changeMode = mode => {\n      if (mode !== this.state.mode) {\n        if (mode === \"view\" || mode === \"download\") this.setState({\n          mode: mode\n        });else this.setState({\n          mode: \"\"\n        });\n      }\n    };\n\n    this.isRender = Object(_modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"checkMatchParams\"])(props.history, props.match.params.groupID, props.match.params.blogCt);\n    this.initBlogState = {\n      mode: \"view\" // \"view\" or \"download\"\n\n    };\n    this.state = Object.assign(this.initState, this.initBlogState);\n  }\n\n  putView() {\n    axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(this.blogViewURL, {\n      action: \"view\",\n      key: this.state.VIEW_KEY\n    }, {\n      headers: {\n        \"X-CSRFToken\": this.props.cookies.get(\"csrftoken\")\n      }\n    }).then(res => {\n      if (res.data[\"status\"] == \"success\") {\n        this.incrementNumOfViews();\n      }\n    });\n  }\n\n  putDownload(order) {\n    axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(Object(_modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"URLJoin\"])(_modules_env__WEBPACK_IMPORTED_MODULE_7__[\"BASE_URL\"], \"image/\", this.state.groupID, this.state.blogCt, order.toString()), {\n      action: \"download\",\n      key: this.state.DOWNLOAD_KEY\n    }, {\n      headers: {\n        \"X-CSRFToken\": this.props.cookies.get(\"csrftoken\")\n      }\n    }).then(res => {\n      if (res.data[\"status\"] == \"success\") {\n        this.incrementNumOfDownloads();\n      }\n    });\n  }\n\n  updateMetaVerView(status, blogTitle, blogWriter) {\n    if (this.isRender) {\n      if (status === \"success\") {\n        Object(_modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"updateMeta\"])({\n          title: `${blogTitle}(${blogWriter})｜ブログ詳細`,\n          description: `${blogWriter}のブログ「${blogTitle}」です。`\n        });\n      } else if (status === \"get_image_failed\") {\n        Object(_modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"updateMeta\"])({\n          title: \"Not Found Image\",\n          description: \"\"\n        });\n      } else if (status === \"blog_not_found\") {\n        Object(_modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"updateMeta\"])({\n          title: \"Not Found Blog\",\n          description: \"\"\n        });\n      } else if (status === \"accepted\") {\n        Object(_modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"updateMeta\"])({\n          title: \"画像取得中\",\n          description: \"\"\n        });\n      }\n    }\n  }\n\n  componentDidMount() {\n    if (this.isRender) {\n      super.componentDidMount();\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // blog が view されたとき\n    if (prevState.status !== this.state.status && this.state.status === \"success\") {\n      if (this.state.VIEW_KEY) {\n        const blogID = `${this.state.groupID}_${this.state.blogCt}_${this.props.location.key}`;\n\n        if (!this.props.domState.accessedBlogs.includes(blogID)) {\n          this.putView();\n          this.props.domDispatch({\n            type: \"ACCESS_TO_BLOG\",\n            blogID: blogID\n          });\n        }\n      }\n    }\n\n    const groupID = this.props.match.params.groupID;\n    const prevGroupID = prevProps.match.params.groupID;\n    const blogCt = this.props.match.params.blogCt;\n    const prevBlogCt = prevProps.match.params.blogCt; // When the blog changed\n\n    if (prevGroupID !== groupID || prevBlogCt !== blogCt) {\n      this.initBlogState = {\n        mode: \"view\",\n        groupID: groupID,\n        blogCt: blogCt,\n        group: Object(_modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"getGroup\"])(groupID)\n      };\n      this.setState(Object.assign(this.initState, this.initBlogState));\n      this.blogViewURL = Object(_modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"URLJoin\"])(_modules_env__WEBPACK_IMPORTED_MODULE_7__[\"BASE_URL\"], \"blog/\", groupID, blogCt);\n      this.getBlog();\n    } // accepted\n\n\n    super.componentDidUpdate(prevProps, prevState);\n  }\n\n  componentWillUnmount() {\n    super.componentWillUnmount();\n    this.isRender = false;\n  }\n\n  render() {\n    let contents;\n\n    if (this.state.status === \"\") {\n      contents = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_molecules_Loader__WEBPACK_IMPORTED_MODULE_6__[\"LoaderScreen\"], {\n        type: \"horizontal\"\n      });\n    } else if (this.state.status === \"success\") {\n      if (this.state.images.length > 0) {\n        contents = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_organisms_BlogView__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n          group: this.state.group,\n          images: this.state.images,\n          blogViewURL: this.blogViewURL,\n          incrementNumOfDownloads: (order, num) => this.incrementNumOfDownloads(order, num),\n          putDownload: order => this.putDownload(order),\n          mode: this.state.mode,\n          blogUrl: this.state.url,\n          officialUrl: this.state.officialUrl,\n          writer: this.state.writer,\n          blogCt: this.state.blogCt,\n          blogTitle: this.state.title,\n          groupID: this.state.groupID\n        });\n      } else {\n        contents = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atoms_NotFound__WEBPACK_IMPORTED_MODULE_9__[\"NotFoundMessage\"], {\n          type: \"image\",\n          margin: true\n        });\n      }\n    } else if (this.state.status === \"accepted\") {\n      contents = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_molecules_Loader__WEBPACK_IMPORTED_MODULE_6__[\"BlogViewLoader\"], {\n        progress: this.state.progress,\n        loadingImageUrl: _modules_env__WEBPACK_IMPORTED_MODULE_7__[\"LOAD_IMG_URL\"]\n      });\n    } else if (this.state.status === \"blog_not_found\" || this.state.status === \"get_image_failed\") {\n      contents = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atoms_NotFound__WEBPACK_IMPORTED_MODULE_9__[\"NotFoundMessage\"], {\n        type: \"blogFailed\",\n        margin: true\n      });\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, this.isRender && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"container mt-3 text-muted\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_molecules_Headline__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n      title: \"\\u30D6\\u30ED\\u30B0\\u8A73\\u7D30\",\n      type: \"blogView\",\n      mode: this.state.mode,\n      changeMode: mode => this.changeMode(mode)\n    }), this.state.status !== \"blog_not_found\" ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_molecules_info_BlogViewInfo__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n      group: this.state.group,\n      title: this.state.title,\n      writer: this.state.writer,\n      postDate: this.state.postDate,\n      officialUrl: this.state.officialUrl,\n      numOfViews: this.state.numOfViews,\n      numOfDownloads: this.state.numOfDownloads\n    }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_molecules_info_BlogSearchListInfo__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n      group: this.state.group,\n      title: this.state.title,\n      numOfHit: 0\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"container mt-4\"\n    }, _modules_utils__WEBPACK_IMPORTED_MODULE_2__[\"isSmp\"] ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atoms_AdSense__WEBPACK_IMPORTED_MODULE_11__[\"SquareAds\"], null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atoms_AdSense__WEBPACK_IMPORTED_MODULE_11__[\"LandscapeAds\"], {\n      height: \"100px\"\n    })), contents));\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_8__[\"withRouter\"])(Object(react_cookie__WEBPACK_IMPORTED_MODULE_13__[\"withCookies\"])(props => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_contexts_DomContext__WEBPACK_IMPORTED_MODULE_14__[\"DomStateContext\"].Consumer, null, domState => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_contexts_DomContext__WEBPACK_IMPORTED_MODULE_14__[\"DomDispatchContext\"].Consumer, null, domDispatch => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_15__[\"AuthStateContext\"].Consumer, null, authState => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BlogViewTemplate, _extends({}, props, {\n  domState: domState,\n  domDispatch: domDispatch,\n  authState: authState\n}))))))));\n\n//# sourceURL=webpack:///./src/components/templates/BlogViewTemplate.jsx?");

/***/ })

}]);