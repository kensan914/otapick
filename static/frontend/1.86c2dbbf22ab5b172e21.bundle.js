(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./node_modules/file-saver/dist/FileSaver.min.js":function(e,t,s){(function(s){var a,o,i;o=[],void 0===(i="function"==typeof(a=function(){"use strict";function t(e,t,s){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){r(a.response,t,s)},a.onerror=function(){console.error("could not download file")},a.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(s){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof s&&s.global===s?s:void 0,r=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(e,s,r){var n=i.URL||i.webkitURL,l=document.createElement("a");s=s||e.name||"download",l.download=s,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):a(l.href)?t(e,s,r):o(l,l.target="_blank")):(l.href=n.createObjectURL(e),setTimeout((function(){n.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,s,i){if(s=s||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),s);else if(a(e))t(e,s,i);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){o(r)}))}}:function(e,s,a,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,s,a);var r="application/octet-stream"===e.type,n=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&n)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var m=i.URL||i.webkitURL,p=m.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout((function(){m.revokeObjectURL(p)}),4e4)}});i.saveAs=r.saveAs=r,e.exports=r})?a.apply(t,o):a)||(e.exports=i)}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./src/components/atoms/AdSense.jsx":function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return c}));var a=s("./node_modules/react/index.js"),o=s.n(a),i=s("./src/components/modules/env.js"),r=s("./node_modules/react-router-dom/esm/react-router-dom.js");class n extends o.a.Component{constructor(e){super(e),this.DATA_AD_SLOT="",this.key=this.props.location.key}componentDidMount(){i.j||(window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push({}))}}const l=Object(r.withRouter)(class extends n{constructor(e){super(e),this.DATA_AD_SLOT=i.i}render(){return o.a.createElement(o.a.Fragment,null,!i.j&&o.a.createElement("ins",{className:"adsbygoogle "+this.key,style:Object.assign({display:"block"},this.props.height?{height:this.props.height}:{}),"data-ad-client":i.g,"data-ad-slot":this.DATA_AD_SLOT,"data-ad-format":"auto","data-full-width-responsive":"true"}))}}),c=Object(r.withRouter)(class extends n{constructor(e){super(e),this.DATA_AD_SLOT=i.h}render(){return o.a.createElement(o.a.Fragment,null,!i.j&&o.a.createElement("ins",{className:"adsbygoogle "+this.key,style:Object.assign({display:"block"},this.props.height?{height:this.props.height}:{}),"data-ad-client":i.g,"data-ad-slot":this.DATA_AD_SLOT,"data-ad-format":"horizontal","data-full-width-responsive":"false"}))}})},"./src/components/atoms/BackButton.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),o=s.n(a),i=s("./node_modules/react-router/esm/react-router.js"),r=s("./src/components/modules/utils.js"),n=s("./node_modules/reactstrap/es/index.js"),l=s("./node_modules/@fortawesome/react-fontawesome/index.es.js"),c=s("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");class m extends o.a.Component{constructor(...e){var t;return t=super(...e),this.goBack=()=>{r.t===this.props.location.key?this.props.history.push("/"):history.back()},t}render(){return this.props.mini?o.a.createElement(n.a,{className:"rounded-circle transparent-button-mobile "+(r.u?"mobile ":" ")+(this.props.className?this.props.className:""),id:"mobile-back-button",onClick:this.goBack},o.a.createElement(l.a,{icon:c.h})):this.props.fixed?o.a.createElement("button",{onClick:this.goBack,className:"btn btn-light rounded-circle p-0 otapick-back-button-fixed shadow-sm "+(this.props.className?this.props.className:"")},o.a.createElement(l.a,{icon:c.b,style:{color:"gray"}})):o.a.createElement("button",{onClick:this.goBack,className:"btn btn-light rounded-circle p-0 otapick-back-button border shadow-sm "+(this.props.className?this.props.className:"")},o.a.createElement(l.a,{icon:c.b,style:{color:"gray"}}))}}t.a=Object(i.o)(m)},"./src/components/atoms/DownloadButton.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),o=s.n(a),i=s("./node_modules/reactstrap/es/index.js"),r=s("./src/components/modules/env.js"),n=(s("./src/components/modules/utils.js"),s("./src/components/organisms/ImageView.jsx"),s("./node_modules/@fortawesome/react-fontawesome/index.es.js")),l=s("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");t.a=e=>{var t;const{onClick:s,groupId:a,className:c}=e;return o.a.createElement(i.a,{className:"rounded-circle p-0 "+(c||""),title:"この画像をダウンロードする",onClick:s},o.a.createElement(n.a,{icon:l.l,color:null!==(t=r.n[a])&&void 0!==t&&t.deepColor?r.n[a].deepColor:"gray",style:{fontSize:21},className:"download-button-shadow-svg"}))}},"./src/components/atoms/FavoriteButton.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),o=s.n(a),i=s("./node_modules/reactstrap/es/index.js"),r=s("./node_modules/lottie-web/build/player/lottie.js"),n=s.n(r),l=s("./src/components/modules/utils.js"),c=s("./node_modules/react-cookie/es6/index.js"),m=s("./src/components/modules/env.js"),p=s("./src/components/modules/axios.js"),d=s("./src/components/contexts/AuthContext.jsx"),u=s("./node_modules/react-router-dom/esm/react-router-dom.js"),h=s("./src/components/contexts/DomContext.jsx");const g=Object(c.b)(e=>{const{groupID:t,blogCt:s,order:r,isFavorite:c,setIsFavorite:u,group:g,isShowMenu:b,cardHeight:f}=e,[v]=Object(a.useState)(`favoritebutton-${t}-${s}-${r}`),w=Object(a.useRef)(null),E=Object(d.d)(),y=Object(h.d)(),j=Object(l.a)(m.d,"favorites/",t,s,r),{request:x}=Object(p.a)(j,"put",{thenCallback:()=>{u(!0)},catchCallback:e=>{u(!1),409===e.response.status&&"exceed_max_num"===e.response.data.status&&(k(v),y({type:"OPEN_GLOBAL_MODAL",globalModalId:"ExceedMaxFavoriteModal"})),401===e.response.status&&(u(!1),k(v),y({type:"OPEN_GLOBAL_MODAL",globalModalId:"SignUpBeforeFavoriteModal"}))},token:E.token,csrftoken:e.cookies.get("csrftoken")}),{request:O}=Object(p.a)(j,"delete",{thenCallback:()=>{u(!1)},catchCallback:()=>{u(!0)},token:E.token,csrftoken:e.cookies.get("csrftoken")});let N;Object.values(m.n).forEach(e=>{e.key===g&&(N=e.bookmarkAnimationData)}),Object(a.useEffect)(()=>{n.a.loadAnimation({container:w.current,animationData:N,loop:!1,autoplay:!1,name:v}),n.a.setSpeed(1.8,v)},[]);const k=e=>{n.a.goToAndStop(0,!0,e)},_=Object(a.useRef)(!1);Object(a.useEffect)(()=>{var t;c?!_.current&&Object(l.e)(e)&&(t=v,n.a.goToAndStop(1e3,!0,t)):k(v)},[c,e.location]);const I=()=>{c?O():(n.a.play(v),_.current=!0,setTimeout(()=>{_.current=!1},1e3),E.token?x():(u(!1),k(v),y({type:"OPEN_GLOBAL_MODAL",globalModalId:"SignUpBeforeFavoriteModal"})))};if(void 0===b&&void 0===f)return o.a.createElement(i.a,{className:"rounded-circle p-0 image-view-favorite-button "+(l.u?"mobile":""),title:c?"この画像をマイフォルダから削除する":"この画像をマイフォルダに追加する",onClick:I},o.a.createElement("div",{ref:w,className:""+(c?"lottie-favorite-shadow lottie-favorite-image-view":"lottie-favorite-image-view-deactive")}));{const e=f>0&&(c||b);return o.a.createElement(i.a,{className:"rounded-circle p-0 "+(b?"image-card-favorite-button":"image-card-favorite-button-transparent"),title:c?"この画像をマイフォルダから削除する":"この画像をマイフォルダに追加する",onClick:I,style:{display:e?"block":"none"}},o.a.createElement("div",{ref:w,className:""+(c?"lottie-favorite-shadow lottie-favorite":"lottie-favorite-deactive")}))}});t.a=Object(u.withRouter)(g)},"./src/components/atoms/LinkButton.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),o=s.n(a),i=s("./node_modules/react-router-dom/esm/react-router-dom.js"),r=s("./node_modules/reactstrap/es/index.js"),n=s("./src/components/modules/utils.js");t.a=e=>{const{to:t,className:s,style:a,children:l,id:c=Object(n.l)()}=e;return o.a.createElement(i.Link,{to:t,style:{textDecoration:"none"},id:c},o.a.createElement(r.a,{className:s,style:a},l))}},"./src/components/atoms/TooltipComponent.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),o=s.n(a);t.a=e=>{const{children:t,title:s,backgroundColor:i="rgb(50, 50, 50)",placement:r="top"}=e,[n,l]=Object(a.useState)(!1);if(!s)return o.a.createElement(o.a.Fragment,null);const c=e=>o.a.createElement("div",{className:"tooltip-body rounded-pill px-2 py-1 "+e,style:{...i?{background:i}:{}}},s);return o.a.createElement("div",{className:"tooltip-container "+(n?"active":"")},o.a.createElement("span",{className:"tooltip-wrapper"},"top"===r&&c(r),o.a.createElement("div",{onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)}},t),"bottom"===r&&c(r)))}},"./src/components/molecules/Headline.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),o=s.n(a),i=s("./src/components/atoms/BackButton.jsx"),r=s("./node_modules/reactstrap/es/index.js"),n=s("./node_modules/react-router-dom/esm/react-router-dom.js"),l=s("./node_modules/axios/index.js"),c=s.n(l),m=s("./src/components/modules/utils.js"),p=s("./src/components/modules/env.js"),d=s("./src/components/contexts/DomContext.jsx"),u=s("./src/components/atoms/LinkButton.jsx"),h=s("./node_modules/@fortawesome/react-fontawesome/index.es.js"),g=s("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js"),b=s("./src/components/atoms/TooltipComponent.jsx"),f=s("./src/components/contexts/ProfileContext.jsx"),v=s("./src/components/molecules/DropdownMobileFriendly.jsx");function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}class E extends o.a.Component{getChangeTypeUrl(e,t,s){return"blogs"===e?Object(m.a)("/images/",t,s):"images"===e?Object(m.a)("/blogs/",t,s):void 0}render(){const e="blogs"===this.props.type?"画像一覧に切り替えます":"ブログ一覧に切り替えます",t="blogs"===this.props.type?o.a.createElement(h.a,{icon:g.w}):o.a.createElement(h.a,{icon:g.y});return o.a.createElement(b.a,{title:e,placement:"bottom"},o.a.createElement(u.a,{to:this.getChangeTypeUrl(this.props.type,this.props.groupID,this.props.ct),className:"rounded-pill type-change-button ml-1",id:this.props.id},o.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{color:"gray",fontSize:20}},o.a.createElement(h.a,{className:"mr-1 my-0",icon:g.o,style:{fontSize:12}}),t)))}}class y extends o.a.Component{constructor(e){super(e),this.getModeSelectButtonGroup=e=>{const t=({children:e})=>o.a.createElement(r.c,{size:"lg",className:"mt-3 mt-lg-0"},e);if("blogs"===this.props.type||"images"===this.props.type){const s=o.a.createElement(o.a.Fragment,null,o.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("recommend"===this.props.mode?"active":""),onClick:()=>this.props.history.push(`/${this.props.type}/`)},o.a.createElement("b",null,"おすすめ")),Object(m.D)(this.props.profileState.profile.favGroups).map(t=>o.a.createElement(r.a,{key:t.id,className:`rounded-pill mode-select-button ${t.key} `+(e?"fixed ":" ")+(m.u||e?" ":"d-flex align-items-center ")+(this.props.mode===t.key?"active":""),onClick:()=>this.props.history.push(`/${this.props.type}/${t.id}/`)},o.a.createElement("b",null,t.name),t.isActive&&o.a.createElement(v.a,{id:`mode-select-${this.props.type}-${t.key}`,directionOnlyPc:"down",buttonClass:`rounded-circle mode-select-dropdown-button ${e?"fixed p-0":""} ${t.key}`,buttonContainerClass:`mode-select-dropdown-button-super ${e?"fixed":""} btn-group`,dropdownMenuClassOnlyPc:"mode-select-dropdown-menu-members",menuSettings:[..."sakura"===t.key&&this.props.profileState.profile.favMemberSakura||"hinata"===t.key&&this.props.profileState.profile.favMemberHinata?(()=>{let e=[{type:"TITLE",label:"推しメン"}];return["favMemberSakura","favMemberHinata"].forEach(t=>{this.props.profileState.profile[t]&&(e=[...e,{type:"LINK",pathname:`/${this.props.type}/${p.n[this.props.profileState.profile[t].belongingGroup].id}/${this.props.profileState.profile[t].ct}/`,label:this.props.profileState.profile[t].fullKanji}])}),e})():[],...(()=>{let e=[];for(const[s,a]of this.state.membersCollection[t.id].entries())e=[...e,{type:"TITLE",label:s+1+"期生"}],e=[...e,...a.map(({url:e,full_kanji:t})=>({type:"LINK",pathname:e[this.props.type],label:t}))];return e})()]},o.a.createElement(h.a,{icon:g.a})))));return m.u||e?o.a.createElement(o.a.Fragment,null,s):o.a.createElement(t,null,s)}if("blogView"===this.props.type&&!m.u){const s=o.a.createElement(o.a.Fragment,null,o.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("view"===this.props.mode?"active":""),onClick:()=>this.props.changeMode("view")},o.a.createElement("b",null,"閲覧する")),o.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("download"===this.props.mode?"active":""),onClick:()=>this.props.changeMode("download")},o.a.createElement("b",null,"保存する")));return e?o.a.createElement(o.a.Fragment,null,s):o.a.createElement(t,null,s)}if("members"===this.props.type){const t=o.a.createElement(o.a.Fragment,null,Object(m.D)(this.props.profileState.profile.favGroups).map(t=>{if(t.isActive)return o.a.createElement(r.a,{key:t.id,className:`rounded-pill mode-select-button ${t.key} `+(e?"fixed ":" ")+(this.props.group===t.key?"active":""),onClick:()=>this.props.changeGroup(t.key)},o.a.createElement("b",null,t.name))}));return m.u||e?o.a.createElement(o.a.Fragment,null,t):o.a.createElement(r.c,{size:"lg"},t)}},this.getModeSelectButtonGroupVerLeft=e=>{let t;if("home"===this.props.type?t=o.a.createElement(o.a.Fragment,null,o.a.createElement(r.a,{className:"rounded-pill mode-select-button active "+(e?"fixed":""),onClick:()=>this.props.history.push("/")},o.a.createElement("b",null,"ホーム")),o.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+(m.u||e?"":"d-flex align-items-center"),onClick:()=>this.props.history.push("/images/")},o.a.createElement("b",null,"画像一覧"),o.a.createElement(v.a,{id:"mode-select-images-home",directionOnlyPc:"down",buttonClass:"rounded-circle mode-select-dropdown-button "+(e?"fixed p-0":""),buttonContainerClass:`mode-select-dropdown-button-super ${e?"fixed":""} btn-group`,dropdownMenuClassOnlyPc:"mode-select-dropdown-menu",menuSettings:[{type:"TITLE",label:"グループ選択"},...Object(m.D)(this.props.profileState.profile.favGroups).map(e=>({type:"LINK",pathname:`/images/${e.id}/`,label:""+e.name}))]},o.a.createElement(h.a,{icon:g.a}))),o.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+(m.u||e?"":"d-flex align-items-center"),onClick:()=>this.props.history.push("/blogs/")},o.a.createElement("b",null,"ブログ一覧"),o.a.createElement(v.a,{id:"mode-select-images-home",directionOnlyPc:"down",buttonClass:"rounded-circle mode-select-dropdown-button "+(e?"fixed p-0":""),buttonContainerClass:`mode-select-dropdown-button-super ${e?"fixed":""} btn-group`,dropdownMenuClassOnlyPc:"mode-select-dropdown-menu",menuSettings:[{type:"TITLE",label:"グループ選択"},...Object(m.D)(this.props.profileState.profile.favGroups).map(e=>({type:"LINK",pathname:`/blogs/${e.id}/`,label:""+e.name}))]},o.a.createElement(h.a,{icon:g.a})))):"terms"===this.props.type&&(t=o.a.createElement(o.a.Fragment,null,o.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("contact"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/contact/")},o.a.createElement("b",null,this.props.titleHash.contact)),o.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("termsOfService"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/terms-of-service/")},o.a.createElement("b",null,this.props.titleHash.termsOfService)),o.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("privacyPolicy"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/privacy-policy/")},o.a.createElement("b",null,this.props.titleHash.privacyPolicy)))),"home"===this.props.type||"terms"===this.props.type)return m.u||e?o.a.createElement(o.a.Fragment,null,t):o.a.createElement(r.c,{size:"lg",className:"ml-3 my-0"},t)},this.getTypeChangeButton=e=>{let t;if(t=e?"type-change-button-fixed":"type-change-button","blogs"===this.props.type||"images"===this.props.type)return o.a.createElement(E,{id:t,history:this.props.history,type:this.props.type,groupID:this.props.groupID,ct:this.props.ct})},this.initMembers={},Object.values(p.n).forEach(e=>this.initMembers[e.id]=[]),this.state={membersCollection:this.initMembers},this.subNavbarRef=o.a.createRef(),this.initUrl=e.match.url,this.initSearch=e.location.search,e.domDispatch({type:"SET_SUBNAVBAR_REF",subNavbarRef:this.subNavbarRef,locationKey:e.location.key})}componentDidMount(){if("blogs"===this.props.type||"images"===this.props.type){const e=Object(m.a)(p.d,"members/");c.a.get(e).then(e=>{const t=this.initMembers;Object.values(p.n).forEach(s=>{if(s.isActive){t[s.id]=[];for(const a of e.data[s.key])t[s.id].push(a.map(e=>({url:e.url,full_kanji:e.full_kanji})))}}),this.setState({membersCollection:t})}).catch(e=>{console.error(e)}).finally()}}componentDidUpdate(e){Object(m.e)(this.props)&&this.props.match.url===this.initUrl&&this.props.location.search===this.initSearch&&this.props.location.key!==e.location.key&&this.props.domDispatch({type:"SET_SUBNAVBAR_REF",subNavbarRef:this.subNavbarRef,locationKey:this.props.location.key})}render(){const e=this.getTypeChangeButton(!0),t=this.getModeSelectButtonGroupVerLeft(!0),s=this.getModeSelectButtonGroup(!0);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"fixed-headline border-bottom text-muted pl-0 pl-lg-3",style:{top:m.u?p.v:0,height:p.B},ref:this.subNavbarRef},o.a.createElement(i.a,{mini:!0,className:"mr-0 mr-lg-2"}),this.props.title&&(t||s)&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,this.props.title),!m.u&&e,o.a.createElement("div",{className:"vertical-hr "+(m.u?"ml-3":"mx-2")})),this.props.title&&!t&&!s&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,this.props.title),!m.u&&e),o.a.createElement("div",{className:"fixed-headline-contents-wrapper",style:{height:p.B,...m.u?{}:{overflow:"visible"}}},o.a.createElement("div",{className:"fixed-headline-contents-wrapper2",style:{height:p.B}},o.a.createElement("div",{className:"text-muted fixed-headline-contents"},t,s)))),!m.u&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"row justify-content-between mr-0"},o.a.createElement("div",{className:"d-flex align-items-center"},o.a.createElement(i.a,null),this.getModeSelectButtonGroupVerLeft(!1),this.props.title&&o.a.createElement("h3",{className:"ml-3 my-0"},this.props.title),this.getTypeChangeButton(!1)),this.getModeSelectButtonGroup(!1))))}}t.a=Object(n.withRouter)(e=>o.a.createElement(d.a.Consumer,null,t=>o.a.createElement(f.a.Consumer,null,s=>o.a.createElement(y,w({},e,{domDispatch:t,profileState:s})))))},"./src/components/molecules/ImageCard.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),o=s.n(a),i=(s("./node_modules/reactstrap/es/index.js"),s("./node_modules/react-router-dom/esm/react-router-dom.js")),r=s("./src/components/modules/utils.js"),n=s("./src/components/organisms/ImageView.jsx"),l=s("./node_modules/react-cookie/es6/index.js"),c=s("./src/components/modules/env.js"),m=s("./src/components/atoms/FavoriteButton.jsx"),p=s("./src/components/contexts/DomContext.jsx"),d=s("./node_modules/@fortawesome/react-fontawesome/index.es.js"),u=s("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js"),h=s("./src/components/atoms/DownloadButton.jsx"),g=s("./src/components/molecules/DropdownMobileFriendly.jsx");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}class f extends o.a.Component{render(){return o.a.createElement(o.a.Fragment,null,""!=this.props.title&&o.a.createElement(i.Link,{to:this.props.url,className:"btn btn-primary rounded-pill image-to-blog-button image-card-button text-left d-flex align-items-center",role:"button",title:`「${this.props.title}」を確認`},o.a.createElement("h6",{className:"omit-title m-0",style:{fontSize:14}},this.props.title)))}}class v extends o.a.Component{constructor(e){super(e),this.setIsOpenMenu=e=>{r.u||(e&&!this.isHover?this.setState({isOpenMenu:e}):!e&&this.isHover&&(this.state.isOpenDropdownMenu||this.setState({isOpenMenu:e})))},this.hideMenu=()=>{this.isHover||this.setState({isOpenMenu:!1})},this.updateCardHeight=()=>{this.imageCardRef&&Number.isFinite(this.imageCardRef.clientHeight)&&this.imageCardRef.clientHeight>this.state.cardHeight&&this.setState({cardHeight:this.imageCardRef.clientHeight})},this.componentDidMount=()=>{if(this.updateCardHeight(),this.props.domDispatch({type:"INIT_FAVORITE",imageID:this.imageID,isFavorite:this.props.initIsFavorite}),this.shouldPreload){const e=new Image;e.onload=()=>{this.setState({isLoadImage:!0}),this.shouldLoadOriginal&&this.setState({src:this.props.src.originals,srcset:""})},e.src=this.state.src,e.srcset=this.state.srcset}},this.componentDidUpdate=(e,t)=>{console.log("レンダーimageCard"),this.updateCardHeight(),t.isLoadImage!==this.state.isLoadImage&&this.state.isLoadImage&&this.props.didMountImage&&this.props.didMountImage()},this.state={isOpenMenu:!1,cardHeight:0,placeholderCardWidth:0,isLoadImage:!1,src:r.w?this.props.src["250x"]:"",srcset:r.w?"":`${this.props.src["250x"]} 1x, ${this.props.src["500x"]} 2x`,isOpenDropdownMenu:!1},this.isHover=!1,this.imageID=e.imageID,this.setIsFavorite=Object(r.j)({},e.domDispatch,this.imageID).setIsFavorite,this.csrftoken=e.cookies.get("csrftoken"),this.shouldPreload=void 0===this.props.shouldPreload||this.props.shouldPreload,this.shouldLoadOriginal=void 0!==this.props.shouldLoadOriginal&&this.props.shouldLoadOriginal}render(){const e=this.state.isOpenMenu&&!r.u,t=this.state.cardHeight>100,s=Number.isFinite(this.props.width)&&this.props.width>0?this.props.width:250,a=Number.isFinite(this.props.height)&&this.props.height>0?this.props.height:250;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"image-card",onMouseEnter:()=>{this.setIsOpenMenu(!0),this.isHover=!0},onMouseLeave:()=>{this.setIsOpenMenu(!1),this.isHover=!1}},o.a.createElement(i.Link,{to:{pathname:this.props.url,state:{prevSrc:this.props.src}}},o.a.createElement("div",{className:"image-card-wrapper "+(r.u?"":"pc")},!this.shouldPreload||this.state.isLoadImage?o.a.createElement("div",{ref:e=>this.imageCardRef=e},o.a.createElement("img",{width:s,height:a,className:"image-card-img "+(this.props.orderly?"newpost-thumbnail":""),src:this.state.src,srcSet:this.state.srcset,alt:Object(r.k)(this.props.group,this.props.writer.name),id:this.props.imgID||this.imageID})):o.a.createElement("div",{className:"image-card-preload-img-wrapper loading-background"},o.a.createElement("div",{className:"image-card-preload-img",style:{paddingTop:a/s*100+"%"}})))),this.state.isLoadImage&&o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{group:this.props.group,groupID:this.props.groupID,blogCt:this.props.blogCt,order:this.props.order,isFavorite:this.props.isFavorite,setIsFavorite:this.setIsFavorite,isShowMenu:e,cardHeight:this.state.cardHeight}),e&&t&&o.a.createElement(h.a,{className:"image-card-download-button-ver2",groupId:this.props.groupID,onClick:()=>{Object(n.b)(Object(r.a)(c.d,this.props.url),this.csrftoken)}}),e&&o.a.createElement(o.a.Fragment,null,o.a.createElement(f,{url:this.props.blogUrl,title:this.props.blogTitle}),o.a.createElement(g.a,{id:"image-card-detail-button-"+this.props.imageID,buttonClass:"p-0 image-card-detail-button image-card-button rounded-circle",buttonContainerClass:"image-card-detail-button-super text-center",onToggleWork:e=>{e&&this.hideMenu(),this.setState({isOpenDropdownMenu:!e})},menuSettings:[{type:"ONCLICK",label:"この画像をダウンロードする",onClick:()=>{Object(n.b)(Object(r.a)(c.d,this.props.url),this.csrftoken)},icon:u.l},{type:"ANCHOR",href:this.props.officialUrl,targetBlank:!0,label:"公式ブログで確認",icon:u.p},{type:"LINK",pathname:this.props.writer.url.images,label:`「${this.props.writer.name}」の画像を探す`,icon:u.w},{type:"LINK",pathname:this.props.writer.url.blogs,label:`「${this.props.writer.name}」のブログを探す`,icon:u.y}]},o.a.createElement(d.a,{icon:u.c}))))),(this.props.message||r.u)&&o.a.createElement("div",{className:"image-card-footer"},o.a.createElement("div",{className:"image-card-message "+(r.u?"mobile":"")},this.props.message&&o.a.createElement(i.Link,{to:{pathname:this.props.url,state:{prevSrc:this.props.src}},onMouseEnter:()=>{this.setIsOpenMenu(!0),this.isHover=!0},onMouseLeave:()=>{this.setIsOpenMenu(!1),this.isHover=!1},style:{textDecoration:"none"}},o.a.createElement("div",{className:"card-message mx-auto py-2 "+(r.u?"":"pc")},o.a.createElement(d.a,{icon:u.k,style:{color:"gold"}})," ",o.a.createElement("b",null,this.props.message)))),r.u&&o.a.createElement(g.a,{id:"image-card-detail-button-mobile-"+this.props.imageID,buttonClass:"rounded-circle transparent-button-mobile ml-auto",menuSettings:[{type:"TITLE",label:`${this.props.blogTitle}（${this.props.writer.name}）`},{type:"LINK",pathname:this.props.url,state:{prevSrc:this.props.src},label:"詳細ページへ",icon:u.f},{type:"ANCHOR",href:this.props.officialUrl,targetBlank:!0,label:"公式ブログで確認",icon:u.p},{type:"LINK",pathname:this.props.writer.url.images,label:`「${this.props.writer.name}」の画像を探す`,icon:u.w},{type:"LINK",pathname:this.props.writer.url.blogs,label:`「${this.props.writer.name}」のブログを探す`,icon:u.y}]},o.a.createElement(d.a,{icon:u.m}))))}}t.a=(()=>{const e=o.a.memo(Object(l.b)(v));return t=>{const s=`${t.groupID}_${t.blogCt}_${t.order}`;return o.a.createElement(p.b.Consumer,null,a=>o.a.createElement(p.a.Consumer,null,i=>o.a.createElement(e,b({},t,{orderly:!1,imageID:s,initIsFavorite:t.isFavorite,isFavorite:a.favoriteState[s],domDispatch:i}))))}})()},"./src/components/organisms/ImageView.jsx":function(e,t,s){"use strict";s.d(t,"b",(function(){return x}));var a=s("./node_modules/react/index.js"),o=s.n(a),i=s("./node_modules/axios/index.js"),r=s.n(i),n=s("./node_modules/file-saver/dist/FileSaver.min.js"),l=s("./src/components/modules/env.js"),c=s("./src/components/modules/utils.js"),m=s("./node_modules/react-router-dom/esm/react-router-dom.js"),p=s("./node_modules/@fortawesome/react-fontawesome/index.es.js"),d=s("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js"),u=s("./src/components/molecules/DropdownMobileFriendly.jsx");class h extends o.a.Component{render(){return o.a.createElement("div",{className:"rounded-pill d-flex writer-card p-1 align-items-center border shadow-sm",onClick:()=>this.props.history.push(this.props.writer.url.images)},o.a.createElement("img",{className:"rounded-circle writer-card-image",src:this.props.writer.image,alt:this.props.writer.name}),o.a.createElement("h6",{className:"mx-2 mb-0"},this.props.writer.name),o.a.createElement(u.a,{id:"writer-card-menu",buttonClass:"p-0 writer-card-detail-button rounded-circle",menuSettings:[...c.u?[{type:"TITLE",label:this.props.writer.name}]:[],{type:"LINK",pathname:this.props.writer.url.images,label:"画像一覧へ",icon:d.w},{type:"LINK",pathname:this.props.writer.url.blogs,label:"ブログ一覧へ",icon:d.y},this.props.writer.graduate?{}:{type:"ANCHOR",href:this.props.writer.official_url,targetBlank:!0,label:"公式ブログで確認",icon:d.p}]},o.a.createElement(p.a,{icon:d.a})))}}var g=Object(m.withRouter)(h),b=s("./src/components/molecules/Loader.jsx"),f=s("./src/components/atoms/NotFound.jsx"),v=s("./src/components/templates/ViewTemplate.jsx"),w=s("./node_modules/react-cookie/es6/index.js"),E=s("./src/components/atoms/FavoriteButton.jsx"),y=s("./src/components/atoms/TooltipComponent.jsx"),j=s("./src/components/atoms/DownloadButton.jsx");const x=(e,t,s=null,a)=>{r.a.post(e,{},{headers:{"X-CSRFToken":t},responseType:"blob"}).then(e=>{const t=new Blob([e.data],{type:e.data.type}),o=e.headers["content-disposition"].match(/filename="(.*)"/)[1];Object(n.saveAs)(t,o),null!==s&&s(a)})};class O extends v.a{constructor(e){super(e),this.imageViewURL=this.props.imageViewURL,this.blogViewURL=this.props.blogViewURL,this.mainImageID=`main-image-${this.props.groupID}_${this.props.blogCt}_${this.props.order}_${this.props.location.key}`,this.prevSrc=this.props.prevSrc,this.imageID=`${e.groupID}_${e.blogCt}_${e.order}`;const t=Object(c.j)(e.domState.favoriteState,e.domDispatch,this.imageID);this.getIsFavorite=t.getIsFavorite,this.setIsFavorite=t.setIsFavorite,this.csrftoken=this.props.cookies.get("csrftoken")}putView(){r.a.put(this.imageViewURL,{action:"view",key:this.state.VIEW_KEY},{headers:{"X-CSRFToken":this.csrftoken}}).then(e=>{"success"==e.data.status&&this.incrementNumOfViews(this.props.order)})}putDownload(){r.a.put(this.imageViewURL,{action:"download",key:this.state.DOWNLOAD_KEY},{headers:{"X-CSRFToken":this.csrftoken}}).then(e=>{"success"==e.data.status&&this.incrementNumOfDownloads(this.props.order)})}updateMetaVerView(e,t,s){"success"===e?Object(c.H)({title:`${t}(${s})｜画像詳細`,description:`${s}のブログ「${t}」の画像です。`}):"get_image_failed"===e?Object(c.H)({title:"Not Found Image",description:""}):"blog_not_found"===e?Object(c.H)({title:"Not Found Blog",description:""}):"accepted"===e&&Object(c.H)({title:"画像取得中",description:""})}componentDidUpdate(e,t){if(Object(c.e)(this.props)){if(t.status!==this.state.status&&"success"===this.state.status){if(this.state.VIEW_KEY){const e=`${this.props.groupID}_${this.props.blogCt}_${this.props.order}_${this.props.location.key}`;this.props.domState.accessedImages.includes(e)||(this.putView(),this.props.domDispatch({type:"ACCESS_TO_IMAGE",imageID:e}))}const e=document.getElementById(this.mainImageID);Object(c.b)(e,()=>this.putDownload());let t=new Image;t.onload=setTimeout(()=>{null!==e&&(e.removeAttribute("srcset"),e.setAttribute("src",t.src))},l.k);const s=this.state.images[this.props.order];t.src=s.src.originals,this.props.domDispatch({type:"INIT_FAVORITE",imageID:this.imageID,isFavorite:this.state.images[this.props.order].isFavorite})}e.blogViewURL===this.props.blogViewURL&&e.imageViewURL===this.props.imageViewURL||(this.blogViewURL=this.props.blogViewURL,this.imageViewURL=this.props.imageViewURL),this.props.location!==e.location&&this.updateMetaVerView(this.state.status,this.state.title,this.state.writer.name),super.componentDidUpdate(e,t)}}render(){let e,t,s,a;if(""===this.state.status)t=o.a.createElement(b.b,null);else if("accepted"===this.state.status)e=o.a.createElement(b.a,{progress:this.state.progress,loadingImageUrl:l.q});else if("blog_not_found"===this.state.status)e=o.a.createElement("div",{className:"py-0 py-sm-5"},o.a.createElement(f.c,{type:"blogFailed",margin:!0}));else if("get_image_failed"===this.state.status)e=o.a.createElement("div",{className:"py-0 py-sm-5"},o.a.createElement(f.c,{type:"imageFailed",margin:!0}));else if("success"===this.state.status){const e=this.state.images[this.props.order];t=o.a.createElement("div",{className:"ml-1 ml-sm-3 ml-lg-4 image-view-text"},o.a.createElement("div",{className:"d-flex justify-content-between mt-1 mt-sm-3 mt-lg-2 mb-2 image-view-header"},o.a.createElement("div",{className:"d-flex align-items-center p-0"},o.a.createElement(y.a,{title:"この画像の閲覧数"},o.a.createElement("div",{id:"num-of-image-views-icon"},o.a.createElement(p.a,{icon:d.q,style:{color:"gray"}})))," ",e?e.numOfViews:0,o.a.createElement(y.a,{title:"この画像のダウンロード数"},o.a.createElement("div",{className:"ml-3",id:"num-of-image-downloads-icon"},o.a.createElement(p.a,{icon:d.l,style:{color:"gray"}})))," ",e?e.numOfDownloads:0),o.a.createElement("div",{className:"d-flex justify-content-end"},o.a.createElement(E.a,{group:this.props.group,groupID:this.props.groupID,blogCt:this.props.blogCt,order:this.props.order,isFavorite:this.getIsFavorite(),setIsFavorite:this.setIsFavorite}),!c.u&&o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{title:"この画像をダウンロード"},o.a.createElement(j.a,{className:"image-view-download-button-v2",groupId:this.props.groupID,onClick:()=>{e&&x(Object(c.a)(l.d,e.url),this.csrftoken,this.incrementNumOfDownloads,this.props.order)}}))))),o.a.createElement("div",null,o.a.createElement("hr",{className:"mt-2 mt-lg-3 mb-4 mr-3"})),o.a.createElement("div",{className:"image-view-body"},o.a.createElement("div",{className:"d-flex mb-3"},o.a.createElement(y.a,{title:"掲載ブログ"},o.a.createElement(p.a,{className:"mr-3",icon:d.x,id:"image-view-blog-icon"})),o.a.createElement(m.Link,{to:this.state.url,className:"image-view-blog-title"},this.state.title.length>50||c.w?this.state.title.length>0?o.a.createElement("h3",{className:"smaller"},this.state.title):o.a.createElement("h3",{className:"smaller"}," "):this.state.title.length>0?o.a.createElement("h3",null,this.state.title):o.a.createElement("h3",null," "))),o.a.createElement("div",{className:"d-flex align-items-center"},o.a.createElement(y.a,{title:"ブログを書いたメンバー"},o.a.createElement(p.a,{className:"mr-3",icon:d.z,id:"image-view-writer-icon"})),o.a.createElement(g,{writer:this.state.writer}))),o.a.createElement("div",{className:"image-view-footer mt-4 mt-sm-5 mt-lg-2 mb-2"},o.a.createElement("div",{className:"image-view-to-official-button-wrapper"},o.a.createElement(y.a,{title:"公式ブログで確認"},o.a.createElement("a",{className:"btn btn-primary rounded-pill image-view-to-official-button py-0 "+(c.w?"px-2":""),id:"image-view-to-official-button",role:"button",target:"_blank",rel:"noreferrer",href:this.state.officialUrl},o.a.createElement("h6",{className:"omit-title m-0 image-view-to-official-title"},o.a.createElement(p.a,{icon:d.p})," ",this.props.group+"zaka46.com")))),o.a.createElement(u.a,{id:"image-view-card-menu",buttonClass:"p-0 image-view-detail-button rounded-circle",menuSettings:[...c.u?[{type:"TITLE",label:`${this.state.title}（${this.state.writer.name}）`},{type:"LINK",pathname:this.state.url,label:"掲載ブログを確認",icon:d.x}]:[{type:"ONCLICK",label:"この画像をダウンロードする",onClick:()=>{x(Object(c.a)(l.d,e.url),this.csrftoken,this.incrementNumOfDownloads,this.props.order)},icon:d.l}],{type:"ANCHOR",href:this.state.officialUrl,targetBlank:!0,label:"公式ブログで確認",icon:d.p},{type:"LINK",pathname:this.state.writer.url.images,label:`「${this.state.writer.name}」の画像を探す`,icon:d.w},{type:"LINK",pathname:this.state.writer.url.blogs,label:`「${this.state.writer.name}」のブログを探す`,icon:d.y}]},o.a.createElement(p.a,{icon:d.c})))),s=Object(c.k)(this.props.group,this.state.writer.name)}if(this.prevSrc)a=this.prevSrc["250x"];else if("success"===this.state.status){a=this.state.images[this.props.order].src["250x"]}else a=null;if(c.w)e=o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{className:"image-of-image-view smp",src:a,id:this.mainImageID,alt:s}),o.a.createElement("div",{className:"container mt-3 text-muted"},o.a.createElement("div",{className:"alert alert-success",role:"alert",style:{borderRadius:"1rem",fontSize:14}},"画像を長押しして保存をおこなってください"),o.a.createElement("div",{className:"card otapick-card2 mx-auto image-view smp "+this.props.group},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"p-0"},t)))));else{let i;if(this.prevSrc)i=`${this.prevSrc["250x"]} 1x, ${this.prevSrc["500x"]} 2x`;else if("success"===this.state.status){const e=this.state.images[this.props.order];i=`${e.src["250x"]} 1x, ${e.src["500x"]} 2x`}else i=null;e=o.a.createElement("div",{className:"card otapick-card2 mx-auto image-view "+(c.u?"mb-3 mt-1 ":"my-4 ")+this.props.group},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row m-0"},o.a.createElement("div",{className:"col-12 col-lg-6 p-0"},o.a.createElement("img",{className:"image-of-image-view",src:a,id:this.mainImageID,srcSet:i,alt:s,onContextMenu:e=>c.u?"":e.preventDefault(),onMouseDown:e=>c.u?"":e.preventDefault()})),o.a.createElement("div",{className:"col-12 col-lg-6 p-0"},t))))}return o.a.createElement(o.a.Fragment,null,c.w?o.a.createElement("div",null,e):o.a.createElement("div",{className:"container mt-3 text-muted"},e))}}t.a=Object(m.withRouter)(Object(w.b)(O))},"./src/components/templates/ViewTemplate.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),o=s.n(a),i=s("./node_modules/axios/index.js"),r=s.n(i),n=s("./src/components/modules/utils.js"),l=s("./src/components/modules/env.js");class c extends o.a.Component{constructor(e){super(e);const t=e.match.params.groupID,s=e.match.params.blogCt;this.initState={group:Object(n.o)(t),groupID:t,blogCt:s,title:"",postDate:"",writer:{},numOfViews:0,numOfDownloads:0,officialUrl:"",url:"",images:[],status:"",progress:0,loadingImageUrl:"",VIEW_KEY:"",DOWNLOAD_KEY:""},this.state=this.initState,this.blogViewURL=Object(n.a)(l.d,"blog/",this.state.groupID,this.state.blogCt),this.incrementNumOfViews=this.incrementNumOfViews.bind(this),this.incrementNumOfDownloads=this.incrementNumOfDownloads.bind(this)}getBlog(){setTimeout(()=>{r.a.get(this.blogViewURL).then(e=>{let t={};this.state.status||"blog_not_found"===e.data.status||(t={title:e.data.title,postDate:e.data.post_date,writer:e.data.writer,numOfViews:e.data.num_of_views,numOfDownloads:e.data.num_of_downloads,officialUrl:e.data.official_url,url:e.data.url}),"success"===e.data.status?void 0!==this.props.order&&e.data.images.length<=this.props.order?(this.setState(Object.assign({status:"get_image_failed"},t)),this.updateMetaVerView("get_image_failed")):(this.setState(Object.assign({images:e.data.images.map(e=>Object(n.f)(e)),status:"success",VIEW_KEY:e.data.VIEW_KEY,DOWNLOAD_KEY:e.data.DOWNLOAD_KEY},t)),this.updateMetaVerView("success",t.title,t.writer.name)):"start_download"===e.data.status||"downloading"===e.data.status?(this.setState(Object.assign({progress:e.data.progress,loadingImageUrl:e.data.loading_image,status:"accepted"},t)),this.updateMetaVerView("accepted")):"blog_not_found"===e.data.status?(this.setState({status:"blog_not_found",title:"ブログが見つかりませんでした。"}),this.updateMetaVerView("blog_not_found")):"get_image_failed"===e.data.status&&(this.setState(Object.assign({status:"get_image_failed"},t)),this.updateMetaVerView("get_image_failed"))}).catch(e=>{console.error(e)}).finally(()=>{Object(n.s)(this.props.location.pathname)})},l.k)}incrementNumOfViews(e=-1){e<0?this.setState(e=>({numOfViews:e.numOfViews+1})):this.setState(t=>{let s=t.images;return s.length>e&&(s[Number(e)].numOfViews+=1),{images:s}})}incrementNumOfDownloads(e=-1,t=1){e<0?this.setState(e=>({numOfDownloads:e.numOfDownloads+t})):this.setState(s=>{let a=s.images;return a.length>e&&(a[Number(e)].numOfDownloads+=t),{images:a}})}componentDidMount(){this.getBlog()}componentDidUpdate(e,t){t.status!==this.state.status&&"accepted"===this.state.status&&(this.reqCount=0,this.intervalReqID=setInterval(()=>{this.reqCount++<=20?this.getBlog():(this.setState({status:"get_image_failed"}),clearInterval(this.intervalReqID))},1e3)),t.status!==this.state.status&&"accepted"===t.status&&clearInterval(this.intervalReqID)}componentWillUnmount(){clearInterval(this.intervalReqID)}}t.a=c}}]);