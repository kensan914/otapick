(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./node_modules/file-saver/dist/FileSaver.min.js":function(e,t,a){(function(a){var o,n,s;n=[],void 0===(s="function"==typeof(o=function(){"use strict";function t(e,t,a){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){r(o.response,t,a)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,r=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype?function(e,a,r){var l=s.URL||s.webkitURL,i=document.createElement("a");a=a||e.name||"download",i.download=a,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?n(i):o(i.href)?t(e,a,r):n(i,i.target="_blank")):(i.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(i.href)}),4e4),setTimeout((function(){n(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,s){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,s),a);else if(o(e))t(e,a,s);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){n(r)}))}}:function(e,a,o,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return t(e,a,o);var r="application/octet-stream"===e.type,l=/constructor/i.test(s.HTMLElement)||s.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||r&&l)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},c.readAsDataURL(e)}else{var m=s.URL||s.webkitURL,d=m.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout((function(){m.revokeObjectURL(d)}),4e4)}});s.saveAs=r.saveAs=r,e.exports=r})?o.apply(t,n):o)||(e.exports=s)}).call(this,a("./node_modules/webpack/buildin/global.js"))},"./src/components/atoms/BackButton.jsx":function(e,t,a){"use strict";var o=a("./node_modules/react/index.js"),n=a.n(o),s=a("./node_modules/react-router/esm/react-router.js"),r=a("./src/components/modules/utils.js"),l=a("./node_modules/reactstrap/es/index.js"),i=a("./node_modules/@fortawesome/react-fontawesome/index.es.js"),c=a("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");class m extends n.a.Component{constructor(...e){var t;return t=super(...e),this.goBack=()=>{r.t===this.props.location.key?this.props.history.push("/"):history.back()},t}render(){return this.props.mini?n.a.createElement(l.a,{className:"rounded-circle transparent-button-mobile "+(r.u?"mobile ":" ")+(this.props.className?this.props.className:""),id:"mobile-back-button",onClick:this.goBack},n.a.createElement(i.a,{icon:c.h})):this.props.fixed?n.a.createElement("button",{onClick:this.goBack,className:"btn btn-light rounded-circle p-0 otapick-back-button-fixed shadow-sm "+(this.props.className?this.props.className:"")},n.a.createElement(i.a,{icon:c.b,style:{color:"gray"}})):n.a.createElement("button",{onClick:this.goBack,className:"btn btn-light rounded-circle p-0 otapick-back-button border shadow-sm "+(this.props.className?this.props.className:"")},n.a.createElement(i.a,{icon:c.b,style:{color:"gray"}}))}}t.a=Object(s.o)(m)},"./src/components/atoms/DownloadButton.jsx":function(e,t,a){"use strict";var o=a("./node_modules/react/index.js"),n=a.n(o),s=a("./node_modules/reactstrap/es/index.js"),r=a("./src/components/modules/env.js"),l=(a("./src/components/modules/utils.js"),a("./src/components/organisms/ImageView.jsx"),a("./node_modules/@fortawesome/react-fontawesome/index.es.js")),i=a("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");t.a=e=>{var t;const{onClick:a,groupId:o,className:c}=e;return n.a.createElement(s.a,{className:"rounded-circle p-0 "+(c||""),title:"この画像をダウンロードする",onClick:a},n.a.createElement(l.a,{icon:i.l,color:null!==(t=r.m[o])&&void 0!==t&&t.deepColor?r.m[o].deepColor:"gray",style:{fontSize:21},className:"download-button-shadow-svg"}))}},"./src/components/atoms/FavoriteButton.jsx":function(e,t,a){"use strict";a.d(t,"b",(function(){return b}));var o=a("./node_modules/react/index.js"),n=a.n(o),s=a("./node_modules/reactstrap/es/index.js"),r=a("./node_modules/lottie-web/build/player/lottie.js"),l=a.n(r),i=a("./src/components/modules/utils.js"),c=a("./src/components/modules/env.js"),m=a("./src/components/modules/axios.js"),d=a("./src/components/contexts/AuthContext.jsx"),u=a("./src/components/contexts/DomContext.jsx"),p=a("./src/components/modules/cacheRoute.jsx");const b=(e,t,a,n,s,r,b)=>{const[f]=Object(o.useState)(Object(i.m)()),g=Object(d.d)(),h=Object(u.d)(),{cacheRoute:v}=Object(p.a)(),E=Object(o.useRef)(!1),y=Object(i.a)(c.b,"favorites/",e,t,a),{request:w}=Object(m.a)(y,"put",{thenCallback:()=>{n(!0)},catchCallback:e=>{n(!1),409===e.response.status&&"exceed_max_num"===e.response.data.status&&(x(f),b&&b(),h({type:"OPEN_GLOBAL_MODAL",globalModalId:"ExceedMaxFavoriteModal"})),401===e.response.status&&(n(!1),x(f),b&&b(),h({type:"OPEN_GLOBAL_MODAL",globalModalId:"SignUpBeforeFavoriteModal"}))},token:g.token,csrftoken:r}),{request:j}=Object(m.a)(y,"delete",{thenCallback:()=>{n(!1)},catchCallback:()=>{n(!0)},token:g.token,csrftoken:r}),x=e=>{l.a.goToAndStop(0,!0,e)};Object(o.useEffect)(()=>{var e;v||(s?E.current||(e=f,l.a.goToAndStop(1e3,!0,e)):x(f))},[s,v]);return[()=>{s?j():(l.a.play(f),E.current=!0,setTimeout(()=>{E.current=!1},1e3),w())},f]},f=(e,t)=>{const{isFavorite:a,groupKey:r,lottieName:m,isShowMenu:d,cardHeight:u,type:p,onClickFavoriteButton:b}=e,f=Object(o.useRef)(null);let g;Object.values(c.m).forEach(e=>{e.key===r&&(g=e.bookmarkAnimationData)}),Object(o.useEffect)(()=>{f.current&&(l.a.loadAnimation({container:f.current,animationData:g,loop:!1,autoplay:!1,name:m}),l.a.setSpeed(1.8,m),a&&l.a.goToAndStop(1e3,!0,m))},[]);const h=a?"マイフォルダから削除する":"マイフォルダに追加する";if("image-card-detail-menu"===p)return n.a.createElement(s.a,{className:"px-0 d-flex flex-row align-items-center image-card-detail-menu-favorite-button text-muted",title:h,onClick:b},n.a.createElement("div",{ref:f,className:"ml-1 mr-3 mb-0 "+(a?"lottie-favorite-shadow lottie-favorite-image-view image-card-detail-menu-favorite":"lottie-favorite-image-view-deactive image-card-detail-menu-favorite")}),n.a.createElement("b",null,h));if("image-view"===p)return n.a.createElement(s.a,{className:"rounded-circle p-0 image-view-favorite-button "+(i.u?"mobile":""),title:h,onClick:b},n.a.createElement("div",{ref:f,className:""+(a?"lottie-favorite-shadow lottie-favorite-image-view":"lottie-favorite-image-view-deactive")}));if("image-card"===p){const e=u>0&&(a||d);return n.a.createElement(s.a,{className:`rounded-circle p-0 ${i.w?"smp":""} ${d?"image-card-favorite-button":"image-card-favorite-button-transparent"}`,title:h,onClick:b,style:{display:e?"block":"none"}},n.a.createElement("div",{ref:f,className:""+(a?"lottie-favorite-shadow lottie-favorite":"lottie-favorite-deactive")}))}};t.a=n.a.forwardRef(f)},"./src/components/atoms/LinkButton.jsx":function(e,t,a){"use strict";var o=a("./node_modules/react/index.js"),n=a.n(o),s=a("./node_modules/react-router-dom/esm/react-router-dom.js"),r=a("./node_modules/reactstrap/es/index.js"),l=a("./src/components/modules/utils.js");t.a=e=>{const{to:t,className:a,style:o,children:i,id:c=Object(l.l)()}=e;return n.a.createElement(s.Link,{to:t,style:{textDecoration:"none"},id:c},n.a.createElement(r.a,{className:a,style:o},i))}},"./src/components/atoms/TooltipComponent.jsx":function(e,t,a){"use strict";var o=a("./node_modules/react/index.js"),n=a.n(o);t.a=e=>{const{children:t,title:a,backgroundColor:s="rgb(50, 50, 50)",placement:r="top"}=e,[l,i]=Object(o.useState)(!1);if(!a)return n.a.createElement(n.a.Fragment,null);const c=e=>n.a.createElement("div",{className:"tooltip-body rounded-pill px-2 py-1 "+e,style:{...s?{background:s}:{}}},a);return n.a.createElement("div",{className:"tooltip-container "+(l?"active":"")},n.a.createElement("span",{className:"tooltip-wrapper"},"top"===r&&c(r),n.a.createElement("div",{onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)}},t),"bottom"===r&&c(r)))}},"./src/components/molecules/Headline.jsx":function(e,t,a){"use strict";var o=a("./node_modules/react/index.js"),n=a.n(o),s=a("./src/components/atoms/BackButton.jsx"),r=a("./node_modules/reactstrap/es/index.js"),l=a("./node_modules/react-router-dom/esm/react-router-dom.js"),i=a("./node_modules/axios/index.js"),c=a.n(i),m=a("./src/components/modules/utils.js"),d=a("./src/components/modules/env.js"),u=a("./src/components/contexts/DomContext.jsx"),p=a("./src/components/atoms/LinkButton.jsx"),b=a("./node_modules/@fortawesome/react-fontawesome/index.es.js"),f=a("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js"),g=a("./src/components/atoms/TooltipComponent.jsx"),h=a("./src/components/contexts/ProfileContext.jsx"),v=a("./src/components/molecules/DropdownMobileFriendly.jsx");function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}class y extends n.a.Component{getChangeTypeUrl(e,t,a){return"blogs"===e?Object(m.a)("/images/",t,a):"images"===e?Object(m.a)("/blogs/",t,a):void 0}render(){const e="blogs"===this.props.type?"画像一覧に切り替えます":"ブログ一覧に切り替えます",t="blogs"===this.props.type?n.a.createElement(b.a,{icon:f.w}):n.a.createElement(b.a,{icon:f.y});return n.a.createElement(g.a,{title:e,placement:"bottom"},n.a.createElement(p.a,{to:this.getChangeTypeUrl(this.props.type,this.props.groupID,this.props.ct),className:"rounded-pill type-change-button ml-1",id:this.props.id},n.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{color:"gray",fontSize:20}},n.a.createElement(b.a,{className:"mr-1 my-0",icon:f.o,style:{fontSize:12}}),t)))}}class w extends n.a.Component{constructor(e){super(e),this.getModeSelectButtonGroup=e=>{const t=({children:e})=>n.a.createElement(r.c,{size:"lg",className:"mt-3 mt-lg-0"},e);if("blogs"===this.props.type||"images"===this.props.type){const a=n.a.createElement(n.a.Fragment,null,n.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("recommend"===this.props.mode?"active":""),onClick:()=>this.props.history.push(`/${this.props.type}/`)},n.a.createElement("b",null,"おすすめ")),Object(m.D)(this.props.profileState.profile.favGroups).map(t=>n.a.createElement(r.a,{key:t.id,className:`rounded-pill mode-select-button ${t.key} `+(e?"fixed ":" ")+(m.u||e?" ":"d-flex align-items-center ")+(this.props.mode===t.key?"active":""),onClick:()=>this.props.history.push(`/${this.props.type}/${t.id}/`)},n.a.createElement("b",null,t.name),t.isActive&&n.a.createElement(v.a,{id:`mode-select-${this.props.type}-${t.key}`,directionOnlyPc:"down",buttonClass:`rounded-circle mode-select-dropdown-button ${e?"fixed p-0":""} ${t.key}`,buttonContainerClass:`mode-select-dropdown-button-super ${e?"fixed":""} btn-group`,dropdownMenuClassOnlyPc:"mode-select-dropdown-menu-members",menuSettings:[..."sakura"===t.key&&this.props.profileState.profile.favMemberSakura||"hinata"===t.key&&this.props.profileState.profile.favMemberHinata?(()=>{let e=[{type:"TITLE",label:"推しメン"}];return["favMemberSakura","favMemberHinata"].forEach(t=>{this.props.profileState.profile[t]&&(e=[...e,{type:"LINK",pathname:`/${this.props.type}/${d.m[this.props.profileState.profile[t].belongingGroup].id}/${this.props.profileState.profile[t].ct}/`,label:this.props.profileState.profile[t].fullKanji}])}),e})():[],...(()=>{let e=[];for(const[a,o]of this.state.membersCollection[t.id].entries())e=[...e,{type:"TITLE",label:a+1+"期生"}],e=[...e,...o.map(({url:e,full_kanji:t})=>({type:"LINK",pathname:e[this.props.type],label:t}))];return e})()]},n.a.createElement(b.a,{icon:f.a})))));return m.u||e?n.a.createElement(n.a.Fragment,null,a):n.a.createElement(t,null,a)}if("blogView"===this.props.type&&!m.u){const a=n.a.createElement(n.a.Fragment,null,n.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("view"===this.props.mode?"active":""),onClick:()=>this.props.changeMode("view")},n.a.createElement("b",null,"閲覧する")),n.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("download"===this.props.mode?"active":""),onClick:()=>this.props.changeMode("download")},n.a.createElement("b",null,"保存する")));return e?n.a.createElement(n.a.Fragment,null,a):n.a.createElement(t,null,a)}if("members"===this.props.type){const t=n.a.createElement(n.a.Fragment,null,Object(m.D)(this.props.profileState.profile.favGroups).map(t=>{if(t.isActive)return n.a.createElement(r.a,{key:t.id,className:`rounded-pill mode-select-button ${t.key} `+(e?"fixed ":" ")+(this.props.group===t.key?"active":""),onClick:()=>this.props.changeGroup(t.key)},n.a.createElement("b",null,t.name))}));return m.u||e?n.a.createElement(n.a.Fragment,null,t):n.a.createElement(r.c,{size:"lg"},t)}},this.getModeSelectButtonGroupVerLeft=e=>{let t;if("home"===this.props.type?t=n.a.createElement(n.a.Fragment,null,n.a.createElement(r.a,{className:"rounded-pill mode-select-button active "+(e?"fixed":""),onClick:()=>this.props.history.push("/")},n.a.createElement("b",null,"ホーム")),n.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+(m.u||e?"":"d-flex align-items-center"),onClick:()=>this.props.history.push("/images/")},n.a.createElement("b",null,"画像一覧"),n.a.createElement(v.a,{id:"mode-select-images-home",directionOnlyPc:"down",buttonClass:"rounded-circle mode-select-dropdown-button "+(e?"fixed p-0":""),buttonContainerClass:`mode-select-dropdown-button-super ${e?"fixed":""} btn-group`,dropdownMenuClassOnlyPc:"mode-select-dropdown-menu",menuSettings:[{type:"TITLE",label:"グループ選択"},...Object(m.D)(this.props.profileState.profile.favGroups).map(e=>({type:"LINK",pathname:`/images/${e.id}/`,label:""+e.name}))]},n.a.createElement(b.a,{icon:f.a}))),n.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+(m.u||e?"":"d-flex align-items-center"),onClick:()=>this.props.history.push("/blogs/")},n.a.createElement("b",null,"ブログ一覧"),n.a.createElement(v.a,{id:"mode-select-images-home",directionOnlyPc:"down",buttonClass:"rounded-circle mode-select-dropdown-button "+(e?"fixed p-0":""),buttonContainerClass:`mode-select-dropdown-button-super ${e?"fixed":""} btn-group`,dropdownMenuClassOnlyPc:"mode-select-dropdown-menu",menuSettings:[{type:"TITLE",label:"グループ選択"},...Object(m.D)(this.props.profileState.profile.favGroups).map(e=>({type:"LINK",pathname:`/blogs/${e.id}/`,label:""+e.name}))]},n.a.createElement(b.a,{icon:f.a})))):"terms"===this.props.type&&(t=n.a.createElement(n.a.Fragment,null,n.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("contact"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/contact/")},n.a.createElement("b",null,this.props.titleHash.contact)),n.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("termsOfService"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/terms-of-service/")},n.a.createElement("b",null,this.props.titleHash.termsOfService)),n.a.createElement(r.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("privacyPolicy"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/privacy-policy/")},n.a.createElement("b",null,this.props.titleHash.privacyPolicy)))),"home"===this.props.type||"terms"===this.props.type)return m.u||e?n.a.createElement(n.a.Fragment,null,t):n.a.createElement(r.c,{size:"lg",className:"ml-3 my-0"},t)},this.getTypeChangeButton=e=>{let t;if(t=e?"type-change-button-fixed":"type-change-button","blogs"===this.props.type||"images"===this.props.type)return n.a.createElement(y,{id:t,history:this.props.history,type:this.props.type,groupID:this.props.groupID,ct:this.props.ct})},this.initMembers={},Object.values(d.m).forEach(e=>this.initMembers[e.id]=[]),this.state={membersCollection:this.initMembers},this.subNavbarRef=n.a.createRef(),this.initUrl=e.match.url,this.initSearch=e.location.search,e.domDispatch({type:"SET_SUBNAVBAR_REF",subNavbarRef:this.subNavbarRef,locationKey:e.location.key})}componentDidMount(){if("blogs"===this.props.type||"images"===this.props.type){const e=Object(m.a)(d.b,"members/");c.a.get(e).then(e=>{const t=this.initMembers;Object.values(d.m).forEach(a=>{if(a.isActive){t[a.id]=[];for(const o of e.data[a.key])t[a.id].push(o.map(e=>({url:e.url,full_kanji:e.full_kanji})))}}),this.setState({membersCollection:t})}).catch(e=>{console.error(e)}).finally()}}componentDidUpdate(e){Object(m.e)(this.props)&&this.props.match.url===this.initUrl&&this.props.location.search===this.initSearch&&this.props.location.key!==e.location.key&&this.props.domDispatch({type:"SET_SUBNAVBAR_REF",subNavbarRef:this.subNavbarRef,locationKey:this.props.location.key})}render(){const e=this.getTypeChangeButton(!0),t=this.getModeSelectButtonGroupVerLeft(!0),a=this.getModeSelectButtonGroup(!0);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"fixed-headline border-bottom text-muted pl-0 pl-lg-3",style:{top:m.u?d.u:0,height:d.A},ref:this.subNavbarRef},n.a.createElement(s.a,{mini:!0,className:"mr-0 mr-lg-2"}),this.props.title&&(t||a)&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,this.props.title),!m.u&&e,n.a.createElement("div",{className:"vertical-hr "+(m.u?"ml-3":"mx-2")})),this.props.title&&!t&&!a&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,this.props.title),!m.u&&e),n.a.createElement("div",{className:"fixed-headline-contents-wrapper",style:{height:d.A,...m.u?{}:{overflow:"visible"}}},n.a.createElement("div",{className:"fixed-headline-contents-wrapper2",style:{height:d.A}},n.a.createElement("div",{className:"text-muted fixed-headline-contents"},t,a)))),!m.u&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row justify-content-between mr-0"},n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement(s.a,null),this.getModeSelectButtonGroupVerLeft(!1),this.props.title&&n.a.createElement("h3",{className:"ml-3 my-0"},this.props.title),this.getTypeChangeButton(!1)),this.getModeSelectButtonGroup(!1))))}}t.a=Object(l.withRouter)(e=>n.a.createElement(u.a.Consumer,null,t=>n.a.createElement(h.a.Consumer,null,a=>n.a.createElement(w,E({},e,{domDispatch:t,profileState:a})))))},"./src/components/molecules/ImageCard.jsx":function(e,t,a){"use strict";var o=a("./node_modules/react/index.js"),n=a.n(o),s=a("./node_modules/react-router-dom/esm/react-router-dom.js"),r=a("./src/components/modules/utils.js"),l=a("./src/components/organisms/ImageView.jsx"),i=a("./node_modules/react-cookie/es6/index.js"),c=a("./src/components/modules/env.js"),m=a("./src/components/atoms/FavoriteButton.jsx"),d=a("./src/components/contexts/DomContext.jsx"),u=a("./node_modules/@fortawesome/react-fontawesome/index.es.js"),p=a("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js"),b=a("./src/components/atoms/DownloadButton.jsx"),f=a("./src/components/molecules/DropdownMobileFriendly.jsx");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}const h=e=>{const{title:t,url:a}=e;return n.a.createElement(n.a.Fragment,null,""!==t&&n.a.createElement(s.Link,{to:a,className:"btn btn-primary rounded-pill image-to-blog-button image-card-button text-left d-flex align-items-center",role:"button",title:`「${t}」を確認`},n.a.createElement("h6",{className:"omit-title m-0",style:{fontSize:14}},t)))},v=e=>{const{url:t,srcCollection:a,imageId:i,initIsFavorite:g,cookies:v,shouldPreload:E=!0,shouldLoadOriginal:y=!1,didMountImage:w=(()=>{}),width:j,height:x,orderly:N,groupKey:k,groupId:O,blogCt:C,order:S,writer:I,priorityImageId:F,blogUrl:L,blogTitle:_,officialUrl:M,footerMessage:B,isFavorite:T}=e,R=Object(d.d)(),[$,D]=Object(o.useState)(!1),[A,K]=Object(o.useState)(0),[U,H]=Object(o.useState)(!1),[G,P]=Object(o.useState)(r.w?a["250x"]:""),[V,z]=Object(o.useState)(r.w?"":`${a["250x"]} 1x, ${a["500x"]} 2x`),[q,X]=Object(o.useState)(!1),J=Object(o.useRef)(null),W=Object(o.useRef)(!1),[{setIsFavorite:Y}]=Object(o.useState)(Object(r.j)({},R,i)),[Q]=Object(o.useState)(v.get("csrftoken")),Z=Object(o.useRef)(null),[ee,te]=Object(m.b)(O,C,S,Y,T,Q,r.u?()=>{Z.current&&Z.current.endWork()}:void 0),ae=e=>{r.u||(e&&!W.current?D(!0):!e&&W.current&&(q||D(!1))),W.current=e},oe=()=>{J.current&&Number.isFinite(J.current.clientHeight)&&J.current.clientHeight>A&&K(J.current.clientHeight)};Object(o.useEffect)(()=>{if(oe(),T!==g&&R({type:"INIT_FAVORITE",imageID:i,isFavorite:g}),E){const e=new Image;e.onload=()=>{H(!0),y&&(P(a.originals),z(""))},e.src=G,e.srcset=V}},[]),Object(o.useEffect)(()=>{U&&w&&w()},[U]),Object(o.useEffect)(()=>{oe()});const ne=$&&!r.u,se=A>100,re=Number.isFinite(j)&&j>0?j:250,le=Number.isFinite(x)&&x>0?x:250;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"image-card",onMouseEnter:()=>{ae(!0)},onMouseLeave:()=>{ae(!1)}},n.a.createElement(s.Link,{to:{pathname:t,state:{prevSrc:a}}},n.a.createElement("div",{className:"image-card-wrapper "+(r.u?"":"pc")},!E||U?n.a.createElement("div",{ref:e=>J.current=e},n.a.createElement("img",{width:re,height:le,className:"image-card-img "+(N?"newpost-thumbnail":""),src:G,srcSet:V,alt:Object(r.k)(k,I.name),id:F||i})):n.a.createElement("div",{className:"image-card-preload-img-wrapper loading-background"},n.a.createElement("div",{className:"image-card-preload-img",style:{paddingTop:le/re*100+"%"}})))),U&&n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{groupKey:k,lottieName:te,isFavorite:T,isShowMenu:ne,cardHeight:A,type:"image-card",onClickFavoriteButton:ee}),ne&&se&&n.a.createElement(b.a,{className:"image-card-download-button-ver2",groupId:O,onClick:()=>{Object(l.b)(Object(r.a)(t),Q)}}),ne&&n.a.createElement(n.a.Fragment,null,n.a.createElement(h,{url:L,title:_}),n.a.createElement(f.a,{id:"image-card-detail-button-"+i,buttonClass:"p-0 image-card-detail-button image-card-button rounded-circle",buttonContainerClass:"image-card-detail-button-super text-center",onToggleWork:e=>{e&&(W.current||D(!1)),X(!e)},menuSettings:[{type:"ONCLICK",label:"この画像をダウンロードする",onClick:()=>{Object(l.b)(Object(r.a)(c.b,t),Q)},icon:p.l},{type:"ANCHOR",href:M,targetBlank:!0,label:"公式ブログで確認",icon:p.p},{type:"LINK",pathname:I.url.images,label:`「${I.name}」の画像を探す`,icon:p.w},{type:"LINK",pathname:I.url.blogs,label:`「${I.name}」のブログを探す`,icon:p.y}]},n.a.createElement(u.a,{icon:p.c}))))),(B||r.u)&&n.a.createElement("div",{className:"image-card-footer"},n.a.createElement("div",{className:"image-card-message "+(r.u?"mobile":"")},B&&n.a.createElement(s.Link,{to:{pathname:t,state:{prevSrc:a}},onMouseEnter:()=>{ae(!0)},onMouseLeave:()=>{ae(!1)},style:{textDecoration:"none"}},n.a.createElement("div",{className:"card-message mx-auto py-2 "+(r.u?"":"pc")},n.a.createElement(u.a,{icon:p.k,style:{color:"gold"}})," ",n.a.createElement("b",null,B)))),r.u&&n.a.createElement(f.a,{ref:Z,id:"image-card-detail-button-mobile-"+i,buttonClass:"rounded-circle transparent-button-mobile ml-auto",menuSettings:[{type:"TITLE",label:`${_}（${I.name}）`},{type:"CUSTOM_ONLY_MOBILE",menuComponent:n.a.createElement(m.a,{type:"image-card-detail-menu",groupKey:k,lottieName:te,isFavorite:T,onClickFavoriteButton:ee})},{type:"LINK",pathname:t,state:{prevSrc:a},label:"詳細ページへ",icon:p.f},{type:"ANCHOR",href:M,targetBlank:!0,label:"公式ブログで確認",icon:p.p},{type:"LINK",pathname:I.url.images,label:`「${I.name}」の画像を探す`,icon:p.w},{type:"LINK",pathname:I.url.blogs,label:`「${I.name}」のブログを探す`,icon:p.y}]},n.a.createElement(u.a,{icon:p.m}))))};t.a=(()=>{const e=n.a.memo(Object(i.b)(v));return t=>{const{groupId:a,blogCt:o,order:s}=t,r=`${a}-${o}-${s}`,l=Object(d.e)();return n.a.createElement(e,g({},t,{orderly:!1,imageId:r,isFavorite:l.favoriteState[r]}))}})()},"./src/components/organisms/ImageView.jsx":function(e,t,a){"use strict";a.d(t,"b",(function(){return N}));var o=a("./node_modules/react/index.js"),n=a.n(o),s=a("./node_modules/axios/index.js"),r=a.n(s),l=a("./node_modules/file-saver/dist/FileSaver.min.js"),i=a("./src/components/modules/env.js"),c=a("./src/components/modules/utils.js"),m=a("./node_modules/react-router-dom/esm/react-router-dom.js"),d=a("./node_modules/@fortawesome/react-fontawesome/index.es.js"),u=a("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js"),p=a("./src/components/molecules/DropdownMobileFriendly.jsx");class b extends n.a.Component{render(){return n.a.createElement("div",{className:"rounded-pill d-flex writer-card p-1 align-items-center border shadow-sm",onClick:()=>this.props.history.push(this.props.writer.url.images)},n.a.createElement("img",{className:"rounded-circle writer-card-image",src:this.props.writer.image,alt:this.props.writer.name}),n.a.createElement("h6",{className:"mx-2 mb-0"},this.props.writer.name),n.a.createElement(p.a,{id:"writer-card-menu",buttonClass:"p-0 writer-card-detail-button rounded-circle",menuSettings:[...c.u?[{type:"TITLE",label:this.props.writer.name}]:[],{type:"LINK",pathname:this.props.writer.url.images,label:"画像一覧へ",icon:u.w},{type:"LINK",pathname:this.props.writer.url.blogs,label:"ブログ一覧へ",icon:u.y},this.props.writer.graduate?{}:{type:"ANCHOR",href:this.props.writer.officialUrl,targetBlank:!0,label:"公式ブログで確認",icon:u.p}]},n.a.createElement(d.a,{icon:u.a})))}}var f=Object(m.withRouter)(b),g=a("./src/components/molecules/Loader.jsx"),h=a("./src/components/atoms/NotFound.jsx"),v=a("./node_modules/react-cookie/es6/index.js"),E=a("./src/components/atoms/FavoriteButton.jsx"),y=a("./src/components/atoms/TooltipComponent.jsx"),w=a("./src/components/atoms/DownloadButton.jsx"),j=a("./src/components/contexts/DomContext.jsx"),x=a("./src/components/modules/cacheRoute.jsx");const N=(e,t,a=(()=>{}),o)=>{r.a.post(e,{},{headers:{"X-CSRFToken":t},responseType:"blob"}).then(e=>{const t=new Blob([e.data],{type:e.data.type}),n=e.headers["content-disposition"].match(/filename="(.*)"/)[1];Object(l.saveAs)(t,n),a&&a(o)})};t.a=Object(m.withRouter)(Object(v.b)(e=>{const{groupId:t,blogCt:a,order:s,groupKey:r,imageId:l,images:b,blog:v,status:k,isReadyView:O,requestPutDownloadOnlyMobile:C,incrementNumOfDownloads:S,prevSrcCollection:I,cookies:F}=e,L=Object(m.useLocation)(),_=Object(j.e)(),M=Object(j.d)(),{isCachedRoute:B}=Object(x.a)(),[T]=Object(o.useState)(`${l}-${L.key}`),{getIsFavorite:R,setIsFavorite:$}=Object(c.j)(_.favoriteState,M,l),D=F.get("csrftoken"),[A,K]=Object(E.b)(t,a,s,$,R(),D);let U,H,G,P;if(Object(o.useEffect)(()=>{if(O){const e=document.getElementById(T);Object(c.b)(e,C)}},[O]),Object(o.useEffect)(()=>{if(O&&!B){const e=document.getElementById(T);let t=new Image;t.onload=()=>{null!==e&&(e.removeAttribute("srcset"),e.setAttribute("src",t.src))};const a=b[s];t.src=a.src.originals,M({type:"INIT_FAVORITE",imageID:l,isFavorite:b[s].isFavorite})}},[O,B]),O){if("blog_not_found"===k)U=n.a.createElement("div",{className:"py-0 py-sm-5"},n.a.createElement(h.c,{type:"blogFailed",margin:!0}));else if("success"===k){const e=b[s];H=n.a.createElement("div",{className:"ml-1 ml-sm-3 ml-lg-4 image-view-text"},n.a.createElement("div",{className:"d-flex justify-content-between mt-1 mt-sm-3 mt-lg-2 mb-2 image-view-header"},n.a.createElement("div",{className:"d-flex align-items-center p-0"},n.a.createElement(y.a,{title:"この画像の閲覧数"},n.a.createElement("div",{id:"num-of-image-views-icon"},n.a.createElement(d.a,{icon:u.q,style:{color:"gray"}})))," ",e?e.numOfViews:0,n.a.createElement(y.a,{title:"この画像のダウンロード数"},n.a.createElement("div",{className:"ml-3",id:"num-of-image-downloads-icon"},n.a.createElement(d.a,{icon:u.l,style:{color:"gray"}})))," ",e?e.numOfDownloads:0),n.a.createElement("div",{className:"d-flex justify-content-end"},n.a.createElement(E.a,{groupKey:r,isFavorite:R(),lottieName:K,onClickFavoriteButton:A,type:"image-view"}),!c.u&&n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{title:"この画像をダウンロード"},n.a.createElement(w.a,{className:"image-view-download-button-v2",groupId:t,onClick:()=>{e&&N(Object(c.a)(i.b,e.url),D,S,s)}}))))),n.a.createElement("div",null,n.a.createElement("hr",{className:"mt-2 mt-lg-3 mb-4 mr-3"})),n.a.createElement("div",{className:"image-view-body"},n.a.createElement("div",{className:"d-flex mb-3"},n.a.createElement(y.a,{title:"掲載ブログ"},n.a.createElement(d.a,{className:"mr-3",icon:u.x,id:"image-view-blog-icon"})),v.url&&n.a.createElement(m.Link,{to:v.url,className:"image-view-blog-title"},v.title.length>50||c.w?v.title.length>0?n.a.createElement("h3",{className:"smaller"},v.title):n.a.createElement("h3",{className:"smaller"}," "):v.title.length>0?n.a.createElement("h3",null,v.title):n.a.createElement("h3",null," "))),n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement(y.a,{title:"ブログを書いたメンバー"},n.a.createElement(d.a,{className:"mr-3",icon:u.z,id:"image-view-writer-icon"})),n.a.createElement(f,{writer:v.writer}))),n.a.createElement("div",{className:"image-view-footer mt-4 mt-sm-5 mt-lg-2 mb-2"},n.a.createElement("div",{className:"image-view-to-official-button-wrapper"},n.a.createElement(y.a,{title:"公式ブログで確認"},n.a.createElement("a",{className:"btn btn-primary rounded-pill image-view-to-official-button py-0 "+(c.w?"px-2":""),id:"image-view-to-official-button",role:"button",target:"_blank",rel:"noreferrer",href:v.officialUrl},n.a.createElement("h6",{className:"omit-title m-0 image-view-to-official-title"},n.a.createElement(d.a,{icon:u.p})," ",r+"zaka46.com")))),n.a.createElement(p.a,{id:"image-view-card-menu",buttonClass:"p-0 image-view-detail-button rounded-circle",menuSettings:[...c.u?[{type:"TITLE",label:`${v.title}（${v.writer.name}）`},{type:"LINK",pathname:v.url,label:"掲載ブログを確認",icon:u.x}]:[{type:"ONCLICK",label:"この画像をダウンロードする",onClick:()=>{N(Object(c.a)(i.b,e.url),D,S,s)},icon:u.l}],{type:"ANCHOR",href:v.officialUrl,targetBlank:!0,label:"公式ブログで確認",icon:u.p},{type:"LINK",pathname:v.writer.url.images,label:`「${v.writer.name}」の画像を探す`,icon:u.w},{type:"LINK",pathname:v.writer.url.blogs,label:`「${v.writer.name}」のブログを探す`,icon:u.y}]},n.a.createElement(d.a,{icon:u.c})))),G=Object(c.k)(r,v.writer.name)}}else H=n.a.createElement(g.b,null);if(I)P=I["250x"];else if("success"===k&&b.length>0){P=b[s].src["250x"]}else P=null;if(c.w)U=n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{className:"image-of-image-view smp",src:P,id:T,alt:G}),n.a.createElement("div",{className:"container mt-3 text-muted"},n.a.createElement("div",{className:"alert alert-success",role:"alert",style:{borderRadius:"1rem",fontSize:14}},"画像を長押しして保存をおこなってください"),n.a.createElement("div",{className:"card otapick-card2 mx-auto image-view smp "+r},n.a.createElement("div",{className:"card-body"},n.a.createElement("div",{className:"p-0"},H)))));else{let e;if(I)e=`${I["250x"]} 1x, ${I["500x"]} 2x`;else if("success"===k){const t=b[s];e=`${t.src["250x"]} 1x, ${t.src["500x"]} 2x`}else e=null;U=n.a.createElement("div",{className:`card otapick-card2 mx-auto image-view ${c.u?"mb-3 mt-1":"my-4"} ${r}`},n.a.createElement("div",{className:"card-body"},n.a.createElement("div",{className:"row m-0"},n.a.createElement("div",{className:"col-12 col-lg-6 p-0"},n.a.createElement("img",{className:"image-of-image-view",src:P,id:T,srcSet:e,alt:G,onContextMenu:e=>c.u?"":e.preventDefault(),onMouseDown:e=>c.u?"":e.preventDefault()})),n.a.createElement("div",{className:"col-12 col-lg-6 p-0"},H))))}return n.a.createElement(n.a.Fragment,null,c.w?n.a.createElement("div",null,U):n.a.createElement("div",{className:"container mt-3 text-muted"},U))}))}}]);