(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{133:function(e,t,a){"use strict";var s=a(0),i=a.n(s),r=a(139),o=a(130),n=a(128),l=a(132),c=a(129),m=a(174),p=a(18),d=a(11),h=a(26),u=a.n(h),g=a(3),b=a(4),f=a(9),E=a(51),v=a(27),w=a(140),y=a(7),O=a(8),N=a(134);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const D=e=>{const[t,a]=Object(s.useState)(!1);let r=[];if(void 0!==e.members)for(const[t,a]of e.members.entries())r.push(i.a.createElement("div",{key:"dropdown-menu-contents-m-"+t},i.a.createElement(o.a,{header:!0},i.a.createElement("div",{className:"m-0"},t+1+"期生")),i.a.createElement(o.a,{divider:!0}),a.map(({url:t,full_kanji:a},s)=>i.a.createElement(o.a,{key:s,tag:f.Link,to:t[e.type]},a)),t!=e.members.length-1&&i.a.createElement(o.a,{divider:!0})));else r.push(i.a.createElement("div",{key:"dropdown-menu-contents-g"},i.a.createElement(o.a,{header:!0},"グループ選択"),i.a.createElement(o.a,{divider:!0}),Object.values(b.n).map(t=>i.a.createElement(o.a,{key:t.id,tag:f.Link,to:`/${e.type}/${t.id}/`},""+t.name))));return i.a.createElement(n.a,{direction:"right",isOpen:t,toggle:()=>a(!t),onClick:e=>e.stopPropagation(),className:"mode-select-dropdown-button-super "+(e.fixed?"fixed":"")},i.a.createElement(l.a,{className:"rounded-circle mode-select-dropdown-button "+(e.fixed?"fixed p-0 ":" ")+e.group},i.a.createElement(y.a,{icon:O.a})),i.a.createElement(c.a,{className:"bold mode-select-dropdown-menu"+(void 0!==e.members?"-members":"")},r))};class I extends i.a.Component{getChangeTypeUrl(e,t,a){return"blogs"===e?Object(g.a)("/images/",t,a):"images"===e?Object(g.a)("/blogs/",t,a):void 0}render(){const e="blogs"===this.props.type?"画像一覧に切り替えます":"ブログ一覧に切り替えます",t="blogs"===this.props.type?i.a.createElement(y.a,{icon:O.v}):i.a.createElement(y.a,{icon:O.x});return i.a.createElement(N.a,{title:e,placement:"bottom"},i.a.createElement(w.a,{to:this.getChangeTypeUrl(this.props.type,this.props.groupID,this.props.ct),className:"rounded-pill type-change-button ml-1",id:this.props.id},i.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{color:"gray",fontSize:20}},i.a.createElement(y.a,{className:"mr-1 my-0",icon:O.n,style:{fontSize:12}}),t)))}}class C extends i.a.Component{constructor(e){super(e),this.getModeSelectButtonGroup=e=>{const t=({children:e})=>i.a.createElement(m.a,{size:"lg",className:"mt-3 mt-lg-0"},e);if("blogs"===this.props.type||"images"===this.props.type){const a=i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("recommend"===this.props.mode?"active":""),onClick:()=>this.props.history.push(`/${this.props.type}/`)},i.a.createElement("b",null,"おすすめ")),Object.values(b.n).map(t=>i.a.createElement(p.a,{key:t.id,className:`rounded-pill mode-select-button ${t.key} `+(e?"fixed ":" ")+(g.s||e?" ":"d-flex align-items-center ")+(this.props.mode===t.key?"active":""),onClick:()=>this.props.history.push(`/${this.props.type}/${t.id}`)},i.a.createElement("b",null,t.name),t.isActive&&(e?i.a.createElement(E.b,{id:"modeSelect"+t.key,type:"modeSelect",members:this.state.membersCollection[t.id],group:t.key,blogsORimages:this.props.type}):i.a.createElement(D,{group:t.key,members:this.state.membersCollection[t.id],type:this.props.type,fixed:e})))));return g.s||e?i.a.createElement(i.a.Fragment,null,a):i.a.createElement(t,null,a)}if("blogView"===this.props.type&&!g.s){const a=i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("view"===this.props.mode?"active":""),onClick:()=>this.props.changeMode("view")},i.a.createElement("b",null,"閲覧する")),i.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("download"===this.props.mode?"active":""),onClick:()=>this.props.changeMode("download")},i.a.createElement("b",null,"保存する")));return e?i.a.createElement(i.a.Fragment,null,a):i.a.createElement(t,null,a)}if("members"===this.props.type){const t=i.a.createElement(i.a.Fragment,null,Object.values(b.n).map(t=>{if(t.isActive)return i.a.createElement(p.a,{key:t.id,className:`rounded-pill mode-select-button ${t.key} `+(e?"fixed ":" ")+(this.props.group===t.key?"active":""),onClick:()=>this.props.changeGroup(t.key)},i.a.createElement("b",null,t.name))}));return g.s||e?i.a.createElement(i.a.Fragment,null,t):i.a.createElement(m.a,{size:"lg"},t)}},this.getModeSelectButtonGroupVerLeft=e=>{let t;if("home"===this.props.type?t=i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{className:"rounded-pill mode-select-button active "+(e?"fixed":""),onClick:()=>this.props.history.push("/")},i.a.createElement("b",null,"ホーム")),i.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+(g.s||e?"":"d-flex align-items-center"),onClick:()=>this.props.history.push("/images/")},i.a.createElement("b",null,"画像一覧"),e?i.a.createElement(E.b,{id:"modeSelectVewHomeImages",type:"modeSelectVewHome",blogsORimages:"images"}):i.a.createElement(D,{type:"images",fixed:e})),i.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+(g.s||e?"":"d-flex align-items-center"),onClick:()=>this.props.history.push("/blogs/")},i.a.createElement("b",null,"ブログ一覧"),e?i.a.createElement(E.b,{id:"modeSelectVewHomeBlogs",type:"modeSelectVewHome",blogsORimages:"blogs"}):i.a.createElement(D,{type:"blogs",fixed:e}))):"terms"===this.props.type&&(t=i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("contact"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/contact/")},i.a.createElement("b",null,this.props.titleHash.contact)),i.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("termsOfService"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/terms-of-service/")},i.a.createElement("b",null,this.props.titleHash.termsOfService)),i.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("privacyPolicy"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/privacy-policy/")},i.a.createElement("b",null,this.props.titleHash.privacyPolicy)))),"home"===this.props.type||"terms"===this.props.type)return g.s||e?i.a.createElement(i.a.Fragment,null,t):i.a.createElement(m.a,{size:"lg",className:"ml-3 my-0"},t)},this.getTypeChangeButton=e=>{let t;if(t=e?"type-change-button-fixed":"type-change-button","blogs"===this.props.type||"images"===this.props.type)return i.a.createElement(I,{id:t,history:this.props.history,type:this.props.type,groupID:this.props.groupID,ct:this.props.ct})},this.initMembers={},Object.values(b.n).forEach(e=>this.initMembers[e.id]=[]),this.state={membersCollection:this.initMembers},this.subNavbarRef=i.a.createRef(),this.InitUrl=e.match.url,e.domDispatch({type:"SET_SUBNAVBAR_REF",subNavbarRef:this.subNavbarRef,locationKey:e.location.key})}componentDidMount(){if("blogs"===this.props.type||"images"===this.props.type){const e=Object(g.a)(b.d,"members/");u.a.get(e).then(e=>{const t=this.initMembers;Object.values(b.n).forEach(a=>{if(a.isActive){t[a.id]=[];for(const s of e.data[a.key])t[a.id].push(s.map(e=>({url:e.url,full_kanji:e.full_kanji})))}}),this.setState({membersCollection:t})}).catch(e=>{console.log(e)}).finally()}}componentDidUpdate(e){Object(g.e)(this.props)&&this.props.match.url===this.InitUrl&&this.props.location.key!==e.location.key&&this.props.domDispatch({type:"SET_SUBNAVBAR_REF",subNavbarRef:this.subNavbarRef,locationKey:this.props.location.key})}render(){const e=this.getTypeChangeButton(!0),t=this.getModeSelectButtonGroupVerLeft(!0),a=this.getModeSelectButtonGroup(!0);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"fixed-headline border-bottom text-muted pl-0 pl-lg-3",style:{top:g.s?b.v:0,height:b.A},ref:this.subNavbarRef},i.a.createElement(r.a,{mini:!0,className:"mr-0 mr-lg-2"}),this.props.title&&(t||a)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,this.props.title),!g.s&&e,i.a.createElement("div",{className:"vertical-hr "+(g.s?"ml-3":"mx-2")})),this.props.title&&!t&&!a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,this.props.title),!g.s&&e),i.a.createElement("div",{className:"fixed-headline-contents-wrapper",style:{height:b.A}},i.a.createElement("div",{className:"fixed-headline-contents-wrapper2",style:{height:b.A}},i.a.createElement("div",{className:"text-muted fixed-headline-contents"},t,a)))),!g.s&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row justify-content-between mr-0"},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement(r.a,null),this.getModeSelectButtonGroupVerLeft(!1),this.props.title&&i.a.createElement("h3",{className:"ml-3 my-0"},this.props.title),this.getTypeChangeButton(!1)),this.getModeSelectButtonGroup(!1))))}}t.a=Object(d.o)(e=>i.a.createElement(v.a.Consumer,null,t=>i.a.createElement(C,k({},e,{domDispatch:t}))))},134:function(e,t,a){"use strict";var s=a(0),i=a.n(s);t.a=e=>{const{children:t,title:a,backgroundColor:r="rgb(50, 50, 50)",placement:o="top"}=e,[n,l]=Object(s.useState)(!1);if(!a)return i.a.createElement(i.a.Fragment,null);const c=e=>i.a.createElement("div",{className:"tooltip-body rounded-pill px-2 py-1 "+e,style:{...r?{background:r}:{}}},a);return i.a.createElement("div",{className:"tooltip-container "+(n?"active":"")},i.a.createElement("span",{className:"tooltip-wrapper"},"top"===o&&c(o),i.a.createElement("div",{onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)}},t),"bottom"===o&&c(o)))}},139:function(e,t,a){"use strict";var s=a(0),i=a.n(s),r=a(11),o=a(3),n=a(18),l=a(7),c=a(8);class m extends i.a.Component{constructor(...e){var t;return t=super(...e),this.goBack=()=>{o.r===this.props.location.key?this.props.history.push("/"):history.back()},t}render(){return this.props.mini?i.a.createElement(n.a,{className:"rounded-circle transparent-button-mobile "+(o.s?"mobile ":" ")+(this.props.className?this.props.className:""),id:"mobile-back-button",onClick:this.goBack},i.a.createElement(l.a,{icon:c.h})):this.props.fixed?i.a.createElement("button",{onClick:this.goBack,className:"btn btn-light rounded-circle p-0 otapick-back-button-fixed shadow-sm "+(this.props.className?this.props.className:"")},i.a.createElement(l.a,{icon:c.b,style:{color:"gray"}})):i.a.createElement("button",{onClick:this.goBack,className:"btn btn-light rounded-circle p-0 otapick-back-button border shadow-sm "+(this.props.className?this.props.className:"")},i.a.createElement(l.a,{icon:c.b,style:{color:"gray"}}))}}t.a=Object(r.o)(m)},140:function(e,t,a){"use strict";var s=a(0),i=a.n(s),r=a(9),o=a(18),n=a(3);t.a=e=>{const{to:t,className:a,style:s,children:l,id:c=Object(n.j)()}=e;return i.a.createElement(r.Link,{to:t,style:{textDecoration:"none"},id:c},i.a.createElement(o.a,{className:a,style:s},l))}},141:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c}));var s=a(0),i=a.n(s),r=a(4),o=a(11);class n extends i.a.Component{constructor(e){super(e),this.DATA_AD_SLOT="",this.key=this.props.location.key}componentDidMount(){r.j||(window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push({}))}}const l=Object(o.o)(class extends n{constructor(e){super(e),this.DATA_AD_SLOT=r.i}render(){return i.a.createElement(i.a.Fragment,null,!r.j&&i.a.createElement("ins",{className:"adsbygoogle "+this.key,style:Object.assign({display:"block"},this.props.height?{height:this.props.height}:{}),"data-ad-client":r.g,"data-ad-slot":this.DATA_AD_SLOT,"data-ad-format":"auto","data-full-width-responsive":"true"}))}}),c=Object(o.o)(class extends n{constructor(e){super(e),this.DATA_AD_SLOT=r.h}render(){return i.a.createElement(i.a.Fragment,null,!r.j&&i.a.createElement("ins",{className:"adsbygoogle "+this.key,style:Object.assign({display:"block"},this.props.height?{height:this.props.height}:{}),"data-ad-client":r.g,"data-ad-slot":this.DATA_AD_SLOT,"data-ad-format":"horizontal","data-full-width-responsive":"false"}))}})},153:function(e,t,a){"use strict";var s=a(0),i=a.n(s),r=a(18),o=a(128),n=a(132),l=a(129),c=a(130),m=a(9),p=a(3),d=a(172),h=a(51),u=a(131),g=a(4),b=a(160),f=a(27),E=a(7),v=a(8);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}class y extends i.a.Component{render(){return i.a.createElement(r.a,{className:"rounded-circle p-0 image-card-download-button "+this.props.group,title:"この画像をダウンロードする",onClick:()=>Object(d.b)(Object(p.a)(g.d,this.props.url),this.props.csrftoken)})}}class O extends i.a.Component{render(){return i.a.createElement(i.a.Fragment,null,""!=this.props.title&&i.a.createElement(m.Link,{to:this.props.url,className:"btn btn-primary rounded-pill image-to-blog-button image-card-button text-left d-flex align-items-center",role:"button",title:`「${this.props.title}」を確認`},i.a.createElement("h6",{className:"omit-title m-0",style:{fontSize:14}},this.props.title)))}}class N extends i.a.Component{constructor(e){super(e),this.state={dropdownOpen:!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>(e.dropdownOpen&&this.props.hideMenu(),{dropdownOpen:!e.dropdownOpen}))}render(){return i.a.createElement(o.a,{direction:"right",isOpen:this.state.dropdownOpen,toggle:this.toggle,className:"image-card-detail-button-super text-center"},i.a.createElement(n.a,{color:"light",className:"p-0 image-card-detail-button image-card-button rounded-circle"},i.a.createElement(E.a,{icon:v.c})),i.a.createElement(l.a,{className:"bold"},i.a.createElement(c.a,{tag:m.Link,to:{pathname:this.props.url,state:{prevSrc:this.props.src}}},"詳細ページへ"),i.a.createElement(c.a,{divider:!0}),i.a.createElement(c.a,{tag:m.Link,to:this.props.writer.url.images},`「${this.props.writer.name}」の他の画像を探す`),i.a.createElement(c.a,{onClick:()=>Object(d.b)(Object(p.a)(g.d,this.props.url),this.props.csrftoken)},"この画像をダウンロードする"),i.a.createElement(c.a,{href:this.props.officialUrl,target:"_blank"},"公式ブログで確認")))}}class k extends i.a.Component{constructor(e){super(e),this.setIsOpenMenu=e=>{p.s||(e&&!this.isHover?this.setState({isOpenMenu:e}):!e&&this.isHover&&(this.detailButtonRef.current.state.dropdownOpen||this.setState({isOpenMenu:e})))},this.hideMenu=()=>{this.isHover||this.setState({isOpenMenu:!1})},this.updateCardHeight=()=>{this.imageCardRef&&Number.isFinite(this.imageCardRef.clientHeight)&&this.imageCardRef.clientHeight>this.state.cardHeight&&this.setState({cardHeight:this.imageCardRef.clientHeight})},this.componentDidMount=()=>{if(this.updateCardHeight(),this.props.domDispatch({type:"INIT_FAVORITE",imageID:this.imageID,isFavorite:this.props.initIsFavorite}),this.shouldPreload){const e=new Image;e.onload=()=>{this.setState({isLoadImage:!0}),this.shouldLoadOriginal&&this.setState({src:this.props.src.originals,srcset:""})},e.src=this.state.src,e.srcset=this.state.srcset}},this.componentDidUpdate=(e,t)=>{console.log("レンダーimageCard"),this.updateCardHeight(),t.isLoadImage!==this.state.isLoadImage&&this.state.isLoadImage&&this.props.didMountImage&&this.props.didMountImage()},this.state={isOpenMenu:!1,cardHeight:0,placeholderCardWidth:0,isLoadImage:!1,src:p.t?this.props.src["250x"]:"",srcset:p.t?"":`${this.props.src["250x"]} 1x, ${this.props.src["500x"]} 2x`},this.isHover=!1,this.detailButtonRef=i.a.createRef(),this.imageID=e.imageID,this.setIsFavorite=Object(p.h)({},e.domDispatch,this.imageID).setIsFavorite,this.csrftoken=e.cookies.get("csrftoken"),this.shouldPreload=void 0===this.props.shouldPreload||this.props.shouldPreload,this.shouldLoadOriginal=void 0!==this.props.shouldLoadOriginal&&this.props.shouldLoadOriginal}render(){const e=this.state.isOpenMenu&&!p.s,t=this.state.cardHeight>100,a=Number.isFinite(this.props.width)&&this.props.width>0?this.props.width:250,s=Number.isFinite(this.props.height)&&this.props.height>0?this.props.height:250;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"image-card",onMouseEnter:()=>{this.setIsOpenMenu(!0),this.isHover=!0},onMouseLeave:()=>{this.setIsOpenMenu(!1),this.isHover=!1}},i.a.createElement(m.Link,{to:{pathname:this.props.url,state:{prevSrc:this.props.src}}},i.a.createElement("div",{className:"image-card-wrapper "+(p.s?"":"pc")},!this.shouldPreload||this.state.isLoadImage?i.a.createElement("div",{ref:e=>this.imageCardRef=e},i.a.createElement("img",{width:a,height:s,className:"image-card-img "+(this.props.orderly?"newpost-thumbnail":""),src:this.state.src,srcSet:this.state.srcset,alt:Object(p.i)(this.props.group,this.props.writer.name),id:this.props.imgID||this.imageID})):i.a.createElement("div",{className:"image-card-preload-img-wrapper"},i.a.createElement("div",{className:"image-card-preload-img",style:{backgroundColor:"lightgray",paddingTop:s/a*100+"%"}})))),this.state.isLoadImage&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{group:this.props.group,groupID:this.props.groupID,blogCt:this.props.blogCt,order:this.props.order,isFavorite:this.props.isFavorite,setIsFavorite:this.setIsFavorite,isShowMenu:e,cardHeight:this.state.cardHeight}),e&&t&&i.a.createElement(y,{group:this.props.group,url:this.props.url,csrftoken:this.csrftoken}),e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(O,{url:this.props.blogUrl,title:this.props.blogTitle}),i.a.createElement(N,{url:this.props.url,officialUrl:this.props.officialUrl,ref:this.detailButtonRef,hideMenu:()=>this.hideMenu(),writer:this.props.writer,src:this.props.src,csrftoken:this.csrftoken})))),(this.props.message||p.s)&&i.a.createElement("div",{className:"image-card-footer"},i.a.createElement("div",{className:"image-card-message "+(p.s?"mobile":"")},this.props.message&&i.a.createElement(m.Link,{to:{pathname:this.props.url,state:{prevSrc:this.props.src}},onMouseEnter:()=>{this.setIsOpenMenu(!0),this.isHover=!0},onMouseLeave:()=>{this.setIsOpenMenu(!1),this.isHover=!1},style:{textDecoration:"none"}},i.a.createElement("div",{className:"card-message mx-auto py-2 "+(p.s?"":"pc")},i.a.createElement(E.a,{icon:v.j,style:{color:"gold"}})," ",i.a.createElement("b",null,this.props.message)))),p.s&&i.a.createElement(h.a,{id:this.props.id,type:"imageCard",title:`${this.props.blogTitle}（${this.props.writer.name}）`,url:this.props.url,officialUrl:this.props.officialUrl,writer:this.props.writer,src:this.props.src})))}}t.a=(()=>{const e=i.a.memo(Object(u.a)(k));return t=>{const a=`${t.groupID}_${t.blogCt}_${t.order}`;return i.a.createElement(f.b.Consumer,null,s=>i.a.createElement(f.a.Consumer,null,r=>i.a.createElement(e,w({},t,{orderly:!1,imageID:a,initIsFavorite:t.isFavorite,isFavorite:s.favoriteState[a],domDispatch:r}))))}})()},160:function(e,t,a){"use strict";var s=a(0),i=a.n(s),r=a(18),o=a(220),n=a.n(o),l=a(3),c=a(131),m=a(4),p=a(53),d=a(24),h=a(11);const u=Object(c.a)(e=>{const{groupID:t,blogCt:a,order:o,isFavorite:c,setIsFavorite:h,group:u,isShowMenu:g,cardHeight:b}=e,f=Object(s.useRef)(null),E=Object(d.d)(),v=Object(l.a)(m.d,"favorites/",t,a,o),w=Object(p.a)(v,"put",{thenCallback:()=>{h(!0)},catchCallback:()=>{h(!1)},token:E.token,csrftoken:e.cookies.get("csrftoken")}),y=Object(p.a)(v,"delete",{thenCallback:()=>{h(!1)},catchCallback:()=>{h(!0)},token:E.token,csrftoken:e.cookies.get("csrftoken")}),[O]=Object(s.useState)(`favoritebutton-${t}-${a}-${o}`);let N;Object.values(m.n).forEach(e=>{e.key===u&&(N=e.bookmarkAnimationData)}),Object(s.useEffect)(()=>{n.a.loadAnimation({container:f.current,animationData:N,loop:!1,autoplay:!1,name:O}),n.a.setSpeed(1.8,O)},[]);const k=Object(s.useRef)(!1);Object(s.useEffect)(()=>{c?!k.current&&Object(l.e)(e)&&n.a.goToAndStop(1e3,!0,O):n.a.goToAndStop(0,!0,O)},[c,e.location]);const D=()=>{c?y.request():(n.a.play(O),k.current=!0,setTimeout(()=>{k.current=!1},1e3),w.request())};if(void 0===g&&void 0===b)return i.a.createElement(r.a,{className:"rounded-circle p-0 image-view-favorite-button "+(l.s?"mobile":""),title:c?"この画像をマイフォルダから削除する":"この画像をマイフォルダに追加する",onClick:D},i.a.createElement("div",{ref:f,className:""+(c?"lottie-favorite-shadow lottie-favorite-image-view":"lottie-favorite-image-view-deactive")}));{const e=b>0&&(c||g);return i.a.createElement(r.a,{className:"rounded-circle p-0 "+(g?"image-card-favorite-button":"image-card-favorite-button-transparent"),title:c?"この画像をマイフォルダから削除する":"この画像をマイフォルダに追加する",onClick:D,style:{display:e?"block":"none"}},i.a.createElement("div",{ref:f,className:""+(c?"lottie-favorite-shadow lottie-favorite":"lottie-favorite-deactive")}))}});t.a=Object(h.o)(u)},170:function(e,t,a){"use strict";var s=a(0),i=a.n(s),r=a(26),o=a.n(r),n=a(3),l=a(4);class c extends i.a.Component{constructor(e){super(e);const t=e.match.params.groupID,a=e.match.params.blogCt;this.initState={group:Object(n.m)(t),groupID:t,blogCt:a,title:"",postDate:"",writer:{},numOfViews:0,numOfDownloads:0,officialUrl:"",url:"",images:[],status:"",progress:0,loadingImageUrl:"",VIEW_KEY:"",DOWNLOAD_KEY:""},this.state=this.initState,this.blogViewURL=Object(n.a)(l.d,"blog/",this.state.groupID,this.state.blogCt),this.incrementNumOfViews=this.incrementNumOfViews.bind(this),this.incrementNumOfDownloads=this.incrementNumOfDownloads.bind(this)}getBlog(){setTimeout(()=>{o.a.get(this.blogViewURL).then(e=>{let t={};this.state.status||"blog_not_found"===e.data.status||(t={title:e.data.title,postDate:e.data.post_date,writer:e.data.writer,numOfViews:e.data.num_of_views,numOfDownloads:e.data.num_of_downloads,officialUrl:e.data.official_url,url:e.data.url}),"success"===e.data.status?void 0!==this.props.order&&e.data.images.length<=this.props.order?(this.setState(Object.assign({status:"get_image_failed"},t)),this.updateMetaVerView("get_image_failed")):(this.setState(Object.assign({images:e.data.images.map(e=>Object(n.f)(e)),status:"success",VIEW_KEY:e.data.VIEW_KEY,DOWNLOAD_KEY:e.data.DOWNLOAD_KEY},t)),this.updateMetaVerView("success",t.title,t.writer.name)):"start_download"===e.data.status||"downloading"===e.data.status?(this.setState(Object.assign({progress:e.data.progress,loadingImageUrl:e.data.loading_image,status:"accepted"},t)),this.updateMetaVerView("accepted")):"blog_not_found"===e.data.status?(this.setState({status:"blog_not_found",title:"ブログが見つかりませんでした。"}),this.updateMetaVerView("blog_not_found")):"get_image_failed"===e.data.status&&(this.setState(Object.assign({status:"get_image_failed"},t)),this.updateMetaVerView("get_image_failed"))}).catch(e=>{console.log(e)}).finally(()=>{Object(n.q)(this.props.location.pathname)})},l.k)}incrementNumOfViews(e=-1){e<0?this.setState(e=>({numOfViews:e.numOfViews+1})):this.setState(t=>{let a=t.images;return a.length>e&&(a[Number(e)].numOfViews+=1),{images:a}})}incrementNumOfDownloads(e=-1,t=1){e<0?this.setState(e=>({numOfDownloads:e.numOfDownloads+t})):this.setState(a=>{let s=a.images;return s.length>e&&(s[Number(e)].numOfDownloads+=t),{images:s}})}componentDidMount(){this.getBlog()}componentDidUpdate(e,t){t.status!==this.state.status&&"accepted"===this.state.status&&(this.reqCount=0,this.intervalReqID=setInterval(()=>{this.reqCount++<=20?this.getBlog():(this.setState({status:"get_image_failed"}),clearInterval(this.intervalReqID))},1e3)),t.status!==this.state.status&&"accepted"===t.status&&clearInterval(this.intervalReqID)}componentWillUnmount(){clearInterval(this.intervalReqID)}}t.a=c},172:function(e,t,a){"use strict";a.d(t,"b",(function(){return _}));var s=a(0),i=a.n(s),r=a(26),o=a.n(r),n=a(175),l=a(4),c=a(128),m=a(132),p=a(129),d=a(130),h=a(18),u=a(3),g=a(9),b=a(11),f=a(51),E=a(7),v=a(8);class w extends i.a.Component{constructor(e){super(e),this.state={dropdownOpen:!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>({dropdownOpen:!e.dropdownOpen}))}render(){return i.a.createElement(c.a,{direction:"right",isOpen:this.state.dropdownOpen,toggle:this.toggle,onClick:e=>e.stopPropagation()},i.a.createElement(m.a,{color:"light",className:"p-0 writer-card-detail-button rounded-circle"},i.a.createElement(E.a,{icon:v.a})),i.a.createElement(p.a,{className:"bold"},i.a.createElement(d.a,{tag:g.Link,to:this.props.writer.url.images},"画像一覧へ"),i.a.createElement(d.a,{tag:g.Link,to:this.props.writer.url.blogs},"ブログ一覧へ")))}}class y extends i.a.Component{render(){return i.a.createElement("div",{className:"rounded-pill d-flex writer-card p-1 align-items-center border shadow-sm",onClick:()=>this.props.history.push(this.props.writer.url.images)},i.a.createElement("img",{className:"rounded-circle writer-card-image",src:this.props.writer.image,alt:this.props.writer.name}),i.a.createElement("h6",{className:"mx-2 mb-0"},this.props.writer.name),u.s?i.a.createElement(f.a,{id:"writer-card-menu",type:"writerCard",title:this.props.writer.name,url:this.props.writer.url,officialUrl:this.props.writer.official_url}):i.a.createElement(w,{writer:this.props.writer}))}}var O=Object(b.o)(y),N=a(28),k=a(41),D=a(170),I=a(131),C=a(160),x=a(134);const _=(e,t,a=null,s)=>{o.a.post(e,{},{headers:{"X-CSRFToken":t},responseType:"blob"}).then(e=>{const t=new Blob([e.data],{type:e.data.type}),i=e.headers["content-disposition"].match(/filename="(.*)"/)[1];Object(n.saveAs)(t,i),null!==a&&a(s)})};class S extends i.a.Component{constructor(e){super(e),this.state={dropdownOpen:!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>({dropdownOpen:!e.dropdownOpen}))}render(){return i.a.createElement(c.a,{direction:"right",isOpen:this.state.dropdownOpen,toggle:this.toggle},i.a.createElement(m.a,{color:"light",className:"p-0 image-view-detail-button rounded-circle"},i.a.createElement(E.a,{icon:v.c})),i.a.createElement(p.a,{className:"bold"},i.a.createElement(d.a,{onClick:()=>_(Object(u.a)(l.d,this.props.url),this.props.csrftoken,this.props.incrementNumOfDownloads,this.props.order)},"この画像をダウンロードする"),i.a.createElement(d.a,{href:this.props.officialUrl,target:"_blank"},"公式ブログで確認")))}}class j extends D.a{constructor(e){super(e),this.imageViewURL=this.props.imageViewURL,this.blogViewURL=this.props.blogViewURL,this.mainImageID=`main-image-${this.props.groupID}_${this.props.blogCt}_${this.props.order}_${this.props.location.key}`,this.prevSrc=this.props.prevSrc,this.imageID=`${e.groupID}_${e.blogCt}_${e.order}`;const t=Object(u.h)(e.domState.favoriteState,e.domDispatch,this.imageID);this.getIsFavorite=t.getIsFavorite,this.setIsFavorite=t.setIsFavorite,this.csrftoken=this.props.cookies.get("csrftoken")}putView(){o.a.put(this.imageViewURL,{action:"view",key:this.state.VIEW_KEY},{headers:{"X-CSRFToken":this.csrftoken}}).then(e=>{"success"==e.data.status&&this.incrementNumOfViews(this.props.order)})}putDownload(){o.a.put(this.imageViewURL,{action:"download",key:this.state.DOWNLOAD_KEY},{headers:{"X-CSRFToken":this.csrftoken}}).then(e=>{"success"==e.data.status&&this.incrementNumOfDownloads(this.props.order)})}updateMetaVerView(e,t,a){"success"===e?Object(u.D)({title:`${t}(${a})｜画像詳細`,description:`${a}のブログ「${t}」の画像です。`}):"get_image_failed"===e?Object(u.D)({title:"Not Found Image",description:""}):"blog_not_found"===e?Object(u.D)({title:"Not Found Blog",description:""}):"accepted"===e&&Object(u.D)({title:"画像取得中",description:""})}componentDidUpdate(e,t){if(Object(u.e)(this.props)){if(t.status!==this.state.status&&"success"===this.state.status){if(this.state.VIEW_KEY){const e=`${this.props.groupID}_${this.props.blogCt}_${this.props.order}_${this.props.location.key}`;this.props.domState.accessedImages.includes(e)||(this.putView(),this.props.domDispatch({type:"ACCESS_TO_IMAGE",imageID:e}))}const e=document.getElementById(this.mainImageID);Object(u.b)(e,()=>this.putDownload());let t=new Image;t.onload=setTimeout(()=>{null!==e&&(e.removeAttribute("srcset"),e.setAttribute("src",t.src))},l.k);const a=this.state.images[this.props.order];t.src=a.src.originals,this.props.domDispatch({type:"INIT_FAVORITE",imageID:this.imageID,isFavorite:this.state.images[this.props.order].isFavorite})}e.blogViewURL===this.props.blogViewURL&&e.imageViewURL===this.props.imageViewURL||(this.blogViewURL=this.props.blogViewURL,this.imageViewURL=this.props.imageViewURL),this.props.location!==e.location&&this.updateMetaVerView(this.state.status,this.state.title,this.state.writer.name),super.componentDidUpdate(e,t)}}render(){let e,t,a,s;if(""===this.state.status)t=i.a.createElement(N.b,null);else if("accepted"===this.state.status)e=i.a.createElement(N.a,{progress:this.state.progress,loadingImageUrl:l.q});else if("blog_not_found"===this.state.status)e=i.a.createElement("div",{className:"py-0 py-sm-5"},i.a.createElement(k.c,{type:"blogFailed",margin:!0}));else if("get_image_failed"===this.state.status)e=i.a.createElement("div",{className:"py-0 py-sm-5"},i.a.createElement(k.c,{type:"imageFailed",margin:!0}));else if("success"===this.state.status){const e=this.state.images[this.props.order];t=i.a.createElement("div",{className:"ml-1 ml-sm-3 ml-lg-4 image-view-text"},i.a.createElement("div",{className:"d-flex justify-content-between mt-1 mt-sm-3 mt-lg-2 mb-2 image-view-header"},i.a.createElement("div",{className:"d-flex align-items-center p-0"},i.a.createElement(x.a,{title:"この画像の閲覧数"},i.a.createElement("div",{id:"num-of-image-views-icon"},i.a.createElement(E.a,{icon:v.p,style:{color:"gray"}})))," ",e?e.numOfViews:0,i.a.createElement(x.a,{title:"この画像のダウンロード数"},i.a.createElement("div",{className:"ml-3",id:"num-of-image-downloads-icon"},i.a.createElement(E.a,{icon:v.k,style:{color:"gray"}})))," ",e?e.numOfDownloads:0),i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement(C.a,{group:this.props.group,groupID:this.props.groupID,blogCt:this.props.blogCt,order:this.props.order,isFavorite:this.getIsFavorite(),setIsFavorite:this.setIsFavorite}),!u.s&&i.a.createElement(i.a.Fragment,null,i.a.createElement(x.a,{title:"この画像をダウンロード"},i.a.createElement(h.a,{className:"rounded-circle p-0 image-view-download-button "+this.props.group,onClick:()=>{e&&_(Object(u.a)(l.d,e.url),this.csrftoken,this.incrementNumOfDownloads,this.props.order)},id:"image-view-download-button"}))))),i.a.createElement("div",null,i.a.createElement("hr",{className:"mt-2 mt-lg-3 mb-4 mr-3"})),i.a.createElement("div",{className:"image-view-body"},i.a.createElement("div",{className:"d-flex mb-3"},i.a.createElement(x.a,{title:"掲載ブログ"},i.a.createElement(E.a,{className:"mr-3",icon:v.w,id:"image-view-blog-icon"})),i.a.createElement(g.Link,{to:this.state.url,className:"image-view-blog-title"},this.state.title.length>50||u.t?this.state.title.length>0?i.a.createElement("h3",{className:"smaller"},this.state.title):i.a.createElement("h3",{className:"smaller"}," "):this.state.title.length>0?i.a.createElement("h3",null,this.state.title):i.a.createElement("h3",null," "))),i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement(x.a,{title:"ブログを書いたメンバー"},i.a.createElement(E.a,{className:"mr-3",icon:v.y,id:"image-view-writer-icon"})),i.a.createElement(O,{writer:this.state.writer}))),i.a.createElement("div",{className:"image-view-footer mt-4 mt-sm-5 mt-lg-2 mb-2"},i.a.createElement("div",{className:"image-view-to-official-button-wrapper"},i.a.createElement(x.a,{title:"公式ブログで確認"},i.a.createElement("a",{className:"btn btn-primary rounded-pill image-view-to-official-button py-0 "+(u.t?"px-2":""),id:"image-view-to-official-button",role:"button",target:"_blank",rel:"noreferrer",href:this.state.officialUrl},i.a.createElement("h6",{className:"omit-title m-0 image-view-to-official-title"},i.a.createElement(E.a,{icon:v.o})," ",this.props.group+"zaka46.com")))),u.s?i.a.createElement(f.a,{id:"image-view-card-menu",type:"imageViewCard",title:`${this.state.title}（${this.state.writer.name}）`,url:this.state.url,officialUrl:this.state.officialUrl,writer:this.state.writer}):i.a.createElement(S,{officialUrl:this.state.officialUrl,url:e&&e.url,incrementNumOfDownloads:this.incrementNumOfDownloads,order:this.props.order,csrftoken:this.csrftoken}))),a=Object(u.i)(this.props.group,this.state.writer.name)}if(this.prevSrc)s=this.prevSrc["250x"];else if("success"===this.state.status){s=this.state.images[this.props.order].src["250x"]}else s=null;if(u.t)e=i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{className:"image-of-image-view smp",src:s,id:this.mainImageID,alt:a}),i.a.createElement("div",{className:"container mt-3 text-muted"},i.a.createElement("div",{className:"alert alert-success",role:"alert",style:{borderRadius:"1rem",fontSize:14}},"画像を長押しして保存をおこなってください"),i.a.createElement("div",{className:"card otapick-card2 mx-auto image-view smp "+this.props.group},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"p-0"},t)))));else{let r;if(this.prevSrc)r=`${this.prevSrc["250x"]} 1x, ${this.prevSrc["500x"]} 2x`;else if("success"===this.state.status){const e=this.state.images[this.props.order];r=`${e.src["250x"]} 1x, ${e.src["500x"]} 2x`}else r=null;e=i.a.createElement("div",{className:"card otapick-card2 mx-auto image-view "+(u.s?"mb-3 mt-1 ":"my-4 ")+this.props.group},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row m-0"},i.a.createElement("div",{className:"col-12 col-lg-6 p-0"},i.a.createElement("img",{className:"image-of-image-view",src:s,id:this.mainImageID,srcSet:r,alt:a,onContextMenu:e=>u.s?"":e.preventDefault(),onMouseDown:e=>u.s?"":e.preventDefault()})),i.a.createElement("div",{className:"col-12 col-lg-6 p-0"},t))))}return i.a.createElement(i.a.Fragment,null,u.t?i.a.createElement("div",null,e):i.a.createElement("div",{className:"container mt-3 text-muted"},e))}}t.a=Object(b.o)(Object(I.a)(j))}}]);