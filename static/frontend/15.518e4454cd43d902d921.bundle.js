(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./src/components/pages/UsersDetailPage.jsx":function(e,t,a){"use strict";a.r(t);var n=a("./node_modules/react/index.js"),s=a.n(n),r=a("./node_modules/react-router-dom/esm/react-router-dom.js"),l=a("./src/components/contexts/ProfileContext.jsx"),c=a("./src/components/modules/axios.js"),o=a("./src/components/modules/env.js"),i=a("./src/components/modules/utils.js"),m=a("./src/components/molecules/Loader.jsx"),d=a("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js"),u=a("./node_modules/@fortawesome/react-fontawesome/index.es.js"),p=a("./src/components/atoms/LinkButton.jsx"),f=a("./src/components/contexts/AuthContext.jsx");var g=e=>{const{username:t,favoriteListKey:a}=e,r=Object(f.d)(),[l,m]=Object(n.useState)(0),[g,b]=Object(n.useState)(0);return Object(c.a)(Object(i.a)(o.b,"favorites/info/"),"get",{thenCallback:e=>{const t=Object(i.g)(e.data);m(t.favoritesNum),b(t.maxFavoritesNum)},token:r.token,shouldRequestDidMount:!0}),s.a.createElement("div",{className:"row mt-4 mt-sm-5 mx-0 mx-sm-3 mx-md-0"},s.a.createElement(p.a,{to:{pathname:`/users/${t}/`,state:{accessKey:a}},className:`rounded-pill profile-mode-select-button active ${i.u?"mobile":""} ${i.w?"ml-0":"ml-3"}`},s.a.createElement(u.a,{icon:d.r,className:"mr-2"}),s.a.createElement("b",null,"マイフォルダ"),s.a.createElement("div",{className:"ml-2 px-1 rounded-pill profile-mode-select-button-badge"},s.a.createElement("b",null,l),"/"+g)))},b=a("./src/components/organisms/List/ImageList.jsx"),v=a("./src/components/atoms/TooltipComponent.jsx");var h=e=>{const{items:t=[],diameter:a=45,direction:l="left",isOverlap:c=!0,hasBorder:o=!1}=e,[m,d]=Object(n.useState)(Array(t.length).fill(!1)),u=(e,t)=>{const a=[...m];t&&a.fill(!1),a[e]=t,d(a)},p=1.14*a,f=c?.27*a:0,g="right"===l;return s.a.createElement("div",{className:"d-flex align-items-center avatar-sequence-container "+(o?"border-top border-light rounded-pill p-1 shadow-sm":"")},t.map((e,n)=>{const l="avatar-sequence-item-"+n;return s.a.createElement("div",{key:n,id:l,className:"avatar-sequence-item d-flex justify-content-center",style:{position:"relative",zIndex:m[n]?t.length:t.length-n,...g?{order:-n,left:f*n}:{right:f*n}},onMouseEnter:()=>{u(n,!0)},onMouseLeave:()=>{u(n,!1)}},(()=>{const t=s.a.createElement(r.Link,{to:e.url},s.a.createElement("div",{className:"rounded-circle avatar-sequence-image-wrapper d-flex justify-content-center align-items-center",style:{width:p,height:p}},s.a.createElement("div",{className:"rounded-circle avatar-sequence-image-hover-wrapper",style:{width:a,height:a,...m[n]?{opacity:.2}:{opacity:0}}}),e.contentsNode?s.a.createElement("div",{className:"rounded-circle avatar-sequence-image d-flex justify-content-center align-items-center",style:{width:a,height:a,backgroundColor:e.backgroundColor?e.backgroundColor:"white"}},e.contentsNode):s.a.createElement("img",{className:"rounded-circle avatar-sequence-image",width:a,height:a,style:{width:a,height:a},src:e.imageUrl,alt:e.alt})));return i.u?t:s.a.createElement(v.a,{title:e.alt},t)})())}))};var E=e=>{const{imageUrl:t,size:a}=e,n=a||(i.w?80:120),r=n+n/9;return s.a.createElement("div",{className:"profile-icon-wrapper rounded-circle",style:{height:r,width:r}},s.a.createElement("img",{className:"profile-icon-image rounded-circle",src:t,style:{height:n,width:n}}))},j=a("./src/components/molecules/DropdownMobileFriendly.jsx");var y=e=>{const{profile:t={},isMe:a}=e,n=i.w?16:26,r=null!=t&&t.favGroups?t.favGroups.map(e=>{var t;return{url:`/images/${e.groupId}/`,alt:e.name,backgroundColor:null===(t=o.m[e.groupId])||void 0===t?void 0:t.color,contentsNode:s.a.createElement("div",{className:"saka-mark"})}}):[],l=e=>t[e]?{url:`/images/${o.m[t[e].belongingGroup].id}/${t[e].ct}/`,imageUrl:t[e].image,alt:t[e].fullKanji}:{},c=l("favMemberSakura"),m=l("favMemberHinata");return s.a.createElement("div",{className:"my-2 my-sm-4"},s.a.createElement("div",{className:"d-flex justify-content-center pb-3"},!i.u&&s.a.createElement("div",{className:"d-flex justify-content-end align-items-end",style:{flex:1}},s.a.createElement(h,{direction:"right",items:[...r,...a?[{url:"/settings/fav-members/",alt:"推しグループを編集する",backgroundColor:"whitesmoke",contentsNode:s.a.createElement(u.a,{icon:d.A,color:"gray"})}]:[]]})),s.a.createElement("div",{className:"mx-2"},s.a.createElement(E,{imageUrl:t.image})),!i.u&&s.a.createElement("div",{className:"d-flex align-items-end",style:{flex:1}},s.a.createElement(h,{direction:"left",items:[...Object.keys(c).length?[c]:[],...Object.keys(m).length?[m]:[],...a?[{url:"/settings/fav-members/",alt:"推しメンを編集する",backgroundColor:"whitesmoke",contentsNode:s.a.createElement(u.a,{icon:d.A,color:"gray"})}]:[]]}))),s.a.createElement("div",{className:"d-flex align-items-center flex-column"},s.a.createElement("h1",{className:"profile-title pb-0 pb-sm-2 m-0 text-center",style:{fontSize:n}},t.name),s.a.createElement("div",{className:""},"@",t.username)),i.u&&(()=>{const e=[...Object.keys(c).length?[c]:[],...Object.keys(m).length?[m]:[],...r];return s.a.createElement("div",{className:"d-flex justify-content-center align-items-center mt-2"},s.a.createElement("div",{className:"d-flex justify-content-center align-items-center border-top border-light rounded-pill p-1 shadow-sm"},s.a.createElement("div",{className:"pl-3 pr-2"},s.a.createElement(v.a,{title:"推し"},s.a.createElement(u.a,{icon:d.u,color:"#ff7f7f",size:"lg"}))),s.a.createElement("div",{className:"mobile-fav-members-contents-wrapper border border-light rounded-pill",style:{maxWidth:.65*window.innerWidth}},e.length>0?s.a.createElement(h,{direction:"left",isOverlap:!1,items:e}):s.a.createElement("div",{className:"py-1 px-2"},a?"推しを設定して画像やブログの表示をカスタマイズしましょう！":"推し未設定")),a&&e.length>0?s.a.createElement(j.a,{id:"fav-member-dropdown",buttonClass:"rounded-circle fav-member-dropdown-button d-flex justify-content-center align-items-center mx-1 border-0",buttonStyle:{width:45,height:45},menuSettings:[{type:"TITLE",label:"推し"},{type:"LINK",pathname:"/settings/fav-members/",state:{},label:"推しを設定する",icon:d.H},Object.keys(c).length?{type:"LINK",pathname:c.url,state:{},label:`「${c.alt}」の画像一覧へ`,icon:d.w}:{},Object.keys(m).length?{type:"LINK",pathname:m.url,state:{},label:`「${m.alt}」の画像一覧へ`,icon:d.w}:{},...r.map(e=>({type:"LINK",pathname:e.url,state:{},label:`「${e.alt}」の画像一覧へ`,icon:d.w}))]},s.a.createElement(u.a,{icon:d.a,color:"gray"})):s.a.createElement(p.a,{to:"/settings/fav-members/",className:"rounded-circle avatar-sequence-image d-flex justify-content-center align-items-center mx-1 border-0",style:{width:45,height:45,backgroundColor:"white"}},s.a.createElement(u.a,{icon:d.A,color:"gray"}))))})())};var x=e=>{const{profile:t={},username:a,isMe:l,isLoading:c,accessKey:o,isReadyProfile:d}=e,u=Object(r.useLocation)(),[p,f]=Object(n.useState)(o);return Object(n.useEffect)(()=>{p!==o&&void 0!==o&&f(o)},[o]),Object(n.useEffect)(()=>{d&&Object(i.s)(u.pathname)},[p,d]),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container mt-3 text-muted"},c?s.a.createElement(m.b,null):s.a.createElement(y,{profile:t,isMe:l})),l?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container-fluid mt-3 text-muted"},s.a.createElement(g,{username:a,favoriteListKey:p,key:p})),s.a.createElement("div",{className:"container-fluid text-muted mt-3 list-container-fluid favorite-images-container "+(i.w?"smp":"")},s.a.createElement(b.b,{key:p,type:"FAVORITE_IMAGES"}))):s.a.createElement("div",{style:{marginTop:300}}))};t.default=()=>{var e;const t=Object(l.d)(),a=Object(r.useLocation)(),m=Object(r.useParams)(),[d]=Object(n.useState)(null==m?void 0:m.username),u=t.profile.username===d,[p,f]=Object(n.useState)(!1),[g,b]=Object(n.useState)(),{isLoading:v,request:h}=Object(c.a)(Object(i.a)(o.b,"users/",d),"get",{thenCallback:e=>{const t=Object(i.g)(e.data);b(t),Object(i.H)({title:`${t.name}(@${t.username})`,description:""})}});return Object(n.useEffect)(()=>{u?b({...t.profile}):h()},[d]),Object(n.useEffect)(()=>{u&&(b({...t.profile}),Object(i.H)({title:`${t.profile.name}(@${t.profile.username})`,description:""}))},[t.profile]),Object(n.useEffect)(()=>{void 0===g||p||f(!0)},[g]),s.a.createElement(x,{isLoading:v,profile:g,username:d,isMe:u,accessKey:null==a||null===(e=a.state)||void 0===e?void 0:e.accessKey,isReadyProfile:p})}}}]);