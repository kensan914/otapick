(window.webpackJsonp=window.webpackJsonp||[]).push([[6,3,4],{133:function(e,t,a){"use strict";var s=a(0),r=a.n(s),i=a(139),o=a(130),l=a(128),n=a(132),c=a(129),m=a(174),p=a(18),d=a(11),h=a(26),u=a.n(h),g=a(3),b=a(4),f=a(9),E=a(51),v=a(27),y=a(140),w=a(7),O=a(8),N=a(134);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const j=e=>{const[t,a]=Object(s.useState)(!1);let i=[];if(void 0!==e.members)for(const[t,a]of e.members.entries())i.push(r.a.createElement("div",{key:"dropdown-menu-contents-m-"+t},r.a.createElement(o.a,{header:!0},r.a.createElement("div",{className:"m-0"},t+1+"期生")),r.a.createElement(o.a,{divider:!0}),a.map(({url:t,full_kanji:a},s)=>r.a.createElement(o.a,{key:s,tag:f.Link,to:t[e.type]},a)),t!=e.members.length-1&&r.a.createElement(o.a,{divider:!0})));else i.push(r.a.createElement("div",{key:"dropdown-menu-contents-g"},r.a.createElement(o.a,{header:!0},"グループ選択"),r.a.createElement(o.a,{divider:!0}),Object.values(b.n).map(t=>r.a.createElement(o.a,{key:t.id,tag:f.Link,to:`/${e.type}/${t.id}/`},""+t.name))));return r.a.createElement(l.a,{direction:"right",isOpen:t,toggle:()=>a(!t),onClick:e=>e.stopPropagation(),className:"mode-select-dropdown-button-super "+(e.fixed?"fixed":"")},r.a.createElement(n.a,{className:"rounded-circle mode-select-dropdown-button "+(e.fixed?"fixed p-0 ":" ")+e.group},r.a.createElement(w.a,{icon:O.a})),r.a.createElement(c.a,{className:"bold mode-select-dropdown-menu"+(void 0!==e.members?"-members":"")},i))};class D extends r.a.Component{getChangeTypeUrl(e,t,a){return"blogs"===e?Object(g.a)("/images/",t,a):"images"===e?Object(g.a)("/blogs/",t,a):void 0}render(){const e="blogs"===this.props.type?"画像一覧に切り替えます":"ブログ一覧に切り替えます",t="blogs"===this.props.type?r.a.createElement(w.a,{icon:O.v}):r.a.createElement(w.a,{icon:O.x});return r.a.createElement(N.a,{title:e,placement:"bottom"},r.a.createElement(y.a,{to:this.getChangeTypeUrl(this.props.type,this.props.groupID,this.props.ct),className:"rounded-pill type-change-button ml-1",id:this.props.id},r.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{color:"gray",fontSize:20}},r.a.createElement(w.a,{className:"mr-1 my-0",icon:O.n,style:{fontSize:12}}),t)))}}class x extends r.a.Component{constructor(e){super(e),this.getModeSelectButtonGroup=e=>{const t=({children:e})=>r.a.createElement(m.a,{size:"lg",className:"mt-3 mt-lg-0"},e);if("blogs"===this.props.type||"images"===this.props.type){const a=r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("recommend"===this.props.mode?"active":""),onClick:()=>this.props.history.push(`/${this.props.type}/`)},r.a.createElement("b",null,"おすすめ")),Object.values(b.n).map(t=>r.a.createElement(p.a,{key:t.id,className:`rounded-pill mode-select-button ${t.key} `+(e?"fixed ":" ")+(g.s||e?" ":"d-flex align-items-center ")+(this.props.mode===t.key?"active":""),onClick:()=>this.props.history.push(`/${this.props.type}/${t.id}`)},r.a.createElement("b",null,t.name),t.isActive&&(e?r.a.createElement(E.b,{id:"modeSelect"+t.key,type:"modeSelect",members:this.state.membersCollection[t.id],group:t.key,blogsORimages:this.props.type}):r.a.createElement(j,{group:t.key,members:this.state.membersCollection[t.id],type:this.props.type,fixed:e})))));return g.s||e?r.a.createElement(r.a.Fragment,null,a):r.a.createElement(t,null,a)}if("blogView"===this.props.type&&!g.s){const a=r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("view"===this.props.mode?"active":""),onClick:()=>this.props.changeMode("view")},r.a.createElement("b",null,"閲覧する")),r.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("download"===this.props.mode?"active":""),onClick:()=>this.props.changeMode("download")},r.a.createElement("b",null,"保存する")));return e?r.a.createElement(r.a.Fragment,null,a):r.a.createElement(t,null,a)}if("members"===this.props.type){const t=r.a.createElement(r.a.Fragment,null,Object.values(b.n).map(t=>{if(t.isActive)return r.a.createElement(p.a,{key:t.id,className:`rounded-pill mode-select-button ${t.key} `+(e?"fixed ":" ")+(this.props.group===t.key?"active":""),onClick:()=>this.props.changeGroup(t.key)},r.a.createElement("b",null,t.name))}));return g.s||e?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(m.a,{size:"lg"},t)}},this.getModeSelectButtonGroupVerLeft=e=>{let t;if("home"===this.props.type?t=r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"rounded-pill mode-select-button active "+(e?"fixed":""),onClick:()=>this.props.history.push("/")},r.a.createElement("b",null,"ホーム")),r.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+(g.s||e?"":"d-flex align-items-center"),onClick:()=>this.props.history.push("/images/")},r.a.createElement("b",null,"画像一覧"),e?r.a.createElement(E.b,{id:"modeSelectVewHomeImages",type:"modeSelectVewHome",blogsORimages:"images"}):r.a.createElement(j,{type:"images",fixed:e})),r.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+(g.s||e?"":"d-flex align-items-center"),onClick:()=>this.props.history.push("/blogs/")},r.a.createElement("b",null,"ブログ一覧"),e?r.a.createElement(E.b,{id:"modeSelectVewHomeBlogs",type:"modeSelectVewHome",blogsORimages:"blogs"}):r.a.createElement(j,{type:"blogs",fixed:e}))):"terms"===this.props.type&&(t=r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("contact"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/contact/")},r.a.createElement("b",null,this.props.titleHash.contact)),r.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("termsOfService"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/terms-of-service/")},r.a.createElement("b",null,this.props.titleHash.termsOfService)),r.a.createElement(p.a,{className:"rounded-pill mode-select-button "+(e?"fixed ":" ")+("privacyPolicy"===this.props.mode?"active":""),onClick:()=>this.props.history.push("/privacy-policy/")},r.a.createElement("b",null,this.props.titleHash.privacyPolicy)))),"home"===this.props.type||"terms"===this.props.type)return g.s||e?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(m.a,{size:"lg",className:"ml-3 my-0"},t)},this.getTypeChangeButton=e=>{let t;if(t=e?"type-change-button-fixed":"type-change-button","blogs"===this.props.type||"images"===this.props.type)return r.a.createElement(D,{id:t,history:this.props.history,type:this.props.type,groupID:this.props.groupID,ct:this.props.ct})},this.initMembers={},Object.values(b.n).forEach(e=>this.initMembers[e.id]=[]),this.state={membersCollection:this.initMembers},this.subNavbarRef=r.a.createRef(),this.InitUrl=e.match.url,e.domDispatch({type:"SET_SUBNAVBAR_REF",subNavbarRef:this.subNavbarRef,locationKey:e.location.key})}componentDidMount(){if("blogs"===this.props.type||"images"===this.props.type){const e=Object(g.a)(b.d,"members/");u.a.get(e).then(e=>{const t=this.initMembers;Object.values(b.n).forEach(a=>{if(a.isActive){t[a.id]=[];for(const s of e.data[a.key])t[a.id].push(s.map(e=>({url:e.url,full_kanji:e.full_kanji})))}}),this.setState({membersCollection:t})}).catch(e=>{console.log(e)}).finally()}}componentDidUpdate(e){Object(g.e)(this.props)&&this.props.match.url===this.InitUrl&&this.props.location.key!==e.location.key&&this.props.domDispatch({type:"SET_SUBNAVBAR_REF",subNavbarRef:this.subNavbarRef,locationKey:this.props.location.key})}render(){const e=this.getTypeChangeButton(!0),t=this.getModeSelectButtonGroupVerLeft(!0),a=this.getModeSelectButtonGroup(!0);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fixed-headline border-bottom text-muted pl-0 pl-lg-3",style:{top:g.s?b.v:0,height:b.A},ref:this.subNavbarRef},r.a.createElement(i.a,{mini:!0,className:"mr-0 mr-lg-2"}),this.props.title&&(t||a)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,this.props.title),!g.s&&e,r.a.createElement("div",{className:"vertical-hr "+(g.s?"ml-3":"mx-2")})),this.props.title&&!t&&!a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,this.props.title),!g.s&&e),r.a.createElement("div",{className:"fixed-headline-contents-wrapper",style:{height:b.A}},r.a.createElement("div",{className:"fixed-headline-contents-wrapper2",style:{height:b.A}},r.a.createElement("div",{className:"text-muted fixed-headline-contents"},t,a)))),!g.s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-between mr-0"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(i.a,null),this.getModeSelectButtonGroupVerLeft(!1),this.props.title&&r.a.createElement("h3",{className:"ml-3 my-0"},this.props.title),this.getTypeChangeButton(!1)),this.getModeSelectButtonGroup(!1))))}}t.a=Object(d.o)(e=>r.a.createElement(v.a.Consumer,null,t=>r.a.createElement(x,k({},e,{domDispatch:t}))))},134:function(e,t,a){"use strict";var s=a(0),r=a.n(s);t.a=e=>{const{children:t,title:a,backgroundColor:i="rgb(50, 50, 50)",placement:o="top"}=e,[l,n]=Object(s.useState)(!1);if(!a)return r.a.createElement(r.a.Fragment,null);const c=e=>r.a.createElement("div",{className:"tooltip-body rounded-pill px-2 py-1 "+e,style:{...i?{background:i}:{}}},a);return r.a.createElement("div",{className:"tooltip-container "+(l?"active":"")},r.a.createElement("span",{className:"tooltip-wrapper"},"top"===o&&c(o),r.a.createElement("div",{onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)}},t),"bottom"===o&&c(o)))}},136:function(e,t,a){"use strict";a.r(t),a.d(t,"getImageUrlComposition",(function(){return h}));var s=a(0),r=a.n(s),i=a(142),o=a(133),l=a(137),n=a.n(l),c=a(3),m=a(148),p=a(11);class d extends r.a.Component{constructor(e){var t,a;super(e);const s=null===(t=e.match)||void 0===t||null===(a=t.params)||void 0===a?void 0:a.groupID,r=e.match.params.ct;this.isRender=Object(c.d)(e.history,s,r);const i=n.a.parse(e.location.search);this.state={group:Object(c.m)(s),groupID:s,orderFormat:void 0===i.sort?"recommend":i.sort,ct:r}}pushHistory(e){const t=n.a.parse(this.props.location.search);e.sort||(delete t.keyword,delete t.post);const a=Object.assign(t,e);let s="";Object.keys(a).forEach((e,t)=>{s+=0==t?`?${e}=${a[e]}`:`&${e}=${a[e]}`}),this.props.history.push(Object(c.a)(this.props.match.url,s))}componentDidUpdate(e){if(Object(c.e)(this.props)){const{groupID:t,ct:a,orderFormat:s}=h(this.props),r=h(e),i=r.groupID,o=r.ct,l=n.a.parse(this.props.location.search);if(void 0===a){if(i!==t||o!==a)return void this.setState({groupID:t,ct:a,group:Object(c.m)(t),orderFormat:s})}else if(i!==t||o!==a)return void this.setState({groupID:t,ct:a,group:Object(c.m)(t)});if(l.sort&&this.state.orderFormat!==l.sort)return void this.setState({orderFormat:l.sort});if(!l.sort&&"recommend"!==this.state.orderFormat)return void this.setState({orderFormat:"recommend"})}}render(){return r.a.createElement(r.a.Fragment,null,this.isRender&&r.a.createElement("div",{className:"container mt-3 text-muted"},r.a.createElement(o.a,{title:"画像一覧",type:"images",mode:this.state.group?this.state.group:"recommend",groupID:this.state.groupID,ct:this.state.ct}),r.a.createElement(m.a,{groupID:this.state.groupID,ct:this.state.ct,group:this.state.group,orderFormat:this.state.orderFormat,pushHistory:e=>this.pushHistory(e),hide:void 0===this.state.groupID&&void 0===this.state.ct}),void 0===this.state.groupID&&void 0===this.state.ct&&!c.s&&r.a.createElement("div",{className:"py-2"}),r.a.createElement(i.b,null)))}}t.default=Object(p.o)(d);const h=e=>{var t,a;const s=(null===(t=e.match)||void 0===t?void 0:t.params)?e.match.params.groupID:null,r=(null===(a=e.match)||void 0===a?void 0:a.params)?e.match.params.ct:null,i=n.a.parse(e.location.search);return{groupID:s,ct:r,orderFormat:void 0===i.sort?"recommend":i.sort}}},139:function(e,t,a){"use strict";var s=a(0),r=a.n(s),i=a(11),o=a(3),l=a(18),n=a(7),c=a(8);class m extends r.a.Component{constructor(...e){var t;return t=super(...e),this.goBack=()=>{o.r===this.props.location.key?this.props.history.push("/"):history.back()},t}render(){return this.props.mini?r.a.createElement(l.a,{className:"rounded-circle transparent-button-mobile "+(o.s?"mobile ":" ")+(this.props.className?this.props.className:""),id:"mobile-back-button",onClick:this.goBack},r.a.createElement(n.a,{icon:c.h})):this.props.fixed?r.a.createElement("button",{onClick:this.goBack,className:"btn btn-light rounded-circle p-0 otapick-back-button-fixed shadow-sm "+(this.props.className?this.props.className:"")},r.a.createElement(n.a,{icon:c.b,style:{color:"gray"}})):r.a.createElement("button",{onClick:this.goBack,className:"btn btn-light rounded-circle p-0 otapick-back-button border shadow-sm "+(this.props.className?this.props.className:"")},r.a.createElement(n.a,{icon:c.b,style:{color:"gray"}}))}}t.a=Object(i.o)(m)},140:function(e,t,a){"use strict";var s=a(0),r=a.n(s),i=a(9),o=a(18),l=a(3);t.a=e=>{const{to:t,className:a,style:s,children:n,id:c=Object(l.j)()}=e;return r.a.createElement(i.Link,{to:t,style:{textDecoration:"none"},id:c},r.a.createElement(o.a,{className:a,style:s},n))}},141:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return c}));var s=a(0),r=a.n(s),i=a(4),o=a(11);class l extends r.a.Component{constructor(e){super(e),this.DATA_AD_SLOT="",this.key=this.props.location.key}componentDidMount(){i.j||(window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push({}))}}const n=Object(o.o)(class extends l{constructor(e){super(e),this.DATA_AD_SLOT=i.i}render(){return r.a.createElement(r.a.Fragment,null,!i.j&&r.a.createElement("ins",{className:"adsbygoogle "+this.key,style:Object.assign({display:"block"},this.props.height?{height:this.props.height}:{}),"data-ad-client":i.g,"data-ad-slot":this.DATA_AD_SLOT,"data-ad-format":"auto","data-full-width-responsive":"true"}))}}),c=Object(o.o)(class extends l{constructor(e){super(e),this.DATA_AD_SLOT=i.h}render(){return r.a.createElement(r.a.Fragment,null,!i.j&&r.a.createElement("ins",{className:"adsbygoogle "+this.key,style:Object.assign({display:"block"},this.props.height?{height:this.props.height}:{}),"data-ad-client":i.g,"data-ad-slot":this.DATA_AD_SLOT,"data-ad-format":"horizontal","data-full-width-responsive":"false"}))}})},142:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var s=a(0),r=a.n(s),i=a(11),o=a(3),l=a(4),n=a(153),c=a(141),m=a(53),p=a(143),d=a(136),h=a(24),u=a(41);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}t.b=e=>{const{topComponent:t}=e;return r.a.createElement(b,g({},e,{render:(e,a,s,i,m,d,h,u,g,b,f)=>r.a.createElement(p.a,{hasMore:e,status:a,page:s,urlExcludePage:i,isLoading:m,request:d,topComponent:u&&"success"===a&&t,NotFoundComponent:f},h.map(({groupID:e,blogCt:t,blogTitle:a,src:s,url:i,blogUrl:m,officialUrl:p,writer:d,order:h,isFavorite:u,width:f,height:E},v)=>{const y="grid-item "+(g?"col-6 col-md-4 col-lg-3 col-xl-2 px-1 px-sm-2 "+(o.s?"my-1 ":"my-3 "):"col-6 col-md-4 col-lg-3 px-1 px-sm-2 "+(o.s?"my-1 ":"my-3 "));return r.a.createElement("div",{key:v},r.a.createElement("div",{className:y},r.a.createElement(n.a,{id:v,groupID:e,group:Object(o.m)(e),blogCt:t,blogTitle:a,src:s,url:i,blogUrl:m,officialUrl:p,writer:d,order:h,isFavorite:u,width:f,height:E})),!b&&v%l.b===l.a&&r.a.createElement("div",{className:y+(o.s?"mb-4":"")},r.a.createElement(c.b,null)))}))}))};const b=Object(i.o)(e=>{var t;const{type:a,render:i}=e,n=null===(t=e.match)||void 0===t?void 0:t.params,[c]=Object(s.useState)(n&&n.groupID),[g]=Object(s.useState)(n&&n.blogCt),[b]=Object(s.useState)(n&&n.order),[f]=Object(s.useState)(n&&n.ct),[E]=Object(s.useState)(Object(d.getImageUrlComposition)(e).orderFormat);let v,y,w=!1,O=!1;switch(a){case"RELATED_IMAGES":v=Object(o.a)(l.d,"relatedImages/",c,g,b),w=!0,O=!0;break;case"FAVORITE_IMAGES":v=Object(o.a)(l.d,"favorites/"),w=!0,O=!0,y=r.a.createElement("div",{className:o.t?"mx-1":"mx-3"},r.a.createElement(u.c,{type:"favoriteImage",margin:!0}));break;case"HOME":v=Object(o.a)(l.d,"home/");break;default:v=Object(o.a)(l.d,"images/",c,f)}const[N,k,j,D,x,I,C]=Object(p.b)(),_=Object(o.a)(v,E&&"?sort="+E,C&&"?random_seed="+C),[S,F]=Object(s.useState)(!1),U=Object(h.d)(),{isLoading:L,request:V}=Object(m.a)(Object(o.a)(_,"?page="+I.current),"get",{thenCallback:e=>{if(e.data.length>0){const t=e.data.map(e=>({groupID:e.blog.group_id,blogCt:e.blog.blog_ct,blogTitle:e.blog.title,src:e.image.src,url:e.image.url,blogUrl:e.blog.url,officialUrl:e.blog.official_url,writer:e.blog.writer,order:e.image.order,isFavorite:e.image.is_favorite,width:e.image.width,height:e.image.height}));k(t),D("success"),e.data.length<20&&(x.current=!1)}else 1==I.current?(x.current=!1,D("image_not_found")):x.current=!1;F&&F(!0)},catchCallback:e=>{404===e.response.status&&(x.current=!1,D("image_not_found"))},finallyCallback:()=>{I.current++},didRequestCallback:e=>console.info(e),shouldRequestDidMount:!0,token:U.token});return i(x.current,j,I.current,_,L,V,N,S,w,O,y)})},143:function(e,t,a){"use strict";a.d(t,"b",(function(){return g}));var s=a(0),r=a.n(s),i=a(28),o=a(155),l=a.n(o),n=a(144),c=a.n(n),m=a(3),p=a(11),d=a(41),h=a(27);const u=Object(p.o)(e=>{const{hasMore:t,status:a,page:o,urlExcludePage:n,isLoading:p,request:u,topComponent:g,NotFoundComponent:b,children:f}=e,E=Object(h.d)();Object(s.useEffect)(()=>{t||E({type:"APPLY_SHOW_FOOTER",location:e.location})},[t]),Object(s.useEffect)(()=>{for(const t of document.getElementsByClassName("adsbygoogle"))t.classList.contains(e.location.key)||t.remove()},[e.location]);return r.a.createElement(r.a.Fragment,null,g,r.a.createElement(c.a,{hasMore:t,loadMore:()=>{t&&!p&&u({url:Object(m.a)(n,"?page="+o)})},initialLoad:!1,loader:r.a.createElement(i.b,{key:0}),className:"mb-5",threshold:500},"success"===a&&r.a.createElement(l.a,{options:{itemSelector:".grid-item",transitionDuration:0,stagger:0},disableImagesLoaded:!1},f),"blog_not_found"===a&&r.a.createElement("div",null,r.a.createElement(d.c,{type:"blogFailed",margin:!0})),"image_not_found"===a&&(void 0===b?r.a.createElement("div",null,r.a.createElement(d.c,{type:"imageFailed",margin:!0})):b)))});t.a=u;const g=()=>{const[e,t]=Object(s.useState)([]),[a,r]=Object(s.useState)(""),i=Object(s.useRef)(!0),o=Object(s.useRef)(1),[l]=Object(s.useState)(Object(m.j)());return[e,a=>{t([...e,...a])},a,r,i,o,l]}},146:function(e,t,a){"use strict";var s=a(8),r=a(7),i=a(0),o=a.n(i),l=a(158),n=a(132),c=a(129),m=a(130);class p extends o.a.Component{render(){return o.a.createElement(l.a,{className:"p-0 "+this.props.className,style:this.props.style},o.a.createElement(n.a,{caret:!0,color:"light",className:"blogList-detail-btn sort-button"},o.a.createElement(r.a,{icon:s.C}),this.props.title),o.a.createElement(c.a,{className:"bold"},"images"==this.props.type&&o.a.createElement(m.a,{onClick:()=>this.props.pushHistory({sort:"recommend"})},"おすすめ順"),o.a.createElement(m.a,{onClick:()=>this.props.pushHistory({sort:"newer_post"})},"新着順"),o.a.createElement(m.a,{onClick:()=>this.props.pushHistory({sort:"older_post"})},"古い順"),o.a.createElement(m.a,{onClick:()=>this.props.pushHistory({sort:"popularity"})},"人気順"),o.a.createElement(m.a,{onClick:()=>this.props.pushHistory({sort:"dl"})},"DL順"),"blogs"==this.props.type&&o.a.createElement(m.a,{onClick:()=>this.props.pushHistory({sort:"sum_dl"})},"総DL順"),o.a.createElement(m.a,{onClick:()=>this.props.pushHistory({sort:"view"})},"閲覧数順")))}}t.a=p},148:function(e,t,a){"use strict";var s=a(0),r=a.n(s),i=a(146),o=a(26),l=a.n(o),n=a(3),c=a(11),m=a(4),p=a(51),d=a(136);class h extends r.a.Component{constructor(e){super(e),this.state={title:"",numOfHit:0,sortButtonTitle:this.convertSortButtonTitle(this.props.orderFormat),metaTitle:""},this.getImageListInfo(this.props.groupID,this.props.ct)}getImageListInfo(e,t){const a=this.props.location.search,s=Object(n.a)(m.d,"images/info/",e,t,a);setTimeout(()=>{l.a.get(s).then(e=>{e.data.status?(this.setState({title:"画像が見つかりませんでした。",numOfHit:0,status:"not_found",metaTitle:this.props.home?m.o:"Not Found Image"}),this.props.home?Object(n.D)({title:m.o,description:""}):Object(n.D)({title:"Not Found Image",description:m.p})):(this.setState({title:e.data.title,numOfHit:e.data.num_of_hit,status:"success",metaTitle:this.props.home?m.o:e.data.meta_title}),this.props.home?Object(n.D)({title:m.o,description:""}):Object(n.D)({title:e.data.meta_title+"の画像・写真一覧",description:m.p}))}).catch(e=>{console.log(e)}).finally(()=>{Object(n.q)(this.props.location.pathname)})},m.k)}convertSortButtonTitle(e){switch(e){case"recommend":return"おすすめ順";case"newer_post":return"新着順";case"older_post":return"古い順";case"popularity":return"人気順";case"dl":return"DL順";case"view":return"閲覧数順";default:return""}}componentDidUpdate(e){if(Object(n.e)(this.props)&&this.props.location!==e.location){const{groupID:e,ct:t,orderFormat:a}=Object(d.getImageUrlComposition)(this.props);this.setState({sortButtonTitle:this.convertSortButtonTitle(a)}),this.getImageListInfo(e,t),this.props.home?Object(n.D)({title:this.state.metaTitle,description:""}):Object(n.D)({title:this.state.metaTitle+"の画像・写真一覧",description:m.p})}}render(){return r.a.createElement(r.a.Fragment,null,!this.props.hide&&r.a.createElement("div",null,r.a.createElement("div",{className:"card otapick-card2 "+(n.t?"smp mb-3 ":n.s?"mb-3 mt-1 ":"my-4 ")+this.props.group},r.a.createElement("div",{className:"card-body px-4 px-sm-5 py-4"},r.a.createElement("h2",{className:"my-auto mx-2 d-flex align-items-center"},this.state.title?this.state.title:" "),r.a.createElement("hr",{className:"info-hr"}),r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement("div",{className:"col-12 col-md-6 col-lg-7 col-xl-8"},r.a.createElement("div",{className:"info-description my-1 my-sm-0"},"検索結果（",r.a.createElement("b",null,this.state.numOfHit),"件）")),"success"===this.state.status&&r.a.createElement("div",{className:"col-12 col-md-6 col-lg-5 col-xl-4 mt-2 mt-md-0"},n.s?r.a.createElement(p.a,{id:"sortImage",type:"sortImage",sortButtonTitle:this.state.sortButtonTitle,pushHistory:this.props.pushHistory,className:n.t?"mx-auto":"ml-auto",style:n.t?{width:"90%"}:{width:"9rem"}}):r.a.createElement(i.a,{className:n.t?"mx-auto":"ml-auto",type:"images",title:this.state.sortButtonTitle,pushHistory:this.props.pushHistory,style:n.t?{width:"90%"}:{width:"9rem"}})))))))}}t.a=Object(c.o)(h)},153:function(e,t,a){"use strict";var s=a(0),r=a.n(s),i=a(18),o=a(128),l=a(132),n=a(129),c=a(130),m=a(9),p=a(3),d=a(172),h=a(51),u=a(131),g=a(4),b=a(160),f=a(27),E=a(7),v=a(8);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}class w extends r.a.Component{render(){return r.a.createElement(i.a,{className:"rounded-circle p-0 image-card-download-button "+this.props.group,title:"この画像をダウンロードする",onClick:()=>Object(d.b)(Object(p.a)(g.d,this.props.url),this.props.csrftoken)})}}class O extends r.a.Component{render(){return r.a.createElement(r.a.Fragment,null,""!=this.props.title&&r.a.createElement(m.Link,{to:this.props.url,className:"btn btn-primary rounded-pill image-to-blog-button image-card-button text-left d-flex align-items-center",role:"button",title:`「${this.props.title}」を確認`},r.a.createElement("h6",{className:"omit-title m-0",style:{fontSize:14}},this.props.title)))}}class N extends r.a.Component{constructor(e){super(e),this.state={dropdownOpen:!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>(e.dropdownOpen&&this.props.hideMenu(),{dropdownOpen:!e.dropdownOpen}))}render(){return r.a.createElement(o.a,{direction:"right",isOpen:this.state.dropdownOpen,toggle:this.toggle,className:"image-card-detail-button-super text-center"},r.a.createElement(l.a,{color:"light",className:"p-0 image-card-detail-button image-card-button rounded-circle"},r.a.createElement(E.a,{icon:v.c})),r.a.createElement(n.a,{className:"bold"},r.a.createElement(c.a,{tag:m.Link,to:{pathname:this.props.url,state:{prevSrc:this.props.src}}},"詳細ページへ"),r.a.createElement(c.a,{divider:!0}),r.a.createElement(c.a,{tag:m.Link,to:this.props.writer.url.images},`「${this.props.writer.name}」の他の画像を探す`),r.a.createElement(c.a,{onClick:()=>Object(d.b)(Object(p.a)(g.d,this.props.url),this.props.csrftoken)},"この画像をダウンロードする"),r.a.createElement(c.a,{href:this.props.officialUrl,target:"_blank"},"公式ブログで確認")))}}class k extends r.a.Component{constructor(e){super(e),this.setIsOpenMenu=e=>{p.s||(e&&!this.isHover?this.setState({isOpenMenu:e}):!e&&this.isHover&&(this.detailButtonRef.current.state.dropdownOpen||this.setState({isOpenMenu:e})))},this.hideMenu=()=>{this.isHover||this.setState({isOpenMenu:!1})},this.updateCardHeight=()=>{this.imageCardRef&&Number.isFinite(this.imageCardRef.clientHeight)&&this.imageCardRef.clientHeight>this.state.cardHeight&&this.setState({cardHeight:this.imageCardRef.clientHeight})},this.componentDidMount=()=>{if(this.updateCardHeight(),this.props.domDispatch({type:"INIT_FAVORITE",imageID:this.imageID,isFavorite:this.props.initIsFavorite}),this.shouldPreload){const e=new Image;e.onload=()=>{this.setState({isLoadImage:!0}),this.shouldLoadOriginal&&this.setState({src:this.props.src.originals,srcset:""})},e.src=this.state.src,e.srcset=this.state.srcset}},this.componentDidUpdate=(e,t)=>{console.log("レンダーimageCard"),this.updateCardHeight(),t.isLoadImage!==this.state.isLoadImage&&this.state.isLoadImage&&this.props.didMountImage&&this.props.didMountImage()},this.state={isOpenMenu:!1,cardHeight:0,placeholderCardWidth:0,isLoadImage:!1,src:p.t?this.props.src["250x"]:"",srcset:p.t?"":`${this.props.src["250x"]} 1x, ${this.props.src["500x"]} 2x`},this.isHover=!1,this.detailButtonRef=r.a.createRef(),this.imageID=e.imageID,this.setIsFavorite=Object(p.h)({},e.domDispatch,this.imageID).setIsFavorite,this.csrftoken=e.cookies.get("csrftoken"),this.shouldPreload=void 0===this.props.shouldPreload||this.props.shouldPreload,this.shouldLoadOriginal=void 0!==this.props.shouldLoadOriginal&&this.props.shouldLoadOriginal}render(){const e=this.state.isOpenMenu&&!p.s,t=this.state.cardHeight>100,a=Number.isFinite(this.props.width)&&this.props.width>0?this.props.width:250,s=Number.isFinite(this.props.height)&&this.props.height>0?this.props.height:250;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"image-card",onMouseEnter:()=>{this.setIsOpenMenu(!0),this.isHover=!0},onMouseLeave:()=>{this.setIsOpenMenu(!1),this.isHover=!1}},r.a.createElement(m.Link,{to:{pathname:this.props.url,state:{prevSrc:this.props.src}}},r.a.createElement("div",{className:"image-card-wrapper "+(p.s?"":"pc")},!this.shouldPreload||this.state.isLoadImage?r.a.createElement("div",{ref:e=>this.imageCardRef=e},r.a.createElement("img",{width:a,height:s,className:"image-card-img "+(this.props.orderly?"newpost-thumbnail":""),src:this.state.src,srcSet:this.state.srcset,alt:Object(p.i)(this.props.group,this.props.writer.name),id:this.props.imgID||this.imageID})):r.a.createElement("div",{className:"image-card-preload-img-wrapper"},r.a.createElement("div",{className:"image-card-preload-img",style:{backgroundColor:"lightgray",paddingTop:s/a*100+"%"}})))),this.state.isLoadImage&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{group:this.props.group,groupID:this.props.groupID,blogCt:this.props.blogCt,order:this.props.order,isFavorite:this.props.isFavorite,setIsFavorite:this.setIsFavorite,isShowMenu:e,cardHeight:this.state.cardHeight}),e&&t&&r.a.createElement(w,{group:this.props.group,url:this.props.url,csrftoken:this.csrftoken}),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{url:this.props.blogUrl,title:this.props.blogTitle}),r.a.createElement(N,{url:this.props.url,officialUrl:this.props.officialUrl,ref:this.detailButtonRef,hideMenu:()=>this.hideMenu(),writer:this.props.writer,src:this.props.src,csrftoken:this.csrftoken})))),(this.props.message||p.s)&&r.a.createElement("div",{className:"image-card-footer"},r.a.createElement("div",{className:"image-card-message "+(p.s?"mobile":"")},this.props.message&&r.a.createElement(m.Link,{to:{pathname:this.props.url,state:{prevSrc:this.props.src}},onMouseEnter:()=>{this.setIsOpenMenu(!0),this.isHover=!0},onMouseLeave:()=>{this.setIsOpenMenu(!1),this.isHover=!1},style:{textDecoration:"none"}},r.a.createElement("div",{className:"card-message mx-auto py-2 "+(p.s?"":"pc")},r.a.createElement(E.a,{icon:v.j,style:{color:"gold"}})," ",r.a.createElement("b",null,this.props.message)))),p.s&&r.a.createElement(h.a,{id:this.props.id,type:"imageCard",title:`${this.props.blogTitle}（${this.props.writer.name}）`,url:this.props.url,officialUrl:this.props.officialUrl,writer:this.props.writer,src:this.props.src})))}}t.a=(()=>{const e=r.a.memo(Object(u.a)(k));return t=>{const a=`${t.groupID}_${t.blogCt}_${t.order}`;return r.a.createElement(f.b.Consumer,null,s=>r.a.createElement(f.a.Consumer,null,i=>r.a.createElement(e,y({},t,{orderly:!1,imageID:a,initIsFavorite:t.isFavorite,isFavorite:s.favoriteState[a],domDispatch:i}))))}})()},160:function(e,t,a){"use strict";var s=a(0),r=a.n(s),i=a(18),o=a(220),l=a.n(o),n=a(3),c=a(131),m=a(4),p=a(53),d=a(24),h=a(11);const u=Object(c.a)(e=>{const{groupID:t,blogCt:a,order:o,isFavorite:c,setIsFavorite:h,group:u,isShowMenu:g,cardHeight:b}=e,f=Object(s.useRef)(null),E=Object(d.d)(),v=Object(n.a)(m.d,"favorites/",t,a,o),y=Object(p.a)(v,"put",{thenCallback:()=>{h(!0)},catchCallback:()=>{h(!1)},token:E.token,csrftoken:e.cookies.get("csrftoken")}),w=Object(p.a)(v,"delete",{thenCallback:()=>{h(!1)},catchCallback:()=>{h(!0)},token:E.token,csrftoken:e.cookies.get("csrftoken")}),[O]=Object(s.useState)(`favoritebutton-${t}-${a}-${o}`);let N;Object.values(m.n).forEach(e=>{e.key===u&&(N=e.bookmarkAnimationData)}),Object(s.useEffect)(()=>{l.a.loadAnimation({container:f.current,animationData:N,loop:!1,autoplay:!1,name:O}),l.a.setSpeed(1.8,O)},[]);const k=Object(s.useRef)(!1);Object(s.useEffect)(()=>{c?!k.current&&Object(n.e)(e)&&l.a.goToAndStop(1e3,!0,O):l.a.goToAndStop(0,!0,O)},[c,e.location]);const j=()=>{c?w.request():(l.a.play(O),k.current=!0,setTimeout(()=>{k.current=!1},1e3),y.request())};if(void 0===g&&void 0===b)return r.a.createElement(i.a,{className:"rounded-circle p-0 image-view-favorite-button "+(n.s?"mobile":""),title:c?"この画像をマイフォルダから削除する":"この画像をマイフォルダに追加する",onClick:j},r.a.createElement("div",{ref:f,className:""+(c?"lottie-favorite-shadow lottie-favorite-image-view":"lottie-favorite-image-view-deactive")}));{const e=b>0&&(c||g);return r.a.createElement(i.a,{className:"rounded-circle p-0 "+(g?"image-card-favorite-button":"image-card-favorite-button-transparent"),title:c?"この画像をマイフォルダから削除する":"この画像をマイフォルダに追加する",onClick:j,style:{display:e?"block":"none"}},r.a.createElement("div",{ref:f,className:""+(c?"lottie-favorite-shadow lottie-favorite":"lottie-favorite-deactive")}))}});t.a=Object(h.o)(u)},161:function(e,t,a){"use strict";var s=a(0),r=a.n(s),i=a(158),o=a(132),l=a(129),n=a(130),c=a(9),m=a(11),p=a(3),d=a(51),h=a(7),u=a(8);const g=e=>r.a.createElement(i.a,{className:"text-center mx-auto py-3",style:{overflowY:"visible"}},r.a.createElement("div",{className:"card-detail-button-super"},r.a.createElement(o.a,{color:"light",className:"p-0 card-detail-button rounded-circle"},r.a.createElement(h.a,{icon:u.c,style:{color:"gray"}})),r.a.createElement(l.a,{className:"bold"},r.a.createElement(n.a,{tag:c.Link,to:e.url.images},"画像一覧へ"),r.a.createElement(n.a,{tag:c.Link,to:e.url.blogs},"ブログ一覧へ"),r.a.createElement(n.a,{href:e.officialUrl,target:"_blank"},"公式サイトで確認"))));class b extends r.a.Component{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"member-card mx-auto "+this.props.belongingGroup},r.a.createElement(c.Link,{to:this.props.url.images,style:{textDecoration:"none"}},r.a.createElement("div",{className:"member-card-header "+(p.s?"":"pc")},r.a.createElement("div",{className:"member-card-overlay",style:{backgroundImage:`url(${this.props.image})`}}),r.a.createElement("img",{src:this.props.image,className:"mb-3 mb-sm-4",alt:Object(p.i)(this.props.belongingGroup,this.props.lastKanji+this.props.firstKanji,"member")}),r.a.createElement("h4",{className:"m-0"},this.props.lastKanji," ",this.props.firstKanji),r.a.createElement("p",{style:{color:"whitesmoke"}},this.props.lastKana," ",this.props.firstKana))),r.a.createElement("svg",{className:"waves",viewBox:"0 24 150 28",preserveAspectRatio:"none",shapeRendering:"auto"},r.a.createElement("defs",null,r.a.createElement("path",{id:"gentle-wave",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})),r.a.createElement("g",{className:"parallax"},r.a.createElement("use",{xlinkHref:"#gentle-wave",x:this.props.wavesVals[0],y:"0",fill:"rgba(255,255,255,0.7)"}),r.a.createElement("use",{xlinkHref:"#gentle-wave",x:this.props.wavesVals[1],y:"3",fill:"rgba(255,255,255,0.5)"}),r.a.createElement("use",{xlinkHref:"#gentle-wave",x:this.props.wavesVals[2],y:"5",fill:"rgba(255,255,255,0.3)"}),r.a.createElement("use",{xlinkHref:"#gentle-wave",x:this.props.wavesVals[3],y:"7",fill:"rgba(255,255,255)"}))),r.a.createElement("div",{className:"member-card-body"},p.s?r.a.createElement(d.a,{id:this.props.id,type:"memberCard",title:`${this.props.lastKanji} ${this.props.firstKanji}`,url:this.props.url,officialUrl:this.props.officialUrl,className:"mx-auto py-3"}):r.a.createElement(g,{url:this.props.url,officialUrl:this.props.officialUrl}))),this.props.message&&r.a.createElement("div",{className:"card-message mx-auto py-2"},r.a.createElement(h.a,{icon:u.j,style:{color:"gold"}})," ",r.a.createElement("b",null,this.props.message)))}}t.a=Object(m.o)(b)},170:function(e,t,a){"use strict";var s=a(0),r=a.n(s),i=a(26),o=a.n(i),l=a(3),n=a(4);class c extends r.a.Component{constructor(e){super(e);const t=e.match.params.groupID,a=e.match.params.blogCt;this.initState={group:Object(l.m)(t),groupID:t,blogCt:a,title:"",postDate:"",writer:{},numOfViews:0,numOfDownloads:0,officialUrl:"",url:"",images:[],status:"",progress:0,loadingImageUrl:"",VIEW_KEY:"",DOWNLOAD_KEY:""},this.state=this.initState,this.blogViewURL=Object(l.a)(n.d,"blog/",this.state.groupID,this.state.blogCt),this.incrementNumOfViews=this.incrementNumOfViews.bind(this),this.incrementNumOfDownloads=this.incrementNumOfDownloads.bind(this)}getBlog(){setTimeout(()=>{o.a.get(this.blogViewURL).then(e=>{let t={};this.state.status||"blog_not_found"===e.data.status||(t={title:e.data.title,postDate:e.data.post_date,writer:e.data.writer,numOfViews:e.data.num_of_views,numOfDownloads:e.data.num_of_downloads,officialUrl:e.data.official_url,url:e.data.url}),"success"===e.data.status?void 0!==this.props.order&&e.data.images.length<=this.props.order?(this.setState(Object.assign({status:"get_image_failed"},t)),this.updateMetaVerView("get_image_failed")):(this.setState(Object.assign({images:e.data.images.map(e=>Object(l.f)(e)),status:"success",VIEW_KEY:e.data.VIEW_KEY,DOWNLOAD_KEY:e.data.DOWNLOAD_KEY},t)),this.updateMetaVerView("success",t.title,t.writer.name)):"start_download"===e.data.status||"downloading"===e.data.status?(this.setState(Object.assign({progress:e.data.progress,loadingImageUrl:e.data.loading_image,status:"accepted"},t)),this.updateMetaVerView("accepted")):"blog_not_found"===e.data.status?(this.setState({status:"blog_not_found",title:"ブログが見つかりませんでした。"}),this.updateMetaVerView("blog_not_found")):"get_image_failed"===e.data.status&&(this.setState(Object.assign({status:"get_image_failed"},t)),this.updateMetaVerView("get_image_failed"))}).catch(e=>{console.log(e)}).finally(()=>{Object(l.q)(this.props.location.pathname)})},n.k)}incrementNumOfViews(e=-1){e<0?this.setState(e=>({numOfViews:e.numOfViews+1})):this.setState(t=>{let a=t.images;return a.length>e&&(a[Number(e)].numOfViews+=1),{images:a}})}incrementNumOfDownloads(e=-1,t=1){e<0?this.setState(e=>({numOfDownloads:e.numOfDownloads+t})):this.setState(a=>{let s=a.images;return s.length>e&&(s[Number(e)].numOfDownloads+=t),{images:s}})}componentDidMount(){this.getBlog()}componentDidUpdate(e,t){t.status!==this.state.status&&"accepted"===this.state.status&&(this.reqCount=0,this.intervalReqID=setInterval(()=>{this.reqCount++<=20?this.getBlog():(this.setState({status:"get_image_failed"}),clearInterval(this.intervalReqID))},1e3)),t.status!==this.state.status&&"accepted"===t.status&&clearInterval(this.intervalReqID)}componentWillUnmount(){clearInterval(this.intervalReqID)}}t.a=c},171:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var s=a(0),r=a.n(s),i=a(158),o=a(132),l=a(129),n=a(130),c=a(222),m=a(9),p=a(11),d=a(3),h=a(51),u=a(8),g=a(7);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const f=e=>r.a.createElement(i.a,{className:"col-4 text-center",style:{overflowY:"visible"}},r.a.createElement("div",{className:"card-detail-button-super"},r.a.createElement(o.a,{color:"light",className:"p-0 card-detail-button rounded-circle"},r.a.createElement(g.a,{icon:u.c,style:{color:"gray"}})),r.a.createElement(l.a,{className:"bold"},r.a.createElement(n.a,{tag:m.Link,to:e.url},"ダウンロードページへ"),r.a.createElement(n.a,{href:e.officialUrl,target:"_blank"},"公式ブログで確認")))),E=e=>{const{target:t,title:a,mountedBlogCard:i}=e,[o,l]=Object(s.useState)(!1);return i&&document.getElementById(t)&&r.a.createElement(c.a,{placement:"top",isOpen:o,target:t,toggle:()=>{l(!o)}},a)};class v extends r.a.Component{constructor(e){super(e),this.state={mountedBlogCard:!1,isLoadThumbnail:!1,src:this.props.thumbnail["250x"],srcset:d.t?"":`${this.props.thumbnail["250x"]} 1x, ${this.props.thumbnail["500x"]} 2x`}}componentDidMount(){this.setState({mountedBlogCard:!0});const e=new Image;e.onload=()=>{this.setState({isLoadThumbnail:!0})},e.src=this.state.src,e.srcset=this.state.srcset}render(){const e=Number.isFinite(this.props.width)&&this.props.width>0?this.props.width:250,t=Number.isFinite(this.props.height)&&this.props.height>0?this.props.height:250;return r.a.createElement("div",{className:"otapick_card "+this.props.group},r.a.createElement("div",{className:"card border border-top-0"},r.a.createElement("div",{className:"l-thumbnail"},r.a.createElement(m.Link,{to:this.props.url},r.a.createElement("figure",{className:d.s?"thumbnail-wrapper-mobile":"thumbnail-wrapper"},this.props.orderly?r.a.createElement("img",{className:"card-img-top newpost-thumbnail",style:{borderRadius:"0"},src:this.props.thumbnail["500x"],alt:Object(d.i)(this.props.group,this.props.writer.name,"thumbnail")}):this.state.isLoadThumbnail?r.a.createElement("img",{className:"card-img-top",style:{borderRadius:"0"},src:this.state.src,srcSet:this.state.srcset,alt:Object(d.i)(this.props.group,this.props.writer.name,"thumbnail")}):r.a.createElement("div",{className:"preload-image-card-wrapper"},r.a.createElement("div",{className:"preload-image-card-wrapper-before",style:{paddingTop:t/e*100+"%"}}),r.a.createElement("div",{className:"preload-image-card",style:{backgroundColor:"whitesmoke"}})))),!d.s&&r.a.createElement("span",{className:"more-button"},r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-4 p-0 mr-2",id:"to-official-page-"+this.props.id},r.a.createElement("a",{rel:"noreferrer",href:this.props.officialUrl,style:{color:"white"},target:"_blank"},r.a.createElement(g.a,{icon:u.o}))),r.a.createElement(E,{target:"to-official-page-"+this.props.id,title:"公式ブログで確認",mountedBlogCard:this.state.mountedBlogCard}),r.a.createElement("div",{className:"col-4 p-0 ml-2",id:"to-download-page-"+this.props.id},r.a.createElement(m.Link,{to:this.props.url,style:{color:"white"}},r.a.createElement(g.a,{icon:u.k}))),r.a.createElement(E,{target:"to-download-page-"+this.props.id,title:"ダウンロードページへ",mountedBlogCard:this.state.mountedBlogCard})))),r.a.createElement("div",{className:"card-body pb-0 px-3 px-sm-4 pt-3"},r.a.createElement(m.Link,{to:this.props.url,style:{color:"dimgray"}},r.a.createElement("h6",{className:"card-title blog-title "+(this.props.orderly?"omit-title":"")},this.props.title?this.props.title:" ")),r.a.createElement("div",{className:"row"},r.a.createElement(m.Link,{to:this.props.writer.url.blogs,className:"card-text ml-3 small mb-2 pb-0 card-info writer-name "+this.props.group},this.props.writer.name),r.a.createElement("p",{className:"card-text ml-3 small mb-2 pb-0 card-info"},this.props.postDate)),r.a.createElement("div",{className:"container mb-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 card-parameter d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(g.a,{icon:u.p,style:{color:"gray"}}))," ",r.a.createElement("div",{className:"card-parameter-num"},Object(d.z)(this.props.numOfViews)))),d.s?r.a.createElement(h.a,{id:this.props.id,type:"blogCard",title:`${this.props.title}（${this.props.writer.name}）`,url:this.props.url,officialUrl:this.props.officialUrl,writer:this.props.writer,className:"col-4"}):r.a.createElement(f,{url:this.props.url,officialUrl:this.props.officialUrl}),r.a.createElement("div",{className:"col-4 card-parameter d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(g.a,{icon:u.k,style:{color:"gray"}}))," ",r.a.createElement("div",{className:"card-parameter-num"},Object(d.z)(this.props.numOfDownloads)))))))))}}const y=Object(p.o)(e=>r.a.createElement("div",{className:"otapick-card-back blog-card col-6 col-md-4 col-lg-3 mb-3 px-2 px-sm-3"},r.a.createElement(v,b({},e,{orderly:!0}))));class w extends r.a.Component{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"otapick-card-back"},r.a.createElement(v,b({},this.props,{orderly:!1}))),this.props.message&&r.a.createElement("div",{className:"card-message mx-auto py-2"},r.a.createElement(g.a,{icon:u.j,style:{color:"gold"}})," ",r.a.createElement("b",null,this.props.message)))}}t.b=r.a.memo(Object(p.o)(w))},172:function(e,t,a){"use strict";a.d(t,"b",(function(){return C}));var s=a(0),r=a.n(s),i=a(26),o=a.n(i),l=a(175),n=a(4),c=a(128),m=a(132),p=a(129),d=a(130),h=a(18),u=a(3),g=a(9),b=a(11),f=a(51),E=a(7),v=a(8);class y extends r.a.Component{constructor(e){super(e),this.state={dropdownOpen:!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>({dropdownOpen:!e.dropdownOpen}))}render(){return r.a.createElement(c.a,{direction:"right",isOpen:this.state.dropdownOpen,toggle:this.toggle,onClick:e=>e.stopPropagation()},r.a.createElement(m.a,{color:"light",className:"p-0 writer-card-detail-button rounded-circle"},r.a.createElement(E.a,{icon:v.a})),r.a.createElement(p.a,{className:"bold"},r.a.createElement(d.a,{tag:g.Link,to:this.props.writer.url.images},"画像一覧へ"),r.a.createElement(d.a,{tag:g.Link,to:this.props.writer.url.blogs},"ブログ一覧へ")))}}class w extends r.a.Component{render(){return r.a.createElement("div",{className:"rounded-pill d-flex writer-card p-1 align-items-center border shadow-sm",onClick:()=>this.props.history.push(this.props.writer.url.images)},r.a.createElement("img",{className:"rounded-circle writer-card-image",src:this.props.writer.image,alt:this.props.writer.name}),r.a.createElement("h6",{className:"mx-2 mb-0"},this.props.writer.name),u.s?r.a.createElement(f.a,{id:"writer-card-menu",type:"writerCard",title:this.props.writer.name,url:this.props.writer.url,officialUrl:this.props.writer.official_url}):r.a.createElement(y,{writer:this.props.writer}))}}var O=Object(b.o)(w),N=a(28),k=a(41),j=a(170),D=a(131),x=a(160),I=a(134);const C=(e,t,a=null,s)=>{o.a.post(e,{},{headers:{"X-CSRFToken":t},responseType:"blob"}).then(e=>{const t=new Blob([e.data],{type:e.data.type}),r=e.headers["content-disposition"].match(/filename="(.*)"/)[1];Object(l.saveAs)(t,r),null!==a&&a(s)})};class _ extends r.a.Component{constructor(e){super(e),this.state={dropdownOpen:!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>({dropdownOpen:!e.dropdownOpen}))}render(){return r.a.createElement(c.a,{direction:"right",isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(m.a,{color:"light",className:"p-0 image-view-detail-button rounded-circle"},r.a.createElement(E.a,{icon:v.c})),r.a.createElement(p.a,{className:"bold"},r.a.createElement(d.a,{onClick:()=>C(Object(u.a)(n.d,this.props.url),this.props.csrftoken,this.props.incrementNumOfDownloads,this.props.order)},"この画像をダウンロードする"),r.a.createElement(d.a,{href:this.props.officialUrl,target:"_blank"},"公式ブログで確認")))}}class S extends j.a{constructor(e){super(e),this.imageViewURL=this.props.imageViewURL,this.blogViewURL=this.props.blogViewURL,this.mainImageID=`main-image-${this.props.groupID}_${this.props.blogCt}_${this.props.order}_${this.props.location.key}`,this.prevSrc=this.props.prevSrc,this.imageID=`${e.groupID}_${e.blogCt}_${e.order}`;const t=Object(u.h)(e.domState.favoriteState,e.domDispatch,this.imageID);this.getIsFavorite=t.getIsFavorite,this.setIsFavorite=t.setIsFavorite,this.csrftoken=this.props.cookies.get("csrftoken")}putView(){o.a.put(this.imageViewURL,{action:"view",key:this.state.VIEW_KEY},{headers:{"X-CSRFToken":this.csrftoken}}).then(e=>{"success"==e.data.status&&this.incrementNumOfViews(this.props.order)})}putDownload(){o.a.put(this.imageViewURL,{action:"download",key:this.state.DOWNLOAD_KEY},{headers:{"X-CSRFToken":this.csrftoken}}).then(e=>{"success"==e.data.status&&this.incrementNumOfDownloads(this.props.order)})}updateMetaVerView(e,t,a){"success"===e?Object(u.D)({title:`${t}(${a})｜画像詳細`,description:`${a}のブログ「${t}」の画像です。`}):"get_image_failed"===e?Object(u.D)({title:"Not Found Image",description:""}):"blog_not_found"===e?Object(u.D)({title:"Not Found Blog",description:""}):"accepted"===e&&Object(u.D)({title:"画像取得中",description:""})}componentDidUpdate(e,t){if(Object(u.e)(this.props)){if(t.status!==this.state.status&&"success"===this.state.status){if(this.state.VIEW_KEY){const e=`${this.props.groupID}_${this.props.blogCt}_${this.props.order}_${this.props.location.key}`;this.props.domState.accessedImages.includes(e)||(this.putView(),this.props.domDispatch({type:"ACCESS_TO_IMAGE",imageID:e}))}const e=document.getElementById(this.mainImageID);Object(u.b)(e,()=>this.putDownload());let t=new Image;t.onload=setTimeout(()=>{null!==e&&(e.removeAttribute("srcset"),e.setAttribute("src",t.src))},n.k);const a=this.state.images[this.props.order];t.src=a.src.originals,this.props.domDispatch({type:"INIT_FAVORITE",imageID:this.imageID,isFavorite:this.state.images[this.props.order].isFavorite})}e.blogViewURL===this.props.blogViewURL&&e.imageViewURL===this.props.imageViewURL||(this.blogViewURL=this.props.blogViewURL,this.imageViewURL=this.props.imageViewURL),this.props.location!==e.location&&this.updateMetaVerView(this.state.status,this.state.title,this.state.writer.name),super.componentDidUpdate(e,t)}}render(){let e,t,a,s;if(""===this.state.status)t=r.a.createElement(N.b,null);else if("accepted"===this.state.status)e=r.a.createElement(N.a,{progress:this.state.progress,loadingImageUrl:n.q});else if("blog_not_found"===this.state.status)e=r.a.createElement("div",{className:"py-0 py-sm-5"},r.a.createElement(k.c,{type:"blogFailed",margin:!0}));else if("get_image_failed"===this.state.status)e=r.a.createElement("div",{className:"py-0 py-sm-5"},r.a.createElement(k.c,{type:"imageFailed",margin:!0}));else if("success"===this.state.status){const e=this.state.images[this.props.order];t=r.a.createElement("div",{className:"ml-1 ml-sm-3 ml-lg-4 image-view-text"},r.a.createElement("div",{className:"d-flex justify-content-between mt-1 mt-sm-3 mt-lg-2 mb-2 image-view-header"},r.a.createElement("div",{className:"d-flex align-items-center p-0"},r.a.createElement(I.a,{title:"この画像の閲覧数"},r.a.createElement("div",{id:"num-of-image-views-icon"},r.a.createElement(E.a,{icon:v.p,style:{color:"gray"}})))," ",e?e.numOfViews:0,r.a.createElement(I.a,{title:"この画像のダウンロード数"},r.a.createElement("div",{className:"ml-3",id:"num-of-image-downloads-icon"},r.a.createElement(E.a,{icon:v.k,style:{color:"gray"}})))," ",e?e.numOfDownloads:0),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(x.a,{group:this.props.group,groupID:this.props.groupID,blogCt:this.props.blogCt,order:this.props.order,isFavorite:this.getIsFavorite(),setIsFavorite:this.setIsFavorite}),!u.s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{title:"この画像をダウンロード"},r.a.createElement(h.a,{className:"rounded-circle p-0 image-view-download-button "+this.props.group,onClick:()=>{e&&C(Object(u.a)(n.d,e.url),this.csrftoken,this.incrementNumOfDownloads,this.props.order)},id:"image-view-download-button"}))))),r.a.createElement("div",null,r.a.createElement("hr",{className:"mt-2 mt-lg-3 mb-4 mr-3"})),r.a.createElement("div",{className:"image-view-body"},r.a.createElement("div",{className:"d-flex mb-3"},r.a.createElement(I.a,{title:"掲載ブログ"},r.a.createElement(E.a,{className:"mr-3",icon:v.w,id:"image-view-blog-icon"})),r.a.createElement(g.Link,{to:this.state.url,className:"image-view-blog-title"},this.state.title.length>50||u.t?this.state.title.length>0?r.a.createElement("h3",{className:"smaller"},this.state.title):r.a.createElement("h3",{className:"smaller"}," "):this.state.title.length>0?r.a.createElement("h3",null,this.state.title):r.a.createElement("h3",null," "))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(I.a,{title:"ブログを書いたメンバー"},r.a.createElement(E.a,{className:"mr-3",icon:v.y,id:"image-view-writer-icon"})),r.a.createElement(O,{writer:this.state.writer}))),r.a.createElement("div",{className:"image-view-footer mt-4 mt-sm-5 mt-lg-2 mb-2"},r.a.createElement("div",{className:"image-view-to-official-button-wrapper"},r.a.createElement(I.a,{title:"公式ブログで確認"},r.a.createElement("a",{className:"btn btn-primary rounded-pill image-view-to-official-button py-0 "+(u.t?"px-2":""),id:"image-view-to-official-button",role:"button",target:"_blank",rel:"noreferrer",href:this.state.officialUrl},r.a.createElement("h6",{className:"omit-title m-0 image-view-to-official-title"},r.a.createElement(E.a,{icon:v.o})," ",this.props.group+"zaka46.com")))),u.s?r.a.createElement(f.a,{id:"image-view-card-menu",type:"imageViewCard",title:`${this.state.title}（${this.state.writer.name}）`,url:this.state.url,officialUrl:this.state.officialUrl,writer:this.state.writer}):r.a.createElement(_,{officialUrl:this.state.officialUrl,url:e&&e.url,incrementNumOfDownloads:this.incrementNumOfDownloads,order:this.props.order,csrftoken:this.csrftoken}))),a=Object(u.i)(this.props.group,this.state.writer.name)}if(this.prevSrc)s=this.prevSrc["250x"];else if("success"===this.state.status){s=this.state.images[this.props.order].src["250x"]}else s=null;if(u.t)e=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"image-of-image-view smp",src:s,id:this.mainImageID,alt:a}),r.a.createElement("div",{className:"container mt-3 text-muted"},r.a.createElement("div",{className:"alert alert-success",role:"alert",style:{borderRadius:"1rem",fontSize:14}},"画像を長押しして保存をおこなってください"),r.a.createElement("div",{className:"card otapick-card2 mx-auto image-view smp "+this.props.group},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"p-0"},t)))));else{let i;if(this.prevSrc)i=`${this.prevSrc["250x"]} 1x, ${this.prevSrc["500x"]} 2x`;else if("success"===this.state.status){const e=this.state.images[this.props.order];i=`${e.src["250x"]} 1x, ${e.src["500x"]} 2x`}else i=null;e=r.a.createElement("div",{className:"card otapick-card2 mx-auto image-view "+(u.s?"mb-3 mt-1 ":"my-4 ")+this.props.group},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-12 col-lg-6 p-0"},r.a.createElement("img",{className:"image-of-image-view",src:s,id:this.mainImageID,srcSet:i,alt:a,onContextMenu:e=>u.s?"":e.preventDefault(),onMouseDown:e=>u.s?"":e.preventDefault()})),r.a.createElement("div",{className:"col-12 col-lg-6 p-0"},t))))}return r.a.createElement(r.a.Fragment,null,u.t?r.a.createElement("div",null,e):r.a.createElement("div",{className:"container mt-3 text-muted"},e))}}t.a=Object(b.o)(Object(D.a)(S))},360:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),i=a(11),o=a(171),l=a(3),n=a(4),c=a(153),m=a(161),p=a(141),d=a(8),h=a(7);class u extends r.a.Component{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"image-card"},r.a.createElement("a",{rel:"noreferrer",target:"_blank",href:this.props.url},r.a.createElement("div",{className:"image-card-wrapper "+(l.s?"":"pc")},r.a.createElement("img",{className:"image-card-img",src:this.props.src,alt:"ヲタピック公式Twitter広告"})))),this.props.message&&r.a.createElement("div",{className:"image-card-footer"},r.a.createElement("div",{className:"image-card-message "+(l.s?"mobile":"")},this.props.message&&r.a.createElement("a",{rel:"noreferrer",target:"_blank",href:this.props.url,style:{textDecoration:"none"}},r.a.createElement("div",{className:"card-message mx-auto py-2 "+(l.s?"":"pc")},r.a.createElement(h.a,{icon:d.s,style:{color:"deepskyblue"}})," ",r.a.createElement("b",null,this.props.message))))))}}var g=u,b=a(53),f=a(143),E=a(142),v=a(24);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var w=Object(i.o)(e=>{const[t]=Object(s.useState)(Object(l.j)()),[a]=Object(s.useState)(Object(l.l)()),i=Object(v.d)(),[d,h]=Object(s.useState)([]),u=Object(s.useRef)(-1),{resData:w}=Object(b.a)(Object(l.a)(n.d,"home/additional/","?random_seed="+t),"get",{thenCallback:e=>{if(e.data.length>0){let t=[];for(const a of e.data)null===a?t.push(null):"image"===a.type?t.push({groupID:a.blog.group_id,blogCt:a.blog.blog_ct,blogTitle:a.blog.title,src:a.image.src,url:a.image.url,blogUrl:a.blog.url,officialUrl:a.blog.official_url,writer:a.blog.writer,type:"image",message:a.message,order:a.image.order,isFavorite:a.image.is_favorite,width:a.image.width,height:a.image.height}):"blog"===a.type?t.push({groupID:a.blog.group_id,blogCt:a.blog.blog_ct,title:a.blog.title,postDate:a.blog.post_date,writer:a.blog.writer,numOfViews:a.blog.num_of_views,numOfDownloads:a.blog.num_of_downloads,thumbnail:a.blog.thumbnail,thumbnailWidth:a.blog.thumbnail_width,thumbnailHeight:a.blog.thumbnail_height,url:a.blog.url,officialUrl:a.blog.official_url,type:"blog",message:a.message}):"member"===a.type?t.push({image:a.member.image,url:a.member.url,officialUrl:a.member.official_url,ct:a.member.ct,lastKanji:a.member.last_kanji,firstKanji:a.member.first_kanji,lastKana:a.member.last_kana,firstKana:a.member.first_kana,belongingGroup:Object(l.m)(a.member.belonging_group),type:"member",message:a.message}):"twitter"===a.type&&t.push({type:"twitter",message:a.message,src:a.src,url:a.url});h(t)}},didRequestCallback:e=>console.log(e),shouldRequestDidMount:!0,token:i.token});return r.a.createElement(E.a,y({},e,{type:"HOME",render:(t,s,i,h,b,E,v)=>{-1===u.current&&w&&(u.current=i);let y=0;return r.a.createElement(f.a,{hasMore:t,status:s,page:i,urlExcludePage:h,isLoading:b,request:E},v.map(({groupID:t,blogCt:s,blogTitle:i,src:h,url:b,blogUrl:f,officialUrl:E,writer:v,order:w,isFavorite:O,width:N,height:k},j)=>{let D;if(j%10==0&&d.length>y&&Math.floor(j/20)>=u.current){const t=d[y],s=`additional_${y}_${e.location.key}`;null===t?D=null:"image"===t.type?D=r.a.createElement(c.a,{id:s,groupID:t.groupID,group:Object(l.m)(t.groupID),blogCt:t.blogCt,blogTitle:t.blogTitle,src:t.src,url:t.url,blogUrl:t.blogUrl,officialUrl:t.officialUrl,writer:t.writer,message:t.message,order:t.order,isFavorite:t.isFavorite,width:t.width,height:t.height}):"blog"===t.type?D=r.a.createElement(o.b,{id:s,groupID:t.groupID,group:Object(l.m)(t.groupID),blogCt:t.blogCt,thumbnail:t.thumbnail,title:t.title,writer:t.writer,postDate:t.postDate,numOfViews:t.numOfViews,numOfDownloads:t.numOfDownloads,url:t.url,officialUrl:t.officialUrl,message:t.message,width:t.thumbnailWidth,height:t.thumbnailHeight}):"member"===t.type?D=r.a.createElement(m.a,{id:s,ct:t.ct,image:t.image,url:t.url,officialUrl:t.officialUrl,lastKanji:t.lastKanji,firstKanji:t.firstKanji,lastKana:t.lastKana,firstKana:t.firstKana,belongingGroup:t.belongingGroup,wavesVals:a,message:t.message}):"twitter"===t.type&&(D=r.a.createElement(g,{url:t.url,src:t.src,message:t.message})),y++}const x="grid-item col-6 col-md-4 col-lg-3 px-1 px-sm-2 "+(l.s?"my-1 ":"my-3 ");return r.a.createElement("div",{key:j},r.a.createElement("div",{className:x},r.a.createElement(c.a,{id:j,groupID:t,group:Object(l.m)(t),blogCt:s,blogTitle:i,src:h,url:b,blogUrl:f,officialUrl:E,writer:v,order:w,isFavorite:O,width:N,height:k})),D&&r.a.createElement("div",{className:x},D),j%n.b===n.a&&r.a.createElement("div",{className:x+(l.s?"mb-4":"")},r.a.createElement(p.b,null)))}))}}))}),O=a(133),N=a(148);class k extends r.a.Component{constructor(e){super(e)}render(){return r.a.createElement("div",{className:"container text-muted mt-3"},r.a.createElement(O.a,{type:"home"}),r.a.createElement(N.a,{groupID:0,hide:!0,home:!0}),!l.s&&r.a.createElement("div",{className:"py-2"}),r.a.createElement(w,null))}}t.default=Object(i.o)(k)}}]);