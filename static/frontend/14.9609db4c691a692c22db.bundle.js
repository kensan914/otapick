(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"./src/components/pages/UsersDetailPage.jsx":function(e,t,a){"use strict";a.r(t);var n=a("./node_modules/react/index.js"),r=a.n(n),s=a("./node_modules/react-router-dom/esm/react-router-dom.js"),l=a("./src/components/contexts/ProfileContext.jsx"),c=a("./src/components/modules/axios.js"),o=a("./src/components/modules/env.js"),i=a("./src/components/modules/utils.js"),m=a("./src/components/molecules/Loader.jsx"),d=a("./node_modules/@fortawesome/free-solid-svg-icons/index.es.js"),u=a("./node_modules/@fortawesome/react-fontawesome/index.es.js"),g=a("./src/components/atoms/LinkButton.jsx"),p=a("./src/components/contexts/AuthContext.jsx");var f=e=>{const{username:t,favoriteListKey:a}=e,s=Object(p.d)(),[l,m]=Object(n.useState)(0),[f,b]=Object(n.useState)(0);return Object(c.a)(Object(i.a)(o.d,"favorites/info/"),"get",{thenCallback:e=>{const t=Object(i.g)(e.data);m(t.favoritesNum),b(t.maxFavoritesNum)},token:s.token,shouldRequestDidMount:!0}),r.a.createElement("div",{className:"row mt-4 mt-sm-5 mx-0 mx-sm-3 mx-md-0"},r.a.createElement(g.a,{to:{pathname:`/users/${t}/`,state:{accessKey:a}},className:`rounded-pill profile-mode-select-button active ${i.u?"mobile":""} ${i.w?"ml-0":"ml-3"}`},r.a.createElement(u.a,{icon:d.r,className:"mr-2"}),r.a.createElement("b",null,"マイフォルダ"),r.a.createElement("div",{className:"ml-2 px-1 rounded-pill profile-mode-select-button-badge"},r.a.createElement("b",null,l),"/"+f)))},b=a("./src/components/organisms/List/ImageList.jsx"),v=a("./src/components/atoms/TooltipComponent.jsx");var h=e=>{const{items:t=[],diameter:a=45,direction:l="left",isOverlap:c=!0,hasBorder:o=!1}=e,[m,d]=Object(n.useState)(Array(t.length).fill(!1)),u=(e,t)=>{const a=[...m];t&&a.fill(!1),a[e]=t,d(a)},g=1.14*a,p=c?.27*a:0,f="right"===l;return r.a.createElement("div",{className:"d-flex align-items-center avatar-sequence-container "+(o?"border-top border-light rounded-pill p-1 shadow-sm":"")},t.map((e,n)=>{const l="avatar-sequence-item-"+n;return r.a.createElement("div",{key:n,id:l,className:"avatar-sequence-item d-flex justify-content-center",style:{position:"relative",zIndex:m[n]?t.length:t.length-n,...f?{order:-n,left:p*n}:{right:p*n}},onMouseEnter:()=>{u(n,!0)},onMouseLeave:()=>{u(n,!1)}},(()=>{const t=r.a.createElement(s.Link,{to:e.url},r.a.createElement("div",{className:"rounded-circle avatar-sequence-image-wrapper d-flex justify-content-center align-items-center",style:{width:g,height:g}},r.a.createElement("div",{className:"rounded-circle avatar-sequence-image-hover-wrapper",style:{width:a,height:a,...m[n]?{opacity:.2}:{opacity:0}}}),e.contentsNode?r.a.createElement("div",{className:"rounded-circle avatar-sequence-image d-flex justify-content-center align-items-center",style:{width:a,height:a,backgroundColor:e.backgroundColor?e.backgroundColor:"white"}},e.contentsNode):r.a.createElement("img",{className:"rounded-circle avatar-sequence-image",width:a,height:a,style:{width:a,height:a},src:e.imageUrl,alt:e.alt})));return i.u?t:r.a.createElement(v.a,{title:e.alt},t)})())}))};var E=e=>{const{imageUrl:t,size:a}=e,n=a||(i.w?49:60),s=n+n/9;return r.a.createElement("div",{className:"profile-icon-wrapper rounded-circle",style:{height:s,width:s}},r.a.createElement("img",{className:"profile-icon-image rounded-circle",src:t,style:{height:n,width:n}}))},y=a("./src/components/molecules/DropdownMobileFriendly.jsx");var j=e=>{const{profile:t,isMe:a}=e,n=i.w?16:26,s=null!=t&&t.favGroups?t.favGroups.map(e=>{var t;return{url:`/images/${e.groupId}/`,alt:e.name,backgroundColor:null===(t=o.n[e.groupId])||void 0===t?void 0:t.color,contentsNode:r.a.createElement("div",{className:"saka-mark"})}}):[],l=e=>t[e]?{url:`/images/${o.n[t[e].belongingGroup].id}/${t[e].ct}/`,imageUrl:t[e].image,alt:t[e].fullKanji}:{},c=l("favMemberSakura"),m=l("favMemberHinata");return r.a.createElement("div",{className:"my-2 my-sm-4"},r.a.createElement("div",{className:"d-flex justify-content-center pb-3"},!i.u&&r.a.createElement("div",{className:"d-flex justify-content-end align-items-end",style:{flex:1}},r.a.createElement(h,{direction:"right",items:[...s,...a?[{url:"/settings/fav-members/",alt:"推しグループを編集する",backgroundColor:"whitesmoke",contentsNode:r.a.createElement(u.a,{icon:d.A,color:"gray"})}]:[]]})),r.a.createElement("div",{className:"mx-2"},r.a.createElement(E,{imageUrl:t.image})),!i.u&&r.a.createElement("div",{className:"d-flex align-items-end",style:{flex:1}},r.a.createElement(h,{direction:"left",items:[...Object.keys(c).length?[c]:[],...Object.keys(m).length?[m]:[],...a?[{url:"/settings/fav-members/",alt:"推しメンを編集する",backgroundColor:"whitesmoke",contentsNode:r.a.createElement(u.a,{icon:d.A,color:"gray"})}]:[]]}))),r.a.createElement("div",{className:"d-flex align-items-center flex-column"},r.a.createElement("h1",{className:"profile-title pb-0 pb-sm-2 m-0 text-center",style:{fontSize:n}},t.name),r.a.createElement("div",{className:""},"@",t.username)),i.u&&(()=>{const e=[...Object.keys(c).length?[c]:[],...Object.keys(m).length?[m]:[],...s];return r.a.createElement("div",{className:"d-flex justify-content-center align-items-center mt-2"},r.a.createElement("div",{className:"d-flex justify-content-center align-items-center border-top border-light rounded-pill p-1 shadow-sm"},r.a.createElement("div",{className:"pl-3 pr-2"},r.a.createElement(v.a,{title:"推し"},r.a.createElement(u.a,{icon:d.u,color:"#ff7f7f",size:"lg"}))),r.a.createElement("div",{className:"mobile-fav-members-contents-wrapper border border-light rounded-pill",style:{maxWidth:.65*window.innerWidth}},e.length>0?r.a.createElement(h,{direction:"left",isOverlap:!1,items:e}):r.a.createElement("div",{className:"py-1 px-2"},a?"推しを設定して画像やブログの表示をカスタマイズしましょう！":"推し未設定")),a&&e.length>0?r.a.createElement(y.a,{id:"fav-member-dropdown",buttonClass:"rounded-circle fav-member-dropdown-button d-flex justify-content-center align-items-center mx-1 border-0",buttonStyle:{width:45,height:45},menuSettings:[{type:"TITLE",label:"推し"},{type:"LINK",pathname:"/settings/fav-members/",state:{},label:"推しを設定する",icon:d.H},Object.keys(c).length?{type:"LINK",pathname:c.url,state:{},label:`「${c.alt}」の画像一覧へ`,icon:d.w}:{},Object.keys(m).length?{type:"LINK",pathname:m.url,state:{},label:`「${m.alt}」の画像一覧へ`,icon:d.w}:{},...s.map(e=>({type:"LINK",pathname:e.url,state:{},label:`「${e.alt}」の画像一覧へ`,icon:d.w}))]},r.a.createElement(u.a,{icon:d.a,color:"gray"})):r.a.createElement(g.a,{to:"/settings/fav-members/",className:"rounded-circle avatar-sequence-image d-flex justify-content-center align-items-center mx-1 border-0",style:{width:45,height:45,backgroundColor:"white"}},r.a.createElement(u.a,{icon:d.A,color:"gray"}))))})())};var x=Object(s.withRouter)(e=>{const{profile:t,username:a,isMe:s,isLoading:l,accessKey:c}=e,[o,i]=Object(n.useState)(c);return Object(n.useEffect)(()=>{o!==c&&void 0!==c&&i(c)},[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mt-3 text-muted"},l?r.a.createElement(m.b,null):r.a.createElement(j,{profile:t,isMe:s})),s?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-fluid mt-3 text-muted"},r.a.createElement(f,{username:a,favoriteListKey:o,key:o})),r.a.createElement("div",{className:"container-fluid text-muted mt-3 list-container-fluid favorite-images-container"},r.a.createElement(b.b,{key:o,type:"FAVORITE_IMAGES"}))):r.a.createElement("div",{style:{marginTop:300}}))});t.default=Object(s.withRouter)(e=>{var t;const a=Object(l.d)(),m=Object(s.useParams)(),[d]=Object(n.useState)(Object(i.e)(e)?m.username:""),u=a.profile.username===d,[g,p]=Object(n.useState)({}),{isLoading:f,request:b}=Object(c.a)(Object(i.a)(o.d,"users/",d),"get",{thenCallback:e=>{const t=Object(i.g)(e.data);p(t),Object(i.H)({title:t.name,description:""})}});Object(n.useEffect)(()=>{u?p({...a.profile}):b()},[d]),Object(n.useEffect)(()=>{u&&p({...a.profile})},[a.profile]);const v=Object(s.useLocation)();return r.a.createElement(x,{isLoading:f,profile:g,username:d,isMe:u,accessKey:null==v||null===(t=v.state)||void 0===t?void 0:t.accessKey})})}}]);